!function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=(0,m.groupBy)(e,"artist");return t}function s(e,t){var n=e.filter(function(e){return e.artist.toString().charAt(0)===t});return n}function i(e,t){v=new h["default"](e,g);var n=v.search(t);return n}function a(e){return d["default"].publish("searchStart",{searchTerm:e}),l["default"].get("search_data.json").then(function(t){return i(t.data,e)}).then(y).then(o)["catch"](function(e){console.error(e)})}function u(e){return d["default"].publish("searchStart",{letter:e}),l["default"].get("search_data.json").then(function(t){return s(t.data,e)}).then(y).then(o)["catch"](function(e){console.error(e)})}Object.defineProperty(n,"__esModule",{value:!0}),n.searchByName=a,n.findArtistsByLetter=u;var c=e("axios"),l=r(c),f=e("fuse.js"),h=r(f),p=e("./pubsub"),d=r(p),m=e("./helpers/underscore"),v=void 0,g={shouldSort:!0,threshold:.1,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["artist","title"]},y=function(e){var t=e.sort(function(e,t){var n=e.artist.toLowerCase(),r=t.artist.toLowerCase();return n>r?1:n<r?-1:0});return t}},{"./helpers/underscore":5,"./pubsub":7,axios:10,"fuse.js":35}],2:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){b.classList.remove("u-hidden"),w.value=e.artist,_.value=e.title}function a(e){x.value="",S.value="",b.classList.add("u-hidden"),console.log("reset form")}function u(e){var t,n,r;t=e.target,r=t.parentNode.parentNode,n=r.previousSibling,console.log(t.textContent),console.log(n.textContent);var o=new C(t.textContent,n.textContent,x.value?x.value:"",S.value?S.value:"");console.log(o),i(o)}function c(e){var t=e||window.event;if(t.preventDefault(),""!==w.value&&""!==_.value){var n=Object.assign({name:x.value.toLowerCase(),phone:S.value.replace(/-/g,""),artist:w.value,song:_.value});return console.log(n),!1}b.previousSibling.innerHTML="Please fill out all of the fields"}function l(e){var t=e||window.event;t.preventDefault();var n=this.dataset.letter;v.findArtistsByLetter(n).then(function(e){d["default"].publish("searchComplete",{songList:e,searchTerm:n})})}function f(){var e="qwertyuiopasdfghjklzxcvbnm",t=e.toUpperCase(),n=[].concat(s(t)),r=n.sort(),o=r.map(function(e){return'<li class="o-list-inline__item c-az__item"><a class="c-az__letter" data-letter="'+e+'">'+e+"</a></li>"}).join("");return'<ul class="o-list-inline c-az">'+o+"</ul>"}var h=e("./helpers/events"),p=e("./pubsub"),d=o(p),m=e("./api"),v=r(m),g=document.querySelector(".az-search"),y=document.getElementById("js-search_results"),b=document.getElementById("sign-up"),w=document.getElementById("js-artist__input"),_=document.getElementById("js-song__input"),x=document.getElementById("js-name__input"),S=document.getElementById("js-phone__input"),L=(document.querySelector(".c-searchform__inputs"),document.querySelector(".c-searchform__input")),E=document.querySelector("#js-songpick"),C=function(e,t,n,r){this.title=e,this.artist=t,this.name=n,this.phone=r};g.innerHTML=f(),(0,h.delegateEventListener)(g,"click","a",l),(0,h.delegateEventListener)(y,"click","a",u),E.addEventListener("submit",c),L.addEventListener("focus",a)},{"./api":1,"./helpers/events":4,"./pubsub":7}],3:[function(e,t,n){"use strict";function r(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}Object.defineProperty(n,"__esModule",{value:!0}),n.hasClass=r;var o=n.addClass=function(e,t){var n=e;n.classList?n.classList.add(t):n.className+=" "+t},s=n.removeClass=function(e,t){var n=e;n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")};n.toggleClass=function(e,t){var n=e;r(n,t)?s(n,t):o(n,t)},n.setStyle=function(e,t){var n=t;Object.assign(e.style,n)},n.findParentByTagName=function(e,t){for(var n=e;null!==n&&n.tagName!==t.toUpperCase();)n=n.parentNode;return n}},{}],4:[function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0;window.CustomEvent?r=new CustomEvent(t,{detail:n}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(r)}function o(e,t,n,r){var o=e;o.addEventListener(t,function(t){for(var s=o.querySelectorAll(n),i=t.target,a=0,u=s.length;a<u;a++)for(var c=i,l=s[a];c&&c!==e;){if(c===l)return r.call(l,t);c=c.parentNode}return!1})}Object.defineProperty(n,"__esModule",{value:!0}),n.trigger=r,n.delegateEventListener=o},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=Object.prototype.toString,o=function(e){return"[object Function]"===r.call(e)};n.groupBy=function(e,t){return e.reduce(function(e,n){var r=o(t)?t.apply(void 0,[n]):n[t];return e[r]=e[r]||[],e[r].push(n),e},{})}},{}],6:[function(e,t,n){"use strict";e("./az-search"),e("./search"),e("./results")},{"./az-search":2,"./results":8,"./search":9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){var e={},t=function(t,n){e[t]=e[t]||[],e[t].push(n)},n=function(t,n){if(e[t])for(var r=0,o=e[t].length;r<o;r++)if(e[t][r]===n){e[t].splice(r,1);break}},r=function(t,n){e[t]&&e[t].forEach(function(e){e(n)})};return{subscribe:t,unsubscribe:n,publish:r}}();n["default"]=r},{}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){c.innerHTML="",(0,i.removeClass)(l,"u-hidden")}function s(e){var t=e.songList,n=e.searchTerm,r="";r='<h2 class="c-search__heading">Search Results: <span c-search__term>'+n+'</span></h2><section class="c-search__list">',Object.keys(t).forEach(function(e){r+='<p class="c-search__artist">'+e+"</p><ul>",t[e].forEach(function(e){r+='<li class="c-search__title"><a href="#sign-up">'+e.title+"</a></li>"}),r+="</ul>"}),r+="</section>",(0,i.addClass)(l,"u-hidden"),c.innerHTML=r}var i=e("./helpers/dom-elements"),a=e("./pubsub"),u=r(a),c=document.querySelector("#js-search_results"),l=document.querySelector(".loader");u["default"].subscribe("searchStart",o),u["default"].subscribe("searchComplete",s)},{"./helpers/dom-elements":3,"./pubsub":7}],9:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function s(){p.value=""}function i(e){var t=e||window.event;t.preventDefault();var n=p.value;""!==n&&f.searchByName(n).then(function(e){c["default"].publish("searchComplete",{songList:e,searchTerm:n})})}function a(e){var t=e;t.letter&&s()}var u=e("./pubsub"),c=o(u),l=e("./api"),f=r(l),h=document.querySelector("#js-songsearch"),p=h.querySelector("#js-songsearch__input");h.addEventListener("submit",i),c["default"].subscribe("searchStart",a)},{"./api":1,"./pubsub":7}],10:[function(e,t,n){t.exports=e("./lib/axios")},{"./lib/axios":12}],11:[function(e,t,n){(function(n){"use strict";var r=e("./../utils"),o=e("./../core/settle"),s=e("./../helpers/buildURL"),i=e("./../helpers/parseHeaders"),a=e("./../helpers/isURLSameOrigin"),u=e("../core/createError"),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||e("./../helpers/btoa");t.exports=function(t){return new Promise(function(l,f){var h=t.data,p=t.headers;r.isFormData(h)&&delete p["Content-Type"];var d=new XMLHttpRequest,m="onreadystatechange",v=!1;if("test"===n.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(t.url)||(d=new window.XDomainRequest,m="onload",v=!0,d.onprogress=function(){},d.ontimeout=function(){}),t.auth){var g=t.auth.username||"",y=t.auth.password||"";p.Authorization="Basic "+c(g+":"+y)}if(d.open(t.method.toUpperCase(),s(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d[m]=function(){if(d&&(4===d.readyState||v)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in d?i(d.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?d.response:d.responseText,r={data:n,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:e,config:t,request:d};o(l,f,r),d=null}},d.onerror=function(){f(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){f(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var b=e("./../helpers/cookies"),w=(t.withCredentials||a(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;w&&(p[t.xsrfHeaderName]=w)}if("setRequestHeader"in d&&r.forEach(p,function(e,t){"undefined"==typeof h&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(_){if("json"!==t.responseType)throw _}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===h&&(h=null),d.send(h)})}}).call(this,e("_process"))},{"../core/createError":18,"./../core/settle":21,"./../helpers/btoa":25,"./../helpers/buildURL":26,"./../helpers/cookies":28,"./../helpers/isURLSameOrigin":30,"./../helpers/parseHeaders":32,"./../utils":34,_process:37}],12:[function(e,t,n){"use strict";function r(e){var t=new i(e),n=s(i.prototype.request,t);return o.extend(n,i.prototype,t),o.extend(n,t),n}var o=e("./utils"),s=e("./helpers/bind"),i=e("./core/Axios"),a=e("./defaults"),u=r(a);u.Axios=i,u.create=function(e){return r(o.merge(a,e))},u.Cancel=e("./cancel/Cancel"),u.CancelToken=e("./cancel/CancelToken"),u.isCancel=e("./cancel/isCancel"),u.all=function(e){return Promise.all(e)},u.spread=e("./helpers/spread"),t.exports=u,t.exports["default"]=u},{"./cancel/Cancel":13,"./cancel/CancelToken":14,"./cancel/isCancel":15,"./core/Axios":16,"./defaults":23,"./helpers/bind":24,"./helpers/spread":33,"./utils":34}],13:[function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},{}],14:[function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=e("./Cancel");r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r(function(t){e=t});return{token:t,cancel:e}},t.exports=r},{"./Cancel":13}],15:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],16:[function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new i,response:new i}}var o=e("./../defaults"),s=e("./../utils"),i=e("./InterceptorManager"),a=e("./dispatchRequest"),u=e("./../helpers/isAbsoluteURL"),c=e("./../helpers/combineURLs");r.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),e=s.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase(),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},s.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(s.merge(n||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(s.merge(r||{},{method:e,url:t,data:n}))}}),t.exports=r},{"./../defaults":23,"./../helpers/combineURLs":27,"./../helpers/isAbsoluteURL":29,"./../utils":34,"./InterceptorManager":17,"./dispatchRequest":19}],17:[function(e,t,n){"use strict";function r(){this.handlers=[]}var o=e("./../utils");r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=r},{"./../utils":34}],18:[function(e,t,n){"use strict";var r=e("./enhanceError");t.exports=function(e,t,n,o,s){var i=new Error(e);return r(i,t,n,o,s)}},{"./enhanceError":20}],19:[function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=e("./../utils"),s=e("./transformData"),i=e("../cancel/isCancel"),a=e("../defaults");t.exports=function(e){r(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||a.adapter;return t(e).then(function(t){return r(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(r(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":15,"../defaults":23,"./../utils":34,"./transformData":22}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},{}],21:[function(e,t,n){"use strict";var r=e("./createError");t.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},{"./createError":18}],22:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},{"./../utils":34}],23:[function(e,t,n){(function(n){"use strict";function r(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var t;return"undefined"!=typeof XMLHttpRequest?t=e("./adapters/xhr"):"undefined"!=typeof n&&(t=e("./adapters/http")),t}var s=e("./utils"),i=e("./helpers/normalizeHeaderName"),a={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(e,t){return i(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e)?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(e){u.headers[e]={}}),s.forEach(["post","put","patch"],function(e){u.headers[e]=s.merge(a)}),t.exports=u}).call(this,e("_process"))},{"./adapters/http":11,"./adapters/xhr":11,"./helpers/normalizeHeaderName":31,"./utils":34,_process:37}],24:[function(e,t,n){"use strict";t.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},{}],25:[function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function o(e){for(var t,n,o=String(e),i="",a=0,u=s;o.charAt(0|a)||(u="=",a%1);i+=u.charAt(63&t>>8-a%1*8)){if(n=o.charCodeAt(a+=.75),n>255)throw new r;t=t<<8|n}return i}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=o},{}],26:[function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=e("./../utils");t.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(o.isURLSearchParams(t))s=t.toString();else{var i=[];o.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(r(t)+"="+r(e))}))}),s=i.join("&")}return s&&(e+=(e.indexOf("?")===-1?"?":"&")+s),e}},{"./../utils":34}],27:[function(e,t,n){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],28:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":34}],29:[function(e,t,n){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],30:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},{"./../utils":34}],31:[function(e,t,n){"use strict";var r=e("../utils");t.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},{"../utils":34}],32:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&(s[t]=s[t]?s[t]+", "+n:n)}),s):s}},{"./../utils":34}],33:[function(e,t,n){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],34:[function(e,t,n){"use strict";function r(e){return"[object Array]"===L.call(e)}function o(e){return"[object ArrayBuffer]"===L.call(e)}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}function i(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function a(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return"undefined"==typeof e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===L.call(e)}function h(e){return"[object File]"===L.call(e)}function p(e){return"[object Blob]"===L.call(e)}function d(e){return"[object Function]"===L.call(e)}function m(e){return l(e)&&d(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)b(arguments[n],e);return t}function _(e,t,n){return b(t,function(t,r){n&&"function"==typeof t?e[r]=x(t,n):e[r]=t}),e}var x=e("./helpers/bind"),S=e("is-buffer"),L=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:o,isBuffer:S,isFormData:s,isArrayBufferView:i,isString:a,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:h,isBlob:p,isFunction:d,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:b,merge:w,extend:_,trim:g}},{"./helpers/bind":24,"is-buffer":36}],35:[function(e,t,n){!function(e){"use strict";function r(){console.log.apply(console,arguments)}function o(e,t){var n;this.list=e,this.options=t=t||{};for(n in u)u.hasOwnProperty(n)&&("boolean"==typeof u[n]?this.options[n]=n in t?t[n]:u[n]:this.options[n]=t[n]||u[n])}function s(e,t,n){var r,o,a,u,c,l;if(t){if(a=t.indexOf("."),a!==-1?(r=t.slice(0,a),o=t.slice(a+1)):r=t,u=e[r],null!==u&&void 0!==u)if(o||"string"!=typeof u&&"number"!=typeof u)if(i(u))for(c=0,l=u.length;c<l;c++)s(u[c],o,n);else o&&s(u,o,n);else n.push(u)}else n.push(e);return n}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){t=t||{},this.options=t,this.options.location=t.location||a.defaultOptions.location,this.options.distance="distance"in t?t.distance:a.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:a.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||a.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var u={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:a,sortFn:function(e,t){return e.score-t.score},getFn:s,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};o.VERSION="2.7.3",o.prototype.set=function(e){return this.list=e,e},o.prototype.search=function(e){this.options.verbose&&r("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var t=this._format();return t},o.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,r=t.split(e.tokenSeparator),o=0,s=r.length;if(this.options.tokenize)for(this.tokenSearchers=[];o<s;o++)this.tokenSearchers.push(new n(r[o],e));this.fullSeacher=new n(t,e)},o.prototype._startSearch=function(){var e,t,n,r,o=this.options,s=o.getFn,i=this.list,a=i.length,u=this.options.keys,c=u.length,l=null;if("string"==typeof i[0])for(n=0;n<a;n++)this._analyze("",i[n],n,n);else for(this._keyMap={},n=0;n<a;n++)for(l=i[n],r=0;r<c;r++){if(e=u[r],"string"!=typeof e){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,s(l,e,[]),l,n)}},o.prototype._analyze=function(e,t,n,o){var s,a,u,c,l,f,h,p,d,m,v,g,y,b,w,_=this.options,x=!1;if(void 0!==t&&null!==t){a=[];var S=0;if("string"==typeof t){if(s=t.split(_.tokenSeparator),_.verbose&&r("---------\nKey:",e),this.options.tokenize){for(b=0;b<this.tokenSearchers.length;b++){for(p=this.tokenSearchers[b],_.verbose&&r("Pattern:",p.pattern),d=[],g=!1,w=0;w<s.length;w++){m=s[w],v=p.search(m);var L={};v.isMatch?(L[m]=v.score,x=!0,g=!0,a.push(v.score)):(L[m]=1,this.options.matchAllTokens||a.push(1)),d.push(L)}g&&S++,_.verbose&&r("Token scores:",d)}for(c=a[0],f=a.length,b=1;b<f;b++)c+=a[b];c/=f,_.verbose&&r("Token score average:",c)}h=this.fullSeacher.search(t),_.verbose&&r("Full text score:",h.score),l=h.score,void 0!==c&&(l=(l+c)/2),_.verbose&&r("Score average:",l),y=!this.options.tokenize||!this.options.matchAllTokens||S>=this.tokenSearchers.length,_.verbose&&r("Check Matches",y),(x||h.isMatch)&&y&&(u=this.resultMap[o],u?u.output.push({key:e,score:l,matchedIndices:h.matchedIndices}):(this.resultMap[o]={item:n,output:[{key:e,score:l,matchedIndices:h.matchedIndices}]},this.results.push(this.resultMap[o])))}else if(i(t))for(b=0;b<t.length;b++)this._analyze(e,t[b],n,o)}},o.prototype._computeScore=function(){var e,t,n,o,s,i,a,u,c,l=this._keyMap,f=this.results;for(this.options.verbose&&r("\n\nComputing score:\n"),e=0;e<f.length;e++){for(n=0,o=f[e].output,s=o.length,u=1,t=0;t<s;t++)i=o[t].score,a=l?l[o[t].key].weight:1,c=i*a,1!==a?u=Math.min(u,c):(n+=c,o[t].nScore=c);1===u?f[e].score=n/s:f[e].score=u,this.options.verbose&&r(f[e])}},o.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&r("\n\nSorting...."),this.results.sort(e.sortFn))},o.prototype._format=function(){var e,t,n,o,s=this.options,i=s.getFn,a=[],u=this.results,c=s.include;for(s.verbose&&r("\n\nOutput:\n\n",u),n=s.id?function(e){u[e].item=i(u[e].item,s.id,[])[0]}:function(){},o=function(e){var t,n,r,o,s,i=u[e];if(c.length>0){if(t={item:i.item},c.indexOf("matches")!==-1)for(r=i.output,t.matches=[],n=0;n<r.length;n++)o=r[n],s={indices:o.matchedIndices},o.key&&(s.key=o.key),t.matches.push(s);c.indexOf("score")!==-1&&(t.score=u[e].score)}else t=i.item;return t},e=0,t=u.length;e<t;e++)n(e),a.push(o(e));return a},a.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},a.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},a.prototype._bitapScore=function(e,t){var n=e/this.patternLen,r=Math.abs(this.options.location-t);return this.options.distance?n+r/this.options.distance:r?1:n},a.prototype.search=function(e){var t,n,r,o,s,i,a,u,c,l,f,h,p,d,m,v,g,y,b,w,_,x,S,L=this.options;if(e=L.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>L.maxPatternLength){if(y=e.match(new RegExp(this.pattern.replace(L.tokenSeparator,"|"))),b=!!y)for(_=[],t=0,x=y.length;t<x;t++)S=y[t],_.push([e.indexOf(S),S.length-1]);return{isMatch:b,score:b?.5:1,matchedIndices:_}}for(o=L.findAllMatches,s=L.location,r=e.length,i=L.threshold,a=e.indexOf(this.pattern,s),w=[],t=0;t<r;t++)w[t]=0;for(a!=-1&&(i=Math.min(this._bitapScore(0,a),i),a=e.lastIndexOf(this.pattern,s+this.patternLen),a!=-1&&(i=Math.min(this._bitapScore(0,a),i))),a=-1,v=1,g=[],l=this.patternLen+r,t=0;t<this.patternLen;t++){for(u=0,c=l;u<c;)this._bitapScore(t,s+c)<=i?u=c:l=c,c=Math.floor((l-u)/2+u);for(l=c,f=Math.max(1,s-c+1),h=o?r:Math.min(s+c,r)+this.patternLen,p=Array(h+2),p[h+1]=(1<<t)-1,n=h;n>=f;n--)if(m=this.patternAlphabet[e.charAt(n-1)],m&&(w[n-1]=1),p[n]=(p[n+1]<<1|1)&m,0!==t&&(p[n]|=(d[n+1]|d[n])<<1|1|d[n+1]),p[n]&this.matchmask&&(v=this._bitapScore(t,n-1),v<=i)){if(i=v,a=n-1,g.push(a),a<=s)break;f=Math.max(1,2*s-a)}if(this._bitapScore(t+1,s)>i)break;d=p}return _=this._getMatchedIndices(w),{isMatch:a>=0,score:0===v?.001:v,matchedIndices:_}},a.prototype._getMatchedIndices=function(e){for(var t,n=[],r=-1,o=-1,s=0,i=e.length;s<i;s++)t=e[s],t&&r===-1?r=s:t||r===-1||(o=s-1,o-r+1>=this.options.minMatchCharLength&&n.push([r,o]),r=-1);return e[s-1]&&s-1-r+1>=this.options.minMatchCharLength&&n.push([r,s-1]),n},"object"==typeof n?t.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):e.Fuse=o}(this)},{}],36:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function o(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||o(e)||!!e._isBuffer)}},{}],37:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(h===clearTimeout)return clearTimeout(e);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?m=d.concat(m):g=-1,m.length&&u())}function u(){if(!v){var e=s(a);v=!0;for(var t=m.length;t;){for(d=m,m=[];++g<t;)d&&d[g].run();g=-1,t=m.length}d=null,v=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,h,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{h="function"==typeof clearTimeout?clearTimeout:o}catch(e){h=o}}();var d,m=[],v=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||v||s(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}]},{},[6]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzLm1pbi5qcyIsIl9hc3NldHMvc2NyaXB0cy9hcGkuanMiLCJfYXNzZXRzL3NjcmlwdHMvYXotc2VhcmNoLmpzIiwiX2Fzc2V0cy9zY3JpcHRzL2hlbHBlcnMvZG9tLWVsZW1lbnRzLmpzIiwiX2Fzc2V0cy9zY3JpcHRzL2hlbHBlcnMvZXZlbnRzLmpzIiwiX2Fzc2V0cy9zY3JpcHRzL2hlbHBlcnMvdW5kZXJzY29yZS5qcyIsIl9hc3NldHMvc2NyaXB0cy9tYWluLmpzIiwiX2Fzc2V0cy9zY3JpcHRzL3B1YnN1Yi5qcyIsIl9hc3NldHMvc2NyaXB0cy9yZXN1bHRzLmpzIiwiX2Fzc2V0cy9zY3JpcHRzL3NlYXJjaC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9heGlvcy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbFRva2VuLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvQXhpb3MuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2NyZWF0ZUVycm9yLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnRvYS5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvZnVzZS5qcy9zcmMvZnVzZS5qcyIsIm5vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImdyb3VwU29uZ3MiLCJzb25nTGlzdCIsImdyb3VwZWQiLCJfdW5kZXJzY29yZSIsImdyb3VwQnkiLCJmaWx0ZXJCeUxldHRlciIsImxldHRlciIsImZpbHQiLCJmaWx0ZXIiLCJpdGVtIiwiYXJ0aXN0IiwidG9TdHJpbmciLCJjaGFyQXQiLCJmaWx0ZXJCeVRlcm0iLCJzZWFyY2hUZXJtIiwiZnVzZSIsIl9mdXNlMiIsImZ1c2VPcHRpb25zIiwiZnVzZVJlc3VsdHMiLCJzZWFyY2giLCJzZWFyY2hCeU5hbWUiLCJfcHVic3ViMiIsInB1Ymxpc2giLCJfYXhpb3MyIiwiZ2V0IiwidGhlbiIsInJlc3VsdHMiLCJkYXRhIiwic29ydFNvbmdzIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluZEFydGlzdHNCeUxldHRlciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfYXhpb3MiLCJfZnVzZSIsIl9wdWJzdWIiLCJzaG91bGRTb3J0IiwidGhyZXNob2xkIiwibG9jYXRpb24iLCJkaXN0YW5jZSIsIm1heFBhdHRlcm5MZW5ndGgiLCJtaW5NYXRjaENoYXJMZW5ndGgiLCJrZXlzIiwic29ydGVkIiwic29ydCIsImIiLCJhbGMiLCJ0b0xvd2VyQ2FzZSIsImJsYyIsIi4vaGVscGVycy91bmRlcnNjb3JlIiwiLi9wdWJzdWIiLCJheGlvcyIsImZ1c2UuanMiLCIyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJuZXdPYmoiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJmcm9tIiwiZmlsbEZvcm0iLCJmb3JtIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic2VsZWN0ZWRBcnRpc3QiLCJzZWxlY3RlZFNvbmciLCJ0aXRsZSIsInJlc2V0Rm9ybSIsIm5hbWUiLCJwaG9uZSIsImFkZCIsImxvZyIsImdldERhdGEiLCJhcnRpc3RTb25ncyIsInRhcmdldCIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJ0ZXh0Q29udGVudCIsInNlbGVjdGlvbiIsInN1Ym1pdFJlcXVlc3QiLCJldnQiLCJ3aW5kb3ciLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVxdWVzdCIsImFzc2lnbiIsInJlcGxhY2UiLCJzb25nIiwiaW5uZXJIVE1MIiwibGV0dGVyQ2xpY2tIYW5kbGVyIiwidGhlTGV0dGVyIiwidGhpcyIsImRhdGFzZXQiLCJhcGkiLCJpbml0TGV0dGVyTWVudSIsImxldHRlcnMiLCJ1cHBlcmNhc2VMZXR0ZXJzIiwidG9VcHBlckNhc2UiLCJsZXR0ZXJMaXN0IiwiY29uY2F0Iiwic29ydGVkTGlzdCIsImh0bWxMaXN0IiwibWFwIiwiam9pbiIsIl9ldmVudHMiLCJfYXBpIiwibGV0dGVyTWVudUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNvbmdUaXRsZXMiLCJnZXRFbGVtZW50QnlJZCIsInNlYXJjaElucHV0IiwicmVxdWVzdEZvcm0iLCJkZWxlZ2F0ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiLi9hcGkiLCIuL2hlbHBlcnMvZXZlbnRzIiwiMyIsImhhc0NsYXNzIiwiZWwiLCJjbGFzc05hbWUiLCJjb250YWlucyIsIlJlZ0V4cCIsInRlc3QiLCJhZGRDbGFzcyIsImVsZW1lbnQiLCJyZW1vdmVDbGFzcyIsInNwbGl0IiwidG9nZ2xlQ2xhc3MiLCJzZXRTdHlsZSIsInByb3BlcnR5T2JqZWN0Iiwic3R5bGVzIiwic3R5bGUiLCJmaW5kUGFyZW50QnlUYWdOYW1lIiwidGFnTmFtZSIsInBhcmVudCIsIjQiLCJ0cmlnZ2VyIiwiZXZlbnRuYW1lIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsImRpc3BhdGNoRXZlbnQiLCJzZWxlY3RvciIsImhhbmRsZXIiLCJwb3NzaWJsZVRhcmdldHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicCIsIjUiLCJpc0Z1bmN0aW9uIiwibGlzdCIsInByb3AiLCJyZWR1Y2UiLCJhcHBseSIsInB1c2giLCI2IiwiLi9hei1zZWFyY2giLCIuL3Jlc3VsdHMiLCIuL3NlYXJjaCIsIjciLCJwdWJzdWIiLCJ0b3BpY3MiLCJzdWJzY3JpYmUiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInVuc3Vic2NyaWJlIiwibGVuIiwic3BsaWNlIiwiZm9yRWFjaCIsIjgiLCJjbGVhclJlc3VsdHMiLCJwbGFjZWhvbGRlciIsIl9kb21FbGVtZW50cyIsImxvYWRyIiwicmVuZGVyIiwicHVib2JqIiwiaHRtbFN0dWZmIiwiLi9oZWxwZXJzL2RvbS1lbGVtZW50cyIsIjkiLCJjbGVhclNlYXJjaCIsInNlYXJjaEhhbmRsZXIiLCJvblNlYXJjaFN0YXJ0IiwicHMiLCJwdWJzdWJPYmplY3QiLCJzZWFyY2hGb3JtIiwiMTAiLCIuL2xpYi9heGlvcyIsIjExIiwicHJvY2VzcyIsInV0aWxzIiwic2V0dGxlIiwiYnVpbGRVUkwiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJjcmVhdGVFcnJvciIsImJ0b2EiLCJiaW5kIiwiY29uZmlnIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXF1ZXN0RGF0YSIsInJlcXVlc3RIZWFkZXJzIiwiaGVhZGVycyIsImlzRm9ybURhdGEiLCJYTUxIdHRwUmVxdWVzdCIsImxvYWRFdmVudCIsInhEb21haW4iLCJlbnYiLCJOT0RFX0VOViIsIlhEb21haW5SZXF1ZXN0IiwidXJsIiwib25wcm9ncmVzcyIsIm9udGltZW91dCIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiQXV0aG9yaXphdGlvbiIsIm9wZW4iLCJtZXRob2QiLCJwYXJhbXMiLCJwYXJhbXNTZXJpYWxpemVyIiwidGltZW91dCIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZVVSTCIsImluZGV4T2YiLCJyZXNwb25zZUhlYWRlcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJyZXNwb25zZURhdGEiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1c1RleHQiLCJvbmVycm9yIiwiaXNTdGFuZGFyZEJyb3dzZXJFbnYiLCJjb29raWVzIiwieHNyZlZhbHVlIiwid2l0aENyZWRlbnRpYWxzIiwieHNyZkNvb2tpZU5hbWUiLCJyZWFkIiwieHNyZkhlYWRlck5hbWUiLCJ2YWwiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25Eb3dubG9hZFByb2dyZXNzIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwicHJvbWlzZSIsImNhbmNlbCIsImFib3J0Iiwic2VuZCIsIi4uL2NvcmUvY3JlYXRlRXJyb3IiLCIuLy4uL2NvcmUvc2V0dGxlIiwiLi8uLi9oZWxwZXJzL2J0b2EiLCIuLy4uL2hlbHBlcnMvYnVpbGRVUkwiLCIuLy4uL2hlbHBlcnMvY29va2llcyIsIi4vLi4vaGVscGVycy9pc1VSTFNhbWVPcmlnaW4iLCIuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzIiwiLi8uLi91dGlscyIsIl9wcm9jZXNzIiwiMTIiLCJjcmVhdGVJbnN0YW5jZSIsImRlZmF1bHRDb25maWciLCJjb250ZXh0IiwiQXhpb3MiLCJpbnN0YW5jZSIsImV4dGVuZCIsImRlZmF1bHRzIiwiY3JlYXRlIiwiaW5zdGFuY2VDb25maWciLCJtZXJnZSIsIkNhbmNlbCIsIkNhbmNlbFRva2VuIiwiaXNDYW5jZWwiLCJhbGwiLCJwcm9taXNlcyIsInNwcmVhZCIsIi4vY2FuY2VsL0NhbmNlbCIsIi4vY2FuY2VsL0NhbmNlbFRva2VuIiwiLi9jYW5jZWwvaXNDYW5jZWwiLCIuL2NvcmUvQXhpb3MiLCIuL2RlZmF1bHRzIiwiLi9oZWxwZXJzL2JpbmQiLCIuL2hlbHBlcnMvc3ByZWFkIiwiLi91dGlscyIsIjEzIiwibWVzc2FnZSIsIl9fQ0FOQ0VMX18iLCIxNCIsImV4ZWN1dG9yIiwiVHlwZUVycm9yIiwicmVzb2x2ZVByb21pc2UiLCJ0b2tlbiIsInJlYXNvbiIsInRocm93SWZSZXF1ZXN0ZWQiLCJzb3VyY2UiLCJjIiwiLi9DYW5jZWwiLCIxNSIsIjE2IiwiaW50ZXJjZXB0b3JzIiwiSW50ZXJjZXB0b3JNYW5hZ2VyIiwiZGlzcGF0Y2hSZXF1ZXN0IiwiaXNBYnNvbHV0ZVVSTCIsImNvbWJpbmVVUkxzIiwiYmFzZVVSTCIsImNoYWluIiwiaW50ZXJjZXB0b3IiLCJ1bnNoaWZ0IiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJzaGlmdCIsIi4vLi4vZGVmYXVsdHMiLCIuLy4uL2hlbHBlcnMvY29tYmluZVVSTHMiLCIuLy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCIsIi4vSW50ZXJjZXB0b3JNYW5hZ2VyIiwiLi9kaXNwYXRjaFJlcXVlc3QiLCIxNyIsImhhbmRsZXJzIiwidXNlIiwiZWplY3QiLCJpZCIsImZuIiwiaCIsIjE4IiwiZW5oYW5jZUVycm9yIiwiLi9lbmhhbmNlRXJyb3IiLCIxOSIsInRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQiLCJ0cmFuc2Zvcm1EYXRhIiwidHJhbnNmb3JtUmVxdWVzdCIsImNvbW1vbiIsImFkYXB0ZXIiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsIi4uL2NhbmNlbC9pc0NhbmNlbCIsIi4uL2RlZmF1bHRzIiwiLi90cmFuc2Zvcm1EYXRhIiwiMjAiLCIyMSIsInZhbGlkYXRlU3RhdHVzIiwiLi9jcmVhdGVFcnJvciIsIjIyIiwiZm5zIiwiMjMiLCJzZXRDb250ZW50VHlwZUlmVW5zZXQiLCJpc1VuZGVmaW5lZCIsImdldERlZmF1bHRBZGFwdGVyIiwibm9ybWFsaXplSGVhZGVyTmFtZSIsIkRFRkFVTFRfQ09OVEVOVF9UWVBFIiwiQ29udGVudC1UeXBlIiwiaXNBcnJheUJ1ZmZlciIsImlzQnVmZmVyIiwiaXNTdHJlYW0iLCJpc0ZpbGUiLCJpc0Jsb2IiLCJpc0FycmF5QnVmZmVyVmlldyIsImJ1ZmZlciIsImlzVVJMU2VhcmNoUGFyYW1zIiwiaXNPYmplY3QiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJtYXhDb250ZW50TGVuZ3RoIiwiQWNjZXB0IiwiLi9hZGFwdGVycy9odHRwIiwiLi9hZGFwdGVycy94aHIiLCIuL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZSIsIjI0IiwidGhpc0FyZyIsImFyZ3MiLCIyNSIsIkUiLCJpbnB1dCIsImJsb2NrIiwiY2hhckNvZGUiLCJzdHIiLCJTdHJpbmciLCJvdXRwdXQiLCJpZHgiLCJjaGFycyIsImNoYXJDb2RlQXQiLCIyNiIsImVuY29kZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInNlcmlhbGl6ZWRQYXJhbXMiLCJwYXJ0cyIsInYiLCJpc0RhdGUiLCJ0b0lTT1N0cmluZyIsIjI3IiwicmVsYXRpdmVVUkwiLCIyOCIsIndyaXRlIiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJzZWN1cmUiLCJjb29raWUiLCJpc051bWJlciIsIkRhdGUiLCJ0b0dNVFN0cmluZyIsImlzU3RyaW5nIiwibWF0Y2giLCJkZWNvZGVVUklDb21wb25lbnQiLCJub3ciLCIyOSIsIjMwIiwicmVzb2x2ZVVSTCIsImhyZWYiLCJtc2llIiwidXJsUGFyc2luZ05vZGUiLCJzZXRBdHRyaWJ1dGUiLCJwcm90b2NvbCIsImhvc3QiLCJoYXNoIiwiaG9zdG5hbWUiLCJwb3J0IiwicGF0aG5hbWUiLCJvcmlnaW5VUkwiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJjcmVhdGVFbGVtZW50IiwicmVxdWVzdFVSTCIsInBhcnNlZCIsIjMxIiwibm9ybWFsaXplZE5hbWUiLCIuLi91dGlscyIsIjMyIiwibGluZSIsInRyaW0iLCJzdWJzdHIiLCIzMyIsIjM0IiwiRm9ybURhdGEiLCJyZXN1bHQiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsInBpcGUiLCJVUkxTZWFyY2hQYXJhbXMiLCJwcm9kdWN0IiwiYXNzaWduVmFsdWUiLCJpcy1idWZmZXIiLCIzNSIsImdsb2JhbCIsIkZ1c2UiLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJkZWVwVmFsdWUiLCJmaXJzdFNlZ21lbnQiLCJyZW1haW5pbmciLCJkb3RJbmRleCIsInNsaWNlIiwiQml0YXBTZWFyY2hlciIsInBhdHRlcm4iLCJjYXNlU2Vuc2l0aXZlIiwicGF0dGVybkxlbiIsIm1hdGNobWFzayIsInBhdHRlcm5BbHBoYWJldCIsIl9jYWxjdWxhdGVQYXR0ZXJuQWxwaGFiZXQiLCJpbmNsdWRlIiwic2VhcmNoRm4iLCJzb3J0Rm4iLCJzY29yZSIsImdldEZuIiwidmVyYm9zZSIsInRva2VuaXplIiwibWF0Y2hBbGxUb2tlbnMiLCJ0b2tlblNlcGFyYXRvciIsImZpbmRBbGxNYXRjaGVzIiwiVkVSU0lPTiIsInNldCIsInJlc3VsdE1hcCIsIl9rZXlNYXAiLCJfcHJlcGFyZVNlYXJjaGVycyIsIl9zdGFydFNlYXJjaCIsIl9jb21wdXRlU2NvcmUiLCJfc29ydCIsIl9mb3JtYXQiLCJ0b2tlbnMiLCJ0b2tlblNlYXJjaGVycyIsImZ1bGxTZWFjaGVyIiwid2VpZ2h0IiwiaiIsImxpc3RMZW4iLCJrZXlzTGVuIiwiX2FuYWx5emUiLCJ0ZXh0IiwiZW50aXR5IiwiaW5kZXgiLCJ3b3JkcyIsInNjb3JlcyIsImV4aXN0aW5nUmVzdWx0IiwiYXZlcmFnZVNjb3JlIiwiZmluYWxTY29yZSIsInNjb3Jlc0xlbiIsIm1haW5TZWFyY2hSZXN1bHQiLCJ0b2tlblNlYXJjaGVyIiwidGVybVNjb3JlcyIsIndvcmQiLCJ0b2tlblNlYXJjaFJlc3VsdCIsImhhc01hdGNoSW5UZXh0IiwiY2hlY2tUZXh0TWF0Y2hlcyIsImV4aXN0cyIsIm51bVRleHRNYXRjaGVzIiwiaXNNYXRjaCIsIm1hdGNoZWRJbmRpY2VzIiwidG90YWxTY29yZSIsInNjb3JlTGVuIiwiYmVzdFNjb3JlIiwiblNjb3JlIiwia2V5TWFwIiwiTWF0aCIsIm1pbiIsInJlcGxhY2VWYWx1ZSIsImdldEl0ZW1BdEluZGV4IiwiZmluYWxPdXRwdXQiLCJfaXRlbSIsIl9yZXN1bHQiLCJyZWNvcmQiLCJtYXRjaGVzIiwiaW5kaWNlcyIsIm1hc2siLCJfYml0YXBTY29yZSIsImVycm9ycyIsImFjY3VyYWN5IiwicHJveGltaXR5IiwiYWJzIiwidGV4dExlbiIsImJlc3RMb2MiLCJiaW5NaW4iLCJiaW5NaWQiLCJiaW5NYXgiLCJzdGFydCIsImZpbmlzaCIsImJpdEFyciIsImxhc3RCaXRBcnIiLCJjaGFyTWF0Y2giLCJsb2NhdGlvbnMiLCJpc01hdGNoZWQiLCJtYXRjaE1hc2siLCJtYXRjaGVzTGVuIiwibGFzdEluZGV4T2YiLCJmbG9vciIsIm1heCIsIl9nZXRNYXRjaGVkSW5kaWNlcyIsImVuZCIsImRlZmluZSIsImFtZCIsIjM2IiwiY29uc3RydWN0b3IiLCJpc1Nsb3dCdWZmZXIiLCJyZWFkRmxvYXRMRSIsIl9pc0J1ZmZlciIsIjM3IiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJydW4iLCJJdGVtIiwiYXJyYXkiLCJub29wIiwibmV4dFRpY2siLCJicm93c2VyIiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFB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Q0EsR0FBQTVMLEdBQUEsR0FBQTdULE9BQUFtRixVQUFBekosT0FBQSxFQUNBLElBQUF5SixVQUFBekosT0FBQSxFQUNBLElBQUEsR0FBQVAsR0FBQSxFQUFBQSxFQUFBZ0ssVUFBQXpKLE9BQUFQLElBQ0EwWSxFQUFBMVksRUFBQSxHQUFBZ0ssVUFBQWhLLEVBR0FnbEIsR0FBQTlaLEtBQUEsR0FBQWthLEdBQUFkLEVBQUE1TCxJQUNBLElBQUFzTSxFQUFBemtCLFFBQUF1a0IsR0FDQVQsRUFBQWEsSUFTQUUsRUFBQTNnQixVQUFBMGdCLElBQUEsV0FDQW5lLEtBQUFzZCxJQUFBclosTUFBQSxLQUFBakUsS0FBQXFlLFFBRUFqWSxFQUFBN0gsTUFBQSxVQUNBNkgsRUFBQW9ZLFNBQUEsRUFDQXBZLEVBQUFvQixPQUNBcEIsRUFBQXFZLFFBQ0FyWSxFQUFBc1ksUUFBQSxHQUNBdFksRUFBQXVZLFlBSUF2WSxFQUFBd1ksR0FBQU4sRUFDQWxZLEVBQUF5WSxZQUFBUCxFQUNBbFksRUFBQTBZLEtBQUFSLEVBQ0FsWSxFQUFBMlksSUFBQVQsRUFDQWxZLEVBQUE0WSxlQUFBVixFQUNBbFksRUFBQTZZLG1CQUFBWCxFQUNBbFksRUFBQThZLEtBQUFaLEVBQ0FsWSxFQUFBK1ksZ0JBQUFiLEVBQ0FsWSxFQUFBZ1osb0JBQUFkLEVBRUFsWSxFQUFBaVosVUFBQSxTQUFBNWdCLEdBQUEsVUFFQTJILEVBQUFrWixRQUFBLFNBQUE3Z0IsR0FDQSxLQUFBLElBQUF2RixPQUFBLHFDQUdBa04sRUFBQW1aLElBQUEsV0FBQSxNQUFBLEtBQ0FuWixFQUFBb1osTUFBQSxTQUFBQyxHQUNBLEtBQUEsSUFBQXZtQixPQUFBLG1DQUVBa04sRUFBQXNaLE1BQUEsV0FBQSxNQUFBLGNyQ3N5RlciLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuc2VhcmNoQnlOYW1lID0gc2VhcmNoQnlOYW1lO1xuZXhwb3J0cy5maW5kQXJ0aXN0c0J5TGV0dGVyID0gZmluZEFydGlzdHNCeUxldHRlcjtcblxudmFyIF9heGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XG5cbnZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXG52YXIgX2Z1c2UgPSByZXF1aXJlKCdmdXNlLmpzJyk7XG5cbnZhciBfZnVzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mdXNlKTtcblxudmFyIF9wdWJzdWIgPSByZXF1aXJlKCcuL3B1YnN1YicpO1xuXG52YXIgX3B1YnN1YjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdWJzdWIpO1xuXG52YXIgX3VuZGVyc2NvcmUgPSByZXF1aXJlKCcuL2hlbHBlcnMvdW5kZXJzY29yZScpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZnVzZSA9IHZvaWQgMDtcblxuLy8gSW5pdGlhbGl6ZSBmdXNlLmpzIG9wdGlvbnNcbnZhciBmdXNlT3B0aW9ucyA9IHtcbiAgc2hvdWxkU29ydDogdHJ1ZSxcbiAgdGhyZXNob2xkOiAwLjEsXG4gIGxvY2F0aW9uOiAwLFxuICBkaXN0YW5jZTogMTAwLFxuICBtYXhQYXR0ZXJuTGVuZ3RoOiAzMixcbiAgbWluTWF0Y2hDaGFyTGVuZ3RoOiAxLFxuICBrZXlzOiBbJ2FydGlzdCcsICd0aXRsZSddXG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82NzEyMDM0L3NvcnQtYXJyYXktYnktZmlyc3RuYW1lLWFscGhhYmV0aWNhbGx5LWluLWphdmFzY3JpcHRcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU0MjEyNTMvc29ydC1qYXZhc2NyaXB0LWFycmF5LW9mLW9iamVjdHMtYmFzZWQtb24tb25lLW9mLXRoZS1vYmplY3RzLXByb3BlcnRpZXNcbnZhciBzb3J0U29uZ3MgPSBmdW5jdGlvbiBzb3J0U29uZ3Moc29uZ0xpc3QpIHtcbiAgdmFyIHNvcnRlZCA9IHNvbmdMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgYWxjID0gYS5hcnRpc3QudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgYmxjID0gYi5hcnRpc3QudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoYWxjID4gYmxjKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGFsYyA8IGJsYykge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfSk7XG4gIHJldHVybiBzb3J0ZWQ7XG59O1xuXG5mdW5jdGlvbiBncm91cFNvbmdzKHNvbmdMaXN0KSB7XG4gIHZhciBncm91cGVkID0gKDAsIF91bmRlcnNjb3JlLmdyb3VwQnkpKHNvbmdMaXN0LCAnYXJ0aXN0Jyk7XG4gIHJldHVybiBncm91cGVkO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJCeUxldHRlcihzb25nTGlzdCwgbGV0dGVyKSB7XG4gIHZhciBmaWx0ID0gc29uZ0xpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0uYXJ0aXN0LnRvU3RyaW5nKCkuY2hhckF0KDApID09PSBsZXR0ZXI7XG4gIH0pO1xuICByZXR1cm4gZmlsdDtcbn1cblxuZnVuY3Rpb24gZmlsdGVyQnlUZXJtKHNvbmdMaXN0LCBzZWFyY2hUZXJtKSB7XG4gIGZ1c2UgPSBuZXcgX2Z1c2UyLmRlZmF1bHQoc29uZ0xpc3QsIGZ1c2VPcHRpb25zKTtcbiAgdmFyIGZ1c2VSZXN1bHRzID0gZnVzZS5zZWFyY2goc2VhcmNoVGVybSk7XG4gIHJldHVybiBmdXNlUmVzdWx0cztcbn1cblxuZnVuY3Rpb24gc2VhcmNoQnlOYW1lKHNlYXJjaFRlcm0pIHtcbiAgX3B1YnN1YjIuZGVmYXVsdC5wdWJsaXNoKCdzZWFyY2hTdGFydCcsIHsgc2VhcmNoVGVybTogc2VhcmNoVGVybSB9KTtcbiAgcmV0dXJuIF9heGlvczIuZGVmYXVsdC5nZXQoJ3NlYXJjaF9kYXRhLmpzb24nKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgcmV0dXJuIGZpbHRlckJ5VGVybShyZXN1bHRzLmRhdGEsIHNlYXJjaFRlcm0pO1xuICB9KS50aGVuKHNvcnRTb25ncykudGhlbihncm91cFNvbmdzKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRBcnRpc3RzQnlMZXR0ZXIobGV0dGVyKSB7XG4gIF9wdWJzdWIyLmRlZmF1bHQucHVibGlzaCgnc2VhcmNoU3RhcnQnLCB7IGxldHRlcjogbGV0dGVyIH0pO1xuICByZXR1cm4gX2F4aW9zMi5kZWZhdWx0LmdldCgnc2VhcmNoX2RhdGEuanNvbicpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICByZXR1cm4gZmlsdGVyQnlMZXR0ZXIocmVzdWx0cy5kYXRhLCBsZXR0ZXIpO1xuICB9KS50aGVuKHNvcnRTb25ncykudGhlbihncm91cFNvbmdzKVxuICAvLyAudGhlbihyZXN1bHRzID0+IHNvcnRTb25ncyhyZXN1bHRzLCBsZXR0ZXIpKVxuICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH0pO1xufVxuLypcbmZ1bmN0aW9uIHNlYXJjaCgpIHtcbiAgYXhpb3MuZ2V0KCdzZWFyY2hfZGF0YS5qc29uJylcbiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgbG9hZHIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICBjb25zdCBmaWx0ID0gZGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLmFydGlzdC50b1N0cmluZygpLmNoYXJBdCgwKSA9PT0gdGhpcy5kYXRhc2V0LmxldHRlcik7XG5cbiAgICBQdWJTdWIucHVibGlzaCgndXBkYXRlTGlzdCcsIHsgbGlzdDogZmlsdCB9KTtcblxuICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKGZpbHQpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gc29ydFNvbmdzKHJlc3VsdHMsIGxldHRlcikge1xuICBjb25zb2xlLmxvZygnc29ydFNvbmdzJyk7XG4gIGNvbnN0IGFsbFNvbmdzID0gcmVzdWx0cy5kYXRhO1xuICBjb25zdCBmaWx0ZXJlZFNvbmdzID0gYWxsU29uZ3MuZmlsdGVyKGl0ZW0gPT4gaXRlbS5hcnRpc3QudG9TdHJpbmcoKS5jaGFyQXQoMCkgPT09IGxldHRlcik7XG5cbiAgY29uc3Qgc29uZ2xpc3RTb3J0ZWQgPSBmaWx0ZXJlZFNvbmdzLnNvcnQoKGEsIGIpID0+IGIuYXJ0aXN0IC0gYS5hcnRpc3QpO1xuICBjb25zdCBzb25nbGlzdEdyb3VwZWQgPSBncm91cEJ5KHNvbmdsaXN0U29ydGVkLCAnYXJ0aXN0Jyk7XG5cbiAgcmV0dXJuIHNvbmdsaXN0R3JvdXBlZDtcbn1cblxuKi9cblxufSx7XCIuL2hlbHBlcnMvdW5kZXJzY29yZVwiOjUsXCIuL3B1YnN1YlwiOjcsXCJheGlvc1wiOjEwLFwiZnVzZS5qc1wiOjM1fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfZXZlbnRzID0gcmVxdWlyZSgnLi9oZWxwZXJzL2V2ZW50cycpO1xuXG52YXIgX3B1YnN1YiA9IHJlcXVpcmUoJy4vcHVic3ViJyk7XG5cbnZhciBfcHVic3ViMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1YnN1Yik7XG5cbnZhciBfYXBpID0gcmVxdWlyZSgnLi9hcGknKTtcblxudmFyIGFwaSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9hcGkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIGxldHRlck1lbnVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXotc2VhcmNoJyk7XG52YXIgc29uZ1RpdGxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqcy1zZWFyY2hfcmVzdWx0cycpO1xudmFyIGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbi11cCcpO1xudmFyIHNlbGVjdGVkQXJ0aXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzLWFydGlzdF9faW5wdXQnKTtcbnZhciBzZWxlY3RlZFNvbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanMtc29uZ19faW5wdXQnKTtcbnZhciBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzLW5hbWVfX2lucHV0Jyk7XG52YXIgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanMtcGhvbmVfX2lucHV0Jyk7XG52YXIgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmMtc2VhcmNoZm9ybV9faW5wdXRzJyk7XG52YXIgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYy1zZWFyY2hmb3JtX19pbnB1dCcpO1xuLy8gQ29kZSBmb3IgU29uZyBSZXF1ZXN0IFN1Ym1pdFxudmFyIHJlcXVlc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pzLXNvbmdwaWNrJyk7XG5cbmZ1bmN0aW9uIGdldFNvbmcoZSkge1xuICByZXR1cm4gZS50YXJnZXQ7XG59XG5cbnZhciBzZWxlY3Rpb24gPSBmdW5jdGlvbiBzZWxlY3Rpb24odGl0bGUsIGFydGlzdCwgbmFtZSwgcGhvbmUpIHtcbiAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICB0aGlzLmFydGlzdCA9IGFydGlzdDtcbiAgdGhpcy5uYW1lID0gbmFtZTtcbiAgdGhpcy5waG9uZSA9IHBob25lO1xufTtcbmZ1bmN0aW9uIGZpbGxGb3JtKG9iaikge1xuICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3UtaGlkZGVuJyk7XG4gIHNlbGVjdGVkQXJ0aXN0LnZhbHVlID0gb2JqLmFydGlzdDtcbiAgc2VsZWN0ZWRTb25nLnZhbHVlID0gb2JqLnRpdGxlO1xufVxuZnVuY3Rpb24gcmVzZXRGb3JtKGUpIHtcbiAgbmFtZS52YWx1ZSA9IFwiXCI7XG4gIHBob25lLnZhbHVlID0gXCJcIjtcbiAgZm9ybS5jbGFzc0xpc3QuYWRkKCd1LWhpZGRlbicpO1xuICBjb25zb2xlLmxvZygncmVzZXQgZm9ybScpO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhKGUpIHtcbiAgdmFyIHRpdGxlLCBhcnRpc3QsIGFydGlzdFNvbmdzO1xuICB0aXRsZSA9IGUudGFyZ2V0O1xuICBhcnRpc3RTb25ncyA9IHRpdGxlLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgYXJ0aXN0ID0gYXJ0aXN0U29uZ3MucHJldmlvdXNTaWJsaW5nO1xuICBjb25zb2xlLmxvZyh0aXRsZS50ZXh0Q29udGVudCk7XG4gIGNvbnNvbGUubG9nKGFydGlzdC50ZXh0Q29udGVudCk7XG4gIHZhciBkYXRhID0gbmV3IHNlbGVjdGlvbih0aXRsZS50ZXh0Q29udGVudCwgYXJ0aXN0LnRleHRDb250ZW50LCBuYW1lLnZhbHVlID8gbmFtZS52YWx1ZSA6IFwiXCIsIHBob25lLnZhbHVlID8gcGhvbmUudmFsdWUgOiBcIlwiKTtcbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIGZpbGxGb3JtKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBzdWJtaXRSZXF1ZXN0KGV2dCkge1xuICB2YXIgZSA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBpZiAoc2VsZWN0ZWRBcnRpc3QudmFsdWUgPT09IFwiXCIgfHwgc2VsZWN0ZWRTb25nLnZhbHVlID09PSBcIlwiKSB7XG4gICAgZm9ybS5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gXCJQbGVhc2UgZmlsbCBvdXQgYWxsIG9mIHRoZSBmaWVsZHNcIjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgbmFtZTogbmFtZS52YWx1ZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgcGhvbmU6IHBob25lLnZhbHVlLnJlcGxhY2UoLy0vZywgXCJcIiksXG4gICAgICBhcnRpc3Q6IHNlbGVjdGVkQXJ0aXN0LnZhbHVlLFxuICAgICAgc29uZzogc2VsZWN0ZWRTb25nLnZhbHVlXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2cocmVxdWVzdCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5mdW5jdGlvbiBsZXR0ZXJDbGlja0hhbmRsZXIoZXZ0KSB7XG4gIHZhciBlID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIHZhciB0aGVMZXR0ZXIgPSB0aGlzLmRhdGFzZXQubGV0dGVyO1xuXG4gIGFwaS5maW5kQXJ0aXN0c0J5TGV0dGVyKHRoZUxldHRlcikudGhlbihmdW5jdGlvbiAoc29uZ0xpc3QpIHtcbiAgICBfcHVic3ViMi5kZWZhdWx0LnB1Ymxpc2goJ3NlYXJjaENvbXBsZXRlJywgeyBzb25nTGlzdDogc29uZ0xpc3QsIHNlYXJjaFRlcm06IHRoZUxldHRlciB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRMZXR0ZXJNZW51KCkge1xuICB2YXIgbGV0dGVycyA9ICdxd2VydHl1aW9wYXNkZmdoamtsenhjdmJubSc7XG4gIHZhciB1cHBlcmNhc2VMZXR0ZXJzID0gbGV0dGVycy50b1VwcGVyQ2FzZSgpO1xuICB2YXIgbGV0dGVyTGlzdCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodXBwZXJjYXNlTGV0dGVycykpO1xuICB2YXIgc29ydGVkTGlzdCA9IGxldHRlckxpc3Quc29ydCgpO1xuICB2YXIgaHRtbExpc3QgPSBzb3J0ZWRMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgIHJldHVybiAnPGxpIGNsYXNzPVwiby1saXN0LWlubGluZV9faXRlbSBjLWF6X19pdGVtXCI+PGEgY2xhc3M9XCJjLWF6X19sZXR0ZXJcIiBkYXRhLWxldHRlcj1cIicgKyBpdGVtICsgJ1wiPicgKyBpdGVtICsgJzwvYT48L2xpPic7XG4gIH0pLmpvaW4oJycpO1xuICAvLyBjb250YWluZXIuaW5uZXJIVE1MID0gYDx1bCBjbGFzcz1cIm8tbGlzdC1pbmxpbmUgYy1helwiPiR7aHRtbExpc3R9PC91bD5gO1xuICAvLyBjb25zdCBsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGV0dGVyJyk7XG5cbiAgLy8gbGV0dGVyLmZvckVhY2gobGV0dCA9PiBsZXR0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGV0dGVyQ2xpY2tIYW5kbGVyKSk7XG4gIHJldHVybiAnPHVsIGNsYXNzPVwiby1saXN0LWlubGluZSBjLWF6XCI+JyArIGh0bWxMaXN0ICsgJzwvdWw+Jztcbn1cblxubGV0dGVyTWVudUNvbnRhaW5lci5pbm5lckhUTUwgPSBpbml0TGV0dGVyTWVudSgpO1xuKDAsIF9ldmVudHMuZGVsZWdhdGVFdmVudExpc3RlbmVyKShsZXR0ZXJNZW51Q29udGFpbmVyLCAnY2xpY2snLCAnYScsIGxldHRlckNsaWNrSGFuZGxlcik7XG4oMCwgX2V2ZW50cy5kZWxlZ2F0ZUV2ZW50TGlzdGVuZXIpKHNvbmdUaXRsZXMsICdjbGljaycsICdhJywgZ2V0RGF0YSk7XG4vLyBkZWxlZ2F0ZUV2ZW50TGlzdGVuZXIoc2VhcmNoSW5wdXQsICdmb2N1cycsICcuYy1zZWFyY2hmb3JtX19pbnB1dCcsIHJlc2V0Rm9ybSk7XG5yZXF1ZXN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRSZXF1ZXN0KTtcbnNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgcmVzZXRGb3JtKTtcblxufSx7XCIuL2FwaVwiOjEsXCIuL2hlbHBlcnMvZXZlbnRzXCI6NCxcIi4vcHVic3ViXCI6N31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5oYXNDbGFzcyA9IGhhc0NsYXNzO1xuLypcbiAqIGFkYXB0ZWQgZnJvbSBodHRwczovL2NvZGVwZW4uaW8vZGl2c3dpdGhjbGFzcy9wZW4vSm9SV2R3XG4gKiBmcm9tIGEgc2luZ2xlIGVsZW1lbnQgKGkuZS4gcXVlcnlTZWxlY3RvciBvciBnZXRFbGVtZW50QnlOYW1lKVxuICogeW91IGNhbiBhZGQsIHJlbW92ZSwgb3IgdG9nZ2xlIGEgY2xhc3NcbiAqXG4gKiBAcGFyYW0ge0RPTSBFbGVtZW50fSBlbCAtIFRoZSBlbGVtZW50IHRvIGFsdGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lIC0gdGhlIGNsYXNzIG5hbWUgdG8gYWRkLCByZW1vdmUsIHRvZ2dsZVxuICovXG5cbnZhciBhZGRDbGFzcyA9IGV4cG9ydHMuYWRkQ2xhc3MgPSBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gZWxlbWVudDtcblxuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn07XG5cbnZhciByZW1vdmVDbGFzcyA9IGV4cG9ydHMucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgdmFyIGVsID0gZWxlbWVudDtcblxuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgfVxuICByZXR1cm4gbmV3IFJlZ0V4cCgnKF58ICknICsgY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbC5jbGFzc05hbWUpO1xufVxuXG52YXIgdG9nZ2xlQ2xhc3MgPSBleHBvcnRzLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIHZhciBlbCA9IGVsZW1lbnQ7XG5cbiAgaWYgKGhhc0NsYXNzKGVsLCBjbGFzc05hbWUpKSB7XG4gICAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgYWRkQ2xhc3MoZWwsIGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cbnZhciBzZXRTdHlsZSA9IGV4cG9ydHMuc2V0U3R5bGUgPSBmdW5jdGlvbiBzZXRTdHlsZShlbGVtZW50LCBwcm9wZXJ0eU9iamVjdCkge1xuICB2YXIgc3R5bGVzID0gcHJvcGVydHlPYmplY3Q7XG5cbiAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZXMpO1xufTtcblxudmFyIGZpbmRQYXJlbnRCeVRhZ05hbWUgPSBleHBvcnRzLmZpbmRQYXJlbnRCeVRhZ05hbWUgPSBmdW5jdGlvbiBmaW5kUGFyZW50QnlUYWdOYW1lKGVsZW1lbnQsIHRhZ05hbWUpIHtcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQ7XG5cbiAgd2hpbGUgKHBhcmVudCAhPT0gbnVsbCAmJiBwYXJlbnQudGFnTmFtZSAhPT0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIHBhcmVudDtcbn07XG5cbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy50cmlnZ2VyID0gdHJpZ2dlcjtcbmV4cG9ydHMuZGVsZWdhdGVFdmVudExpc3RlbmVyID0gZGVsZWdhdGVFdmVudExpc3RlbmVyO1xuLyoqXG4gKiBDdXN0b20gamF2YXNjcmlwdCBldmVudHMgb2YgalF1ZXJ5IGZ1bmN0aW9uc1xuICovXG4vKipcbiAqIEN1c3RvbSBldmVudCBkaXNwYXRjaGVyIChtaW1pY3MganF1ZXJ5IHRyaWdnZXIpXG4gKiBAcGFyYW0gIHtlbGVtZW50fSBlbGVtZW50ICAgRWxlbWVudCB0byB0cmlnZ2VyIG9uXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGV2ZW50bmFtZSBDdXN0b20gZXZlbnQgbmFtZVxuICogQHBhcmFtICB7T2JqZWN0fSBbb2JqPXt9XSAgQ3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBhbG9uZyAoZmluZCBpbiBldmVudC5kZXRhaWwpXG4gKiBAcmV0dXJuIHtudWxsfSAgICAgICAgICAgTm8gcmV0dXJuIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRyaWdnZXIoZWxlbWVudCwgZXZlbnRuYW1lKSB7XG4gIHZhciBvYmogPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gIHZhciBldmVudCA9IHZvaWQgMDtcblxuICBpZiAod2luZG93LkN1c3RvbUV2ZW50KSB7XG4gICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnRuYW1lLCB7IGRldGFpbDogb2JqIH0pO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50bmFtZSwgdHJ1ZSwgdHJ1ZSwgb2JqKTtcbiAgfVxuXG4gIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbi8qKlxuICogRGVsZWdhdGUgZXZlbnQgbGlzdGVuZXIgdG8gY2hpbGRyZW4gKG1pbWljcyBqcXVlcnkgYmVoYXZpb3IpXG4gKiAoc291cmNlOiBodHRwOi8vYmRhZGFtLmNvbS9ibG9nL3BsYWluLWphdmFzY3JpcHQtZXZlbnQtZGVsZWdhdGlvbi5odG1sKVxuICogQHBhcmFtICB7ZWxlbWVudH0gZWxlbWVudCAgRE9NIHBhcmVudCBlbGVtZW50XG4gKiBAcGFyYW0gIHtzdHJpbmd9IGV2dCAgICAgIEV2ZW50IHRvIGxpc3RlbiB0b1xuICogQHBhcmFtICB7c3RyaW5nfSBzZWxlY3RvciBTZWxlY3RvciB0byBtYXRjaCBjaGlsZHJlbiBieVxuICogQHBhcmFtICB7ZnVuY3Rpb259IGhhbmRsZXIgIEZ1bmN0aW9uIHRvIHJ1biBhcyBldmVudCBoYW5kbGVyXG4gKiBAcmV0dXJuIHtudWxsfSAgICAgICAgICBObyBSZXR1cm5cbiAqL1xuZnVuY3Rpb24gZGVsZWdhdGVFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2dCwgc2VsZWN0b3IsIGhhbmRsZXIpIHtcbiAgdmFyIGVsID0gZWxlbWVudDtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldnQsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBwb3NzaWJsZVRhcmdldHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwb3NzaWJsZVRhcmdldHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdCA9IHRhcmdldDtcbiAgICAgIHZhciBwID0gcG9zc2libGVUYXJnZXRzW2ldO1xuXG4gICAgICB3aGlsZSAodCAmJiB0ICE9PSBlbGVtZW50KSB7XG4gICAgICAgIGlmICh0ID09PSBwKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbChwLCBldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICB0ID0gdC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuICAvKiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmdW5jdGlvbiBjYWxsYmFjayhldmVudCkge1xuICAgIGNvbnN0IGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgIGxldCB0ID0gZS50YXJnZXQ7XG4gICAgIHdoaWxlICh0ICYmIHQgIT09IHRoaXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKGB3aGlsZSB0OiAke3R9YCk7XG4gICAgICBpZiAodC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhgbWF0Y2ggdDogJHt0fWApO1xuICAgICAgICBoYW5kbGVyLmNhbGwodCwgZXZlbnQpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYG91dHNpZGUgdDogJHt0fWApO1xuICAgICAgdCA9IHQucGFyZW50Tm9kZTtcbiAgICB9XG4gIH0pO1xuICAqL1xufVxuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qXG4gKiBHcm91cEJ5IGZyb20gaHR0cDovL3d3dy5kYXRjaGxleS5uYW1lL2dldHRpbmctZnVuY3Rpb25hbC13aXRoLWphdmFzY3JpcHQtcGFydC0yL1xuICovXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzRnVuY3Rpb24obykge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn07XG5cbi8qIGVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogW1wiZXJyb3JcIiwgeyBcInByb3BzXCI6IGZhbHNlIH1dKi9cbnZhciBncm91cEJ5ID0gZXhwb3J0cy5ncm91cEJ5ID0gZnVuY3Rpb24gZ3JvdXBCeShsaXN0LCBwcm9wKSB7XG4gIHJldHVybiBsaXN0LnJlZHVjZShmdW5jdGlvbiAoZ3JvdXBlZCwgaXRlbSkge1xuICAgIHZhciBrZXkgPSBpc0Z1bmN0aW9uKHByb3ApID8gcHJvcC5hcHBseSh1bmRlZmluZWQsIFtpdGVtXSkgOiBpdGVtW3Byb3BdO1xuICAgIGdyb3VwZWRba2V5XSA9IGdyb3VwZWRba2V5XSB8fCBbXTtcbiAgICBncm91cGVkW2tleV0ucHVzaChpdGVtKTtcbiAgICByZXR1cm4gZ3JvdXBlZDtcbiAgfSwge30pO1xufTtcblxufSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vYXotc2VhcmNoJyk7XG5cbnJlcXVpcmUoJy4vc2VhcmNoJyk7XG5cbnJlcXVpcmUoJy4vcmVzdWx0cycpO1xuXG59LHtcIi4vYXotc2VhcmNoXCI6MixcIi4vcmVzdWx0c1wiOjgsXCIuL3NlYXJjaFwiOjl9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIHB1YnN1YiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRvcGljcyA9IHt9O1xuXG4gIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRvcGljc1tldmVudE5hbWVdID0gdG9waWNzW2V2ZW50TmFtZV0gfHwgW107XG4gICAgdG9waWNzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XG4gIH07XG5cbiAgdmFyIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIGlmICh0b3BpY3NbZXZlbnROYW1lXSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRvcGljc1tldmVudE5hbWVdLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICh0b3BpY3NbZXZlbnROYW1lXVtpXSA9PT0gY2FsbGJhY2spIHtcbiAgICAgICAgICB0b3BpY3NbZXZlbnROYW1lXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHB1Ymxpc2ggPSBmdW5jdGlvbiBwdWJsaXNoKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIGlmICh0b3BpY3NbZXZlbnROYW1lXSkge1xuICAgICAgdG9waWNzW2V2ZW50TmFtZV0uZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmUsXG4gICAgcHVibGlzaDogcHVibGlzaFxuICB9O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBwdWJzdWI7XG5cbn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2RvbUVsZW1lbnRzID0gcmVxdWlyZSgnLi9oZWxwZXJzL2RvbS1lbGVtZW50cycpO1xuXG52YXIgX3B1YnN1YiA9IHJlcXVpcmUoJy4vcHVic3ViJyk7XG5cbnZhciBfcHVic3ViMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1YnN1Yik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBwbGFjZWhvbGRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1zZWFyY2hfcmVzdWx0cycpO1xudmFyIGxvYWRyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRlcicpO1xuXG5mdW5jdGlvbiBjbGVhclJlc3VsdHMoKSB7XG4gIHBsYWNlaG9sZGVyLmlubmVySFRNTCA9ICcnO1xuICAoMCwgX2RvbUVsZW1lbnRzLnJlbW92ZUNsYXNzKShsb2FkciwgJ3UtaGlkZGVuJyk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlcihwdWJvYmopIHtcbiAgdmFyIHNvbmdMaXN0ID0gcHVib2JqLnNvbmdMaXN0O1xuICB2YXIgc2VhcmNoVGVybSA9IHB1Ym9iai5zZWFyY2hUZXJtO1xuXG4gIHZhciBodG1sU3R1ZmYgPSAnJztcbiAgaHRtbFN0dWZmID0gJzxoMiBjbGFzcz1cImMtc2VhcmNoX19oZWFkaW5nXCI+U2VhcmNoIFJlc3VsdHM6IDxzcGFuIGMtc2VhcmNoX190ZXJtPicgKyBzZWFyY2hUZXJtICsgJzwvc3Bhbj48L2gyPjxzZWN0aW9uIGNsYXNzPVwiYy1zZWFyY2hfX2xpc3RcIj4nO1xuICBPYmplY3Qua2V5cyhzb25nTGlzdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaHRtbFN0dWZmICs9ICc8cCBjbGFzcz1cImMtc2VhcmNoX19hcnRpc3RcIj4nICsga2V5ICsgJzwvcD48dWw+JztcbiAgICBzb25nTGlzdFtrZXldLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBodG1sU3R1ZmYgKz0gJzxsaSBjbGFzcz1cImMtc2VhcmNoX190aXRsZVwiPjxhIGhyZWY9XCIjc2lnbi11cFwiPicgKyB2YWx1ZS50aXRsZSArICc8L2E+PC9saT4nO1xuICAgIH0pO1xuICAgIGh0bWxTdHVmZiArPSAnPC91bD4nO1xuICB9KTtcbiAgaHRtbFN0dWZmICs9ICc8L3NlY3Rpb24+JztcbiAgKDAsIF9kb21FbGVtZW50cy5hZGRDbGFzcykobG9hZHIsICd1LWhpZGRlbicpO1xuICBwbGFjZWhvbGRlci5pbm5lckhUTUwgPSBodG1sU3R1ZmY7XG59XG5cbl9wdWJzdWIyLmRlZmF1bHQuc3Vic2NyaWJlKCdzZWFyY2hTdGFydCcsIGNsZWFyUmVzdWx0cyk7XG5fcHVic3ViMi5kZWZhdWx0LnN1YnNjcmliZSgnc2VhcmNoQ29tcGxldGUnLCByZW5kZXIpO1xuXG59LHtcIi4vaGVscGVycy9kb20tZWxlbWVudHNcIjozLFwiLi9wdWJzdWJcIjo3fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfcHVic3ViID0gcmVxdWlyZSgnLi9wdWJzdWInKTtcblxudmFyIF9wdWJzdWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHVic3ViKTtcblxudmFyIF9hcGkgPSByZXF1aXJlKCcuL2FwaScpO1xuXG52YXIgYXBpID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2FwaSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBzZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pzLXNvbmdzZWFyY2gnKTtcbnZhciBzZWFyY2hJbnB1dCA9IHNlYXJjaEZvcm0ucXVlcnlTZWxlY3RvcignI2pzLXNvbmdzZWFyY2hfX2lucHV0Jyk7XG5cbmZ1bmN0aW9uIGNsZWFyU2VhcmNoKCkge1xuICBzZWFyY2hJbnB1dC52YWx1ZSA9ICcnO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hIYW5kbGVyKGV2dCkge1xuICB2YXIgZSA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICB2YXIgc2VhcmNoVGVybSA9IHNlYXJjaElucHV0LnZhbHVlO1xuICBpZiAoc2VhcmNoVGVybSAhPT0gJycpIHtcbiAgICBhcGkuc2VhcmNoQnlOYW1lKHNlYXJjaFRlcm0pLnRoZW4oZnVuY3Rpb24gKHNvbmdMaXN0KSB7XG4gICAgICBfcHVic3ViMi5kZWZhdWx0LnB1Ymxpc2goJ3NlYXJjaENvbXBsZXRlJywgeyBzb25nTGlzdDogc29uZ0xpc3QsIHNlYXJjaFRlcm06IHNlYXJjaFRlcm0gfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25TZWFyY2hTdGFydChwcykge1xuICB2YXIgcHVic3ViT2JqZWN0ID0gcHM7XG5cbiAgaWYgKHB1YnN1Yk9iamVjdC5sZXR0ZXIpIHtcbiAgICBjbGVhclNlYXJjaCgpO1xuICB9XG59XG5cbnNlYXJjaEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc2VhcmNoSGFuZGxlcik7XG5fcHVic3ViMi5kZWZhdWx0LnN1YnNjcmliZSgnc2VhcmNoU3RhcnQnLCBvblNlYXJjaFN0YXJ0KTtcblxuLypcblxuXG5mdW5jdGlvbiBzdWNjZXNzSGFuZGxlcihkYXRhKSB7XG4gIGNvbnN0IGkgPSBfKGRhdGEpLnRvQXJyYXkoKTtcblxuICBmdXNlID0gbmV3IEZ1c2VqcyhpLCBvcHRpb25zKTsgLy8gXCJsaXN0XCIgaXMgdGhlIGl0ZW0gYXJyYXlcbn1cblxuLy8gR2V0IHRoZSBnZW5lcmF0ZWQgc2VhcmNoX2RhdGEuanNvbiBmaWxlIHNvIGx1bnIuanMgY2FuIHNlYXJjaCBpdCBsb2NhbGx5LlxuY29uc3Qgc2VhcmNoRGF0YSA9ICQuYWpheCh7XG4gIHVybDogJy4vc2VhcmNoX2RhdGEuanNvbicsXG4gIHR5cGU6ICdHRVQnLCAvLyBkZWZhdWx0IGlzIEdFVCBidXQgeW91IGNhbiB1c2Ugb3RoZXIgdmVyYnMgYmFzZWQgb24geW91ciBuZWVkcy5cbiAgZGF0YVR5cGU6ICdqc29uJywgLy8gc3BlY2lmeSB0aGUgZGF0YVR5cGUgZm9yIGZ1dHVyZSByZWZlcmVuY2Vcbn0pO1xuc2VhcmNoRGF0YS5kb25lKHN1Y2Nlc3NIYW5kbGVyKTtcblxuZnVuY3Rpb24gZGlzcGxheVNlYXJjaFJlc3VsdHMocmVzdWx0cykge1xuICBjb25zb2xlLmxvZygnc3VjY2VzcycpO1xuICBjb25zb2xlLmxvZyhyZXN1bHRzKTtcblxuICBjb25zdCAkcGxhY2Vob2xkZXIgPSAkKCcjanMtc2VhcmNoX3Jlc3VsdHMnKTtcbiAgY29uc3QgdGVzdHMgPSBfLnNvcnRCeShyZXN1bHRzLCAnYXJ0aXN0Jyk7XG4gIGNvbnN0IHRlc3RnID0gXy5ncm91cEJ5KHRlc3RzLCAnYXJ0aXN0Jyk7XG4gIGxldCBodG1sU3R1ZmYgPSAnJztcbiAgaHRtbFN0dWZmID0gJzxoMiBjbGFzcz1cImMtc2VhcmNoX19oZWFkaW5nXCI+U2VhcmNoIFJlc3VsdHM8L2gyPjxzZWN0aW9uIGNsYXNzPVwiYy1zZWFyY2hfX2xpc3RcIj4nO1xuICAkLmVhY2godGVzdGcsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgY29uc29sZS5sb2coYCR7a2V5fTogYCk7XG4gICAgY29uc29sZS5sb2coYHZhbHVlID0gJHt2YWx1ZX1gKTtcbiAgICBodG1sU3R1ZmYgKz0gYDxwIGNsYXNzPVwiYy1zZWFyY2hfX2FydGlzdFwiPiR7a2V5fTwvcD48dWw+YDtcbiAgICBjb25zdCB2YWwgPSBfLnNvcnRCeSh2YWx1ZSwgJ3RpdGxlJyk7XG4gICAgJC5lYWNoKHZhbCwgKGssIHYpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2t9Ojo6JHt2LnRpdGxlfWApO1xuXG4gICAgICBodG1sU3R1ZmYgKz0gYDxsaSBjbGFzcz1cImMtc2VhcmNoX190aXRsZVwiPiR7di50aXRsZX08L2xpPmA7XG4gICAgfSk7XG4gICAgaHRtbFN0dWZmICs9ICc8L3VsPic7XG4gIH0pO1xuICBodG1sU3R1ZmYgKz0gJzwvc2VjdGlvbj4nO1xuICAkcGxhY2Vob2xkZXIuZW1wdHkoKS5hcHBlbmQoaHRtbFN0dWZmKTtcbn1cblxuJCgoKSA9PiB7XG4gIC8vIEV2ZW50IHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICQoJyNqcy1zb25nc2VhcmNoJykuc3VibWl0KChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgJHF1ZXJ5ID0gJCgnI2pzLXNvbmdzZWFyY2hfaW5wdXQnKS52YWwoKTsgLy8gR2V0IHRoZSB2YWx1ZSBmb3IgdGhlIHRleHQgZmllbGRcbiAgICBjb25zdCBmdXNlUmVzdWx0cyA9IGZ1c2Uuc2VhcmNoKCRxdWVyeSk7IC8vIEdldCBmdXNlLmpzIHRvIHBlcmZvcm0gYSBzZWFyY2hcblxuICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKGZ1c2VSZXN1bHRzKTsgLy8gSGFuZCB0aGUgcmVzdWx0cyBvZmYgdG8gYmUgZGlzcGxheWVkXG4gIH0pO1xufSk7XG4qL1xuXG59LHtcIi4vYXBpXCI6MSxcIi4vcHVic3ViXCI6N31dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvYXhpb3MnKTtcbn0se1wiLi9saWIvYXhpb3NcIjoxMn1dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzJyk7XG52YXIgaXNVUkxTYW1lT3JpZ2luID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO1xudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9jcmVhdGVFcnJvcicpO1xudmFyIGJ0b2EgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmJ0b2EgJiYgd2luZG93LmJ0b2EuYmluZCh3aW5kb3cpKSB8fCByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnRvYScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBsb2FkRXZlbnQgPSAnb25yZWFkeXN0YXRlY2hhbmdlJztcbiAgICB2YXIgeERvbWFpbiA9IGZhbHNlO1xuXG4gICAgLy8gRm9yIElFIDgvOSBDT1JTIHN1cHBvcnRcbiAgICAvLyBPbmx5IHN1cHBvcnRzIFBPU1QgYW5kIEdFVCBjYWxscyBhbmQgZG9lc24ndCByZXR1cm5zIHRoZSByZXNwb25zZSBoZWFkZXJzLlxuICAgIC8vIERPTidUIGRvIHRoaXMgZm9yIHRlc3RpbmcgYi9jIFhNTEh0dHBSZXF1ZXN0IGlzIG1vY2tlZCwgbm90IFhEb21haW5SZXF1ZXN0LlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5YRG9tYWluUmVxdWVzdCAmJiAhKCd3aXRoQ3JlZGVudGlhbHMnIGluIHJlcXVlc3QpICYmXG4gICAgICAgICFpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpIHtcbiAgICAgIHJlcXVlc3QgPSBuZXcgd2luZG93LlhEb21haW5SZXF1ZXN0KCk7XG4gICAgICBsb2FkRXZlbnQgPSAnb25sb2FkJztcbiAgICAgIHhEb21haW4gPSB0cnVlO1xuICAgICAgcmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24gaGFuZGxlUHJvZ3Jlc3MoKSB7fTtcbiAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHt9O1xuICAgIH1cblxuICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICBpZiAoY29uZmlnLmF1dGgpIHtcbiAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuXG4gICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZVxuICAgIHJlcXVlc3RbbG9hZEV2ZW50XSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QgfHwgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCAmJiAheERvbWFpbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkXG4gICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoJ2ZpbGU6JykgPT09IDApKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcbiAgICAgIHZhciByZXNwb25zZURhdGEgPSAhY29uZmlnLnJlc3BvbnNlVHlwZSB8fCBjb25maWcucmVzcG9uc2VUeXBlID09PSAndGV4dCcgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgLy8gSUUgc2VuZHMgMTIyMyBpbnN0ZWFkIG9mIDIwNCAoaHR0cHM6Ly9naXRodWIuY29tL216YWJyaXNraWUvYXhpb3MvaXNzdWVzLzIwMSlcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xuXG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG4gICAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLndpdGhDcmVkZW50aWFscykge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBFeHBlY3RlZCBET01FeGNlcHRpb24gdGhyb3duIGJ5IGJyb3dzZXJzIG5vdCBjb21wYXRpYmxlIFhNTEh0dHBSZXF1ZXN0IExldmVsIDIuXG4gICAgICAgIC8vIEJ1dCwgdGhpcyBjYW4gYmUgc3VwcHJlc3NlZCBmb3IgJ2pzb24nIHR5cGUgYXMgaXQgY2FuIGJlIHBhcnNlZCBieSBkZWZhdWx0ICd0cmFuc2Zvcm1SZXNwb25zZScgZnVuY3Rpb24uXG4gICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkge1xuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnByb21pc2UudGhlbihmdW5jdGlvbiBvbkNhbmNlbGVkKGNhbmNlbCkge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIHJlamVjdChjYW5jZWwpO1xuICAgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlcXVlc3REYXRhID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTZW5kIHRoZSByZXF1ZXN0XG4gICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTtcbiAgfSk7XG59O1xuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuLi9jb3JlL2NyZWF0ZUVycm9yXCI6MTgsXCIuLy4uL2NvcmUvc2V0dGxlXCI6MjEsXCIuLy4uL2hlbHBlcnMvYnRvYVwiOjI1LFwiLi8uLi9oZWxwZXJzL2J1aWxkVVJMXCI6MjYsXCIuLy4uL2hlbHBlcnMvY29va2llc1wiOjI4LFwiLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpblwiOjMwLFwiLi8uLi9oZWxwZXJzL3BhcnNlSGVhZGVyc1wiOjMyLFwiLi8uLi91dGlsc1wiOjM0LFwiX3Byb2Nlc3NcIjozN31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIEF4aW9zID0gcmVxdWlyZSgnLi9jb3JlL0F4aW9zJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG4gIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG5heGlvcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKHV0aWxzLm1lcmdlKGRlZmF1bHRzLCBpbnN0YW5jZUNvbmZpZykpO1xufTtcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWwnKTtcbmF4aW9zLkNhbmNlbFRva2VuID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtcbmF4aW9zLmlzQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvaXNDYW5jZWwnKTtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcbmF4aW9zLnNwcmVhZCA9IHJlcXVpcmUoJy4vaGVscGVycy9zcHJlYWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblxuLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG5cbn0se1wiLi9jYW5jZWwvQ2FuY2VsXCI6MTMsXCIuL2NhbmNlbC9DYW5jZWxUb2tlblwiOjE0LFwiLi9jYW5jZWwvaXNDYW5jZWxcIjoxNSxcIi4vY29yZS9BeGlvc1wiOjE2LFwiLi9kZWZhdWx0c1wiOjIzLFwiLi9oZWxwZXJzL2JpbmRcIjoyNCxcIi4vaGVscGVycy9zcHJlYWRcIjozMyxcIi4vdXRpbHNcIjozNH1dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2UpIHtcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbn1cblxuQ2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gJ0NhbmNlbCcgKyAodGhpcy5tZXNzYWdlID8gJzogJyArIHRoaXMubWVzc2FnZSA6ICcnKTtcbn07XG5cbkNhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXyA9IHRydWU7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsO1xuXG59LHt9XSwxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICB2YXIgdG9rZW4gPSB0aGlzO1xuICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuXG59LHtcIi4vQ2FuY2VsXCI6MTN9XSwxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufTtcblxufSx7fV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLy4uL2RlZmF1bHRzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gcmVxdWlyZSgnLi9JbnRlcmNlcHRvck1hbmFnZXInKTtcbnZhciBkaXNwYXRjaFJlcXVlc3QgPSByZXF1aXJlKCcuL2Rpc3BhdGNoUmVxdWVzdCcpO1xudmFyIGlzQWJzb2x1dGVVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCcpO1xudmFyIGNvbWJpbmVVUkxzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSB1dGlscy5tZXJnZSh7XG4gICAgICB1cmw6IGFyZ3VtZW50c1swXVxuICAgIH0sIGFyZ3VtZW50c1sxXSk7XG4gIH1cblxuICBjb25maWcgPSB1dGlscy5tZXJnZShkZWZhdWx0cywgdGhpcy5kZWZhdWx0cywgeyBtZXRob2Q6ICdnZXQnIH0sIGNvbmZpZyk7XG4gIGNvbmZpZy5tZXRob2QgPSBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gU3VwcG9ydCBiYXNlVVJMIGNvbmZpZ1xuICBpZiAoY29uZmlnLmJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkpIHtcbiAgICBjb25maWcudXJsID0gY29tYmluZVVSTHMoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICB9XG5cbiAgLy8gSG9vayB1cCBpbnRlcmNlcHRvcnMgbWlkZGxld2FyZVxuICB2YXIgY2hhaW4gPSBbZGlzcGF0Y2hSZXF1ZXN0LCB1bmRlZmluZWRdO1xuICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2hhaW4uc2hpZnQoKSwgY2hhaW4uc2hpZnQoKSk7XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZTtcbn07XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybFxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG5cbn0se1wiLi8uLi9kZWZhdWx0c1wiOjIzLFwiLi8uLi9oZWxwZXJzL2NvbWJpbmVVUkxzXCI6MjcsXCIuLy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTFwiOjI5LFwiLi8uLi91dGlsc1wiOjM0LFwiLi9JbnRlcmNlcHRvck1hbmFnZXJcIjoxNyxcIi4vZGlzcGF0Y2hSZXF1ZXN0XCI6MTl9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuXG59LHtcIi4vLi4vdXRpbHNcIjozNH1dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG5cbn0se1wiLi9lbmhhbmNlRXJyb3JcIjoyMH1dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5mdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykge1xuICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7XG4gIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgIGNvbmZpZy5kYXRhLFxuICAgIGNvbmZpZy5oZWFkZXJzLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG4gICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzIHx8IHt9XG4gICk7XG5cbiAgdXRpbHMuZm9yRWFjaChcbiAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHtcbiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuICAgIH1cbiAgKTtcblxuICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cbiAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcbiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgcmVzcG9uc2UuZGF0YSxcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufTtcblxufSx7XCIuLi9jYW5jZWwvaXNDYW5jZWxcIjoxNSxcIi4uL2RlZmF1bHRzXCI6MjMsXCIuLy4uL3V0aWxzXCI6MzQsXCIuL3RyYW5zZm9ybURhdGFcIjoyMn1dLDIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVcGRhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICBlcnJvci5jb25maWcgPSBjb25maWc7XG4gIGlmIChjb2RlKSB7XG4gICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gIH1cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIHJldHVybiBlcnJvcjtcbn07XG5cbn0se31dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpO1xuXG4vKipcbiAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgLy8gTm90ZTogc3RhdHVzIGlzIG5vdCBleHBvc2VkIGJ5IFhEb21haW5SZXF1ZXN0XG4gIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLmNvbmZpZyxcbiAgICAgIG51bGwsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcblxufSx7XCIuL2NyZWF0ZUVycm9yXCI6MTh9XSwyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG5cbn0se1wiLi8uLi91dGlsc1wiOjM0fV0sMjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSByZXF1aXJlKCcuL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZScpO1xuXG52YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7XG4gIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHtcbiAgdmFyIGFkYXB0ZXI7XG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL3hocicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy9odHRwJyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH1cbn07XG5cbmRlZmF1bHRzLmhlYWRlcnMgPSB7XG4gIGNvbW1vbjoge1xuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSlcblxufSx7XCIuL2FkYXB0ZXJzL2h0dHBcIjoxMSxcIi4vYWRhcHRlcnMveGhyXCI6MTEsXCIuL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZVwiOjMxLFwiLi91dGlsc1wiOjM0LFwiX3Byb2Nlc3NcIjozN31dLDI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcblxufSx7fV0sMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblxudmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuZnVuY3Rpb24gRSgpIHtcbiAgdGhpcy5tZXNzYWdlID0gJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3Rlcic7XG59XG5FLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcbkUucHJvdG90eXBlLmNvZGUgPSA1O1xuRS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5mdW5jdGlvbiBidG9hKGlucHV0KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuICB2YXIgb3V0cHV0ID0gJyc7XG4gIGZvciAoXG4gICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcbiAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcbiAgICAvLyBpZiB0aGUgbmV4dCBzdHIgaW5kZXggZG9lcyBub3QgZXhpc3Q6XG4gICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcbiAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG4gICAgc3RyLmNoYXJBdChpZHggfCAwKSB8fCAobWFwID0gJz0nLCBpZHggJSAxKTtcbiAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuICApIHtcbiAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG4gICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEUoKTtcbiAgICB9XG4gICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuXG59LHt9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cbn0se1wiLi8uLi91dGlsc1wiOjM0fV0sMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlxcLysvLCAnJylcbiAgICA6IGJhc2VVUkw7XG59O1xuXG59LHt9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiB7XG4gICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7XG4gICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xcXFxzKikoJyArIG5hbWUgKyAnKT0oW147XSopJykpO1xuICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgfVxuICAgIH07XG4gIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9KSgpXG4pO1xuXG59LHtcIi4vLi4vdXRpbHNcIjozNH1dLDI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuXG59LHt9XSwzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgfVxuXG4gICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KSgpXG4pO1xuXG59LHtcIi4vLi4vdXRpbHNcIjozNH1dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcblxufSx7XCIuLi91dGlsc1wiOjM0fV0sMzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG59LHtcIi4vLi4vdXRpbHNcIjozNH1dLDMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufTtcblxufSx7fV0sMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgaXNCdWZmZXIgPSByZXF1aXJlKCdpcy1idWZmZXInKTtcblxuLypnbG9iYWwgdG9TdHJpbmc6dHJ1ZSovXG5cbi8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWwpIHtcbiAgcmV0dXJuICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnKSAmJiAodmFsIGluc3RhbmNlb2YgRm9ybURhdGEpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmICh2YWwuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNEYXRlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGaWxlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCbG9iXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCbG9iKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBCbG9iXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7XG4gIHJldHVybiB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXM7XG59XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKS5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuICpcbiAqIHdlYiB3b3JrZXJzOlxuICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG4gKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZFxuICpcbiAqIHJlYWN0LW5hdGl2ZTpcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnXG4gKi9cbmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICovXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcbiAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICFpc0FycmF5KG9iaikpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovXG5mdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSB2YWw7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltXG59O1xuXG59LHtcIi4vaGVscGVycy9iaW5kXCI6MjQsXCJpcy1idWZmZXJcIjozNn1dLDM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIEZ1c2UgLSBMaWdodHdlaWdodCBmdXp6eS1zZWFyY2hcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxNiBLaXJvbGxvcyBSaXNrIDxraXJvbGxvc0BnbWFpbC5jb20+LlxuICogQWxsIFJpZ2h0cyBSZXNlcnZlZC4gQXBhY2hlIFNvZnR3YXJlIExpY2Vuc2UgMi4wXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKVxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuOyhmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIC8qKiBAdHlwZSB7ZnVuY3Rpb24oLi4uKil9ICovXG4gIGZ1bmN0aW9uIGxvZyAoKSB7XG4gICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKVxuICB9XG5cbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBpZGVudGlmaWVyIHByb3BlcnR5LiBJZiBzcGVjaWZpZWQsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBiZSBhIGxpc3RcbiAgICAvLyBvZiB0aGUgaXRlbXMnIGRlbnRpZmllcnMsIG90aGVyd2lzZSBpdCB3aWxsIGJlIGEgbGlzdCBvZiB0aGUgaXRlbXMuXG4gICAgaWQ6IG51bGwsXG5cbiAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBjb21wYXJpc29ucyBzaG91bGQgYmUgY2FzZSBzZW5zaXRpdmUuXG5cbiAgICBjYXNlU2Vuc2l0aXZlOiBmYWxzZSxcblxuICAgIC8vIEFuIGFycmF5IG9mIHZhbHVlcyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBmcm9tIHRoZSBzZWFyY2hlcidzIG91dHB1dC4gV2hlbiB0aGlzIGFycmF5XG4gICAgLy8gY29udGFpbnMgZWxlbWVudHMsIGVhY2ggcmVzdWx0IGluIHRoZSBsaXN0IHdpbGwgYmUgb2YgdGhlIGZvcm0gYHsgaXRlbTogLi4uLCBpbmNsdWRlMTogLi4uLCBpbmNsdWRlMjogLi4uIH1gLlxuICAgIC8vIFZhbHVlcyB5b3UgY2FuIGluY2x1ZGUgYXJlIGBzY29yZWAsIGBtYXRjaGVkTG9jYXRpb25zYFxuICAgIGluY2x1ZGU6IFtdLFxuXG4gICAgLy8gV2hldGhlciB0byBzb3J0IHRoZSByZXN1bHQgbGlzdCwgYnkgc2NvcmVcbiAgICBzaG91bGRTb3J0OiB0cnVlLFxuXG4gICAgLy8gVGhlIHNlYXJjaCBmdW5jdGlvbiB0byB1c2VcbiAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgc2VhcmNoIGZ1bmN0aW9uIChbW0Z1bmN0aW9uXV0pIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIEFQSTpcbiAgICAvL1xuICAgIC8vICBAcGFyYW0gcGF0dGVybiBUaGUgcGF0dGVybiBzdHJpbmcgdG8gc2VhcmNoXG4gICAgLy8gIEBwYXJhbSBvcHRpb25zIFRoZSBzZWFyY2ggb3B0aW9uXG4gICAgLy8gIFtbRnVuY3Rpb25dXS5jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKHBhdHRlcm4sIG9wdGlvbnMpXG4gICAgLy9cbiAgICAvLyAgQHBhcmFtIHRleHQ6IHRoZSBzdHJpbmcgdG8gc2VhcmNoIGluIGZvciB0aGUgcGF0dGVyblxuICAgIC8vICBAcmV0dXJuIE9iamVjdCBpbiB0aGUgZm9ybSBvZjpcbiAgICAvLyAgICAtIGlzTWF0Y2g6IGJvb2xlYW5cbiAgICAvLyAgICAtIHNjb3JlOiBJbnRcbiAgICAvLyAgW1tGdW5jdGlvbl1dLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbih0ZXh0KVxuICAgIHNlYXJjaEZuOiBCaXRhcFNlYXJjaGVyLFxuXG4gICAgLy8gRGVmYXVsdCBzb3J0IGZ1bmN0aW9uXG4gICAgc29ydEZuOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEuc2NvcmUgLSBiLnNjb3JlXG4gICAgfSxcblxuICAgIC8vIFRoZSBnZXQgZnVuY3Rpb24gdG8gdXNlIHdoZW4gZmV0Y2hpbmcgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgICAvLyBUaGUgZGVmYXVsdCB3aWxsIHNlYXJjaCBuZXN0ZWQgcGF0aHMgKmllIGZvby5iYXIuYmF6KlxuICAgIGdldEZuOiBkZWVwVmFsdWUsXG5cbiAgICAvLyBMaXN0IG9mIHByb3BlcnRpZXMgdGhhdCB3aWxsIGJlIHNlYXJjaGVkLiBUaGlzIGFsc28gc3VwcG9ydHMgbmVzdGVkIHByb3BlcnRpZXMuXG4gICAga2V5czogW10sXG5cbiAgICAvLyBXaWxsIHByaW50IHRvIHRoZSBjb25zb2xlLiBVc2VmdWwgZm9yIGRlYnVnZ2luZy5cbiAgICB2ZXJib3NlOiBmYWxzZSxcblxuICAgIC8vIFdoZW4gdHJ1ZSwgdGhlIHNlYXJjaCBhbGdvcml0aG0gd2lsbCBzZWFyY2ggaW5kaXZpZHVhbCB3b3JkcyAqKmFuZCoqIHRoZSBmdWxsIHN0cmluZyxcbiAgICAvLyBjb21wdXRpbmcgdGhlIGZpbmFsIHNjb3JlIGFzIGEgZnVuY3Rpb24gb2YgYm90aC4gTm90ZSB0aGF0IHdoZW4gYHRva2VuaXplYCBpcyBgdHJ1ZWAsXG4gICAgLy8gdGhlIGB0aHJlc2hvbGRgLCBgZGlzdGFuY2VgLCBhbmQgYGxvY2F0aW9uYCBhcmUgaW5jb25zZXF1ZW50aWFsIGZvciBpbmRpdmlkdWFsIHRva2Vucy5cbiAgICB0b2tlbml6ZTogZmFsc2UsXG5cbiAgICAvLyBXaGVuIHRydWUsIHRoZSByZXN1bHQgc2V0IHdpbGwgb25seSBpbmNsdWRlIHJlY29yZHMgdGhhdCBtYXRjaCBhbGwgdG9rZW5zLiBXaWxsIG9ubHkgd29ya1xuICAgIC8vIGlmIGB0b2tlbml6ZWAgaXMgYWxzbyB0cnVlLlxuICAgIG1hdGNoQWxsVG9rZW5zOiBmYWxzZSxcblxuICAgIC8vIFJlZ2V4IHVzZWQgdG8gc2VwYXJhdGUgd29yZHMgd2hlbiBzZWFyY2hpbmcuIE9ubHkgYXBwbGljYWJsZSB3aGVuIGB0b2tlbml6ZWAgaXMgYHRydWVgLlxuICAgIHRva2VuU2VwYXJhdG9yOiAvICsvZyxcblxuICAgIC8vIE1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCBtdXN0IGJlIG1hdGNoZWQgYmVmb3JlIGEgcmVzdWx0IGlzIGNvbnNpZGVyZWQgYSBtYXRjaFxuICAgIG1pbk1hdGNoQ2hhckxlbmd0aDogMSxcblxuICAgIC8vIFdoZW4gdHJ1ZSwgdGhlIGFsZ29yaXRobSBjb250aW51ZXMgc2VhcmNoaW5nIHRvIHRoZSBlbmQgb2YgdGhlIGlucHV0IGV2ZW4gaWYgYSBwZXJmZWN0XG4gICAgLy8gbWF0Y2ggaXMgZm91bmQgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIHNhbWUgaW5wdXQuXG4gICAgZmluZEFsbE1hdGNoZXM6IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7IUFycmF5fSBsaXN0XG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+fSBvcHRpb25zXG4gICAqL1xuICBmdW5jdGlvbiBGdXNlIChsaXN0LCBvcHRpb25zKSB7XG4gICAgdmFyIGtleVxuXG4gICAgdGhpcy5saXN0ID0gbGlzdFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cbiAgICBmb3IgKGtleSBpbiBkZWZhdWx0T3B0aW9ucykge1xuICAgICAgaWYgKCFkZWZhdWx0T3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gQWRkIGJvb2xlYW4gdHlwZSBvcHRpb25zXG4gICAgICBpZiAodHlwZW9mIGRlZmF1bHRPcHRpb25zW2tleV0gPT09ICdib29sZWFuJykge1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IGtleSBpbiBvcHRpb25zID8gb3B0aW9uc1trZXldIDogZGVmYXVsdE9wdGlvbnNba2V5XTtcbiAgICAgIC8vIEFkZCBhbGwgb3RoZXIgb3B0aW9uc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV0gfHwgZGVmYXVsdE9wdGlvbnNba2V5XVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEZ1c2UuVkVSU0lPTiA9ICcyLjcuMydcblxuICAvKipcbiAgICogU2V0cyBhIG5ldyBsaXN0IGZvciBGdXNlIHRvIG1hdGNoIGFnYWluc3QuXG4gICAqIEBwYXJhbSB7IUFycmF5fSBsaXN0XG4gICAqIEByZXR1cm4geyFBcnJheX0gVGhlIG5ld2x5IHNldCBsaXN0XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIEZ1c2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgdGhpcy5saXN0ID0gbGlzdFxuICAgIHJldHVybiBsaXN0XG4gIH1cblxuICBGdXNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAocGF0dGVybikge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudmVyYm9zZSkgbG9nKCdcXG5TZWFyY2ggdGVybTonLCBwYXR0ZXJuLCAnXFxuJylcblxuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm5cbiAgICB0aGlzLnJlc3VsdHMgPSBbXVxuICAgIHRoaXMucmVzdWx0TWFwID0ge31cbiAgICB0aGlzLl9rZXlNYXAgPSBudWxsXG5cbiAgICB0aGlzLl9wcmVwYXJlU2VhcmNoZXJzKClcbiAgICB0aGlzLl9zdGFydFNlYXJjaCgpXG4gICAgdGhpcy5fY29tcHV0ZVNjb3JlKClcbiAgICB0aGlzLl9zb3J0KClcblxuICAgIHZhciBvdXRwdXQgPSB0aGlzLl9mb3JtYXQoKVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIEZ1c2UucHJvdG90eXBlLl9wcmVwYXJlU2VhcmNoZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zXG4gICAgdmFyIHBhdHRlcm4gPSB0aGlzLnBhdHRlcm5cbiAgICB2YXIgc2VhcmNoRm4gPSBvcHRpb25zLnNlYXJjaEZuXG4gICAgdmFyIHRva2VucyA9IHBhdHRlcm4uc3BsaXQob3B0aW9ucy50b2tlblNlcGFyYXRvcilcbiAgICB2YXIgaSA9IDBcbiAgICB2YXIgbGVuID0gdG9rZW5zLmxlbmd0aFxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy50b2tlbml6ZSkge1xuICAgICAgdGhpcy50b2tlblNlYXJjaGVycyA9IFtdXG4gICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRoaXMudG9rZW5TZWFyY2hlcnMucHVzaChuZXcgc2VhcmNoRm4odG9rZW5zW2ldLCBvcHRpb25zKSlcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5mdWxsU2VhY2hlciA9IG5ldyBzZWFyY2hGbihwYXR0ZXJuLCBvcHRpb25zKVxuICB9XG5cbiAgRnVzZS5wcm90b3R5cGUuX3N0YXJ0U2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zXG4gICAgdmFyIGdldEZuID0gb3B0aW9ucy5nZXRGblxuICAgIHZhciBsaXN0ID0gdGhpcy5saXN0XG4gICAgdmFyIGxpc3RMZW4gPSBsaXN0Lmxlbmd0aFxuICAgIHZhciBrZXlzID0gdGhpcy5vcHRpb25zLmtleXNcbiAgICB2YXIga2V5c0xlbiA9IGtleXMubGVuZ3RoXG4gICAgdmFyIGtleVxuICAgIHZhciB3ZWlnaHRcbiAgICB2YXIgaXRlbSA9IG51bGxcbiAgICB2YXIgaVxuICAgIHZhciBqXG5cbiAgICAvLyBDaGVjayB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgbGlzdCwgaWYgaXQncyBhIHN0cmluZywgdGhlbiB3ZSBhc3N1bWVcbiAgICAvLyB0aGF0IGV2ZXJ5IGl0ZW0gaW4gdGhlIGxpc3QgaXMgYWxzbyBhIHN0cmluZywgYW5kIHRodXMgaXQncyBhIGZsYXR0ZW5lZCBhcnJheS5cbiAgICBpZiAodHlwZW9mIGxpc3RbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkgaXRlbVxuICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RMZW47IGkrKykge1xuICAgICAgICB0aGlzLl9hbmFseXplKCcnLCBsaXN0W2ldLCBpLCBpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9rZXlNYXAgPSB7fVxuICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgZmlyc3QgaXRlbSBpcyBhbiBPYmplY3QgKGhvcGVmdWxseSksIGFuZCB0aHVzIHRoZSBzZWFyY2hpbmdcbiAgICAgIC8vIGlzIGRvbmUgb24gdGhlIHZhbHVlcyBvZiB0aGUga2V5cyBvZiBlYWNoIGl0ZW0uXG4gICAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkgaXRlbVxuICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RMZW47IGkrKykge1xuICAgICAgICBpdGVtID0gbGlzdFtpXVxuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkga2V5XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBrZXlzTGVuOyBqKyspIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2pdXG4gICAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB3ZWlnaHQgPSAoMSAtIGtleS53ZWlnaHQpIHx8IDFcbiAgICAgICAgICAgIHRoaXMuX2tleU1hcFtrZXkubmFtZV0gPSB7XG4gICAgICAgICAgICAgIHdlaWdodDogd2VpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa2V5LndlaWdodCA8PSAwIHx8IGtleS53ZWlnaHQgPiAxKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignS2V5IHdlaWdodCBoYXMgdG8gYmUgPiAwIGFuZCA8PSAxJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleSA9IGtleS5uYW1lXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2tleU1hcFtrZXldID0ge1xuICAgICAgICAgICAgICB3ZWlnaHQ6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fYW5hbHl6ZShrZXksIGdldEZuKGl0ZW0sIGtleSwgW10pLCBpdGVtLCBpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgRnVzZS5wcm90b3R5cGUuX2FuYWx5emUgPSBmdW5jdGlvbiAoa2V5LCB0ZXh0LCBlbnRpdHksIGluZGV4KSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnNcbiAgICB2YXIgd29yZHNcbiAgICB2YXIgc2NvcmVzXG4gICAgdmFyIGV4aXN0cyA9IGZhbHNlXG4gICAgdmFyIGV4aXN0aW5nUmVzdWx0XG4gICAgdmFyIGF2ZXJhZ2VTY29yZVxuICAgIHZhciBmaW5hbFNjb3JlXG4gICAgdmFyIHNjb3Jlc0xlblxuICAgIHZhciBtYWluU2VhcmNoUmVzdWx0XG4gICAgdmFyIHRva2VuU2VhcmNoZXJcbiAgICB2YXIgdGVybVNjb3Jlc1xuICAgIHZhciB3b3JkXG4gICAgdmFyIHRva2VuU2VhcmNoUmVzdWx0XG4gICAgdmFyIGhhc01hdGNoSW5UZXh0XG4gICAgdmFyIGNoZWNrVGV4dE1hdGNoZXNcbiAgICB2YXIgaVxuICAgIHZhciBqXG5cbiAgICAvLyBDaGVjayBpZiB0aGUgdGV4dCBjYW4gYmUgc2VhcmNoZWRcbiAgICBpZiAodGV4dCA9PT0gdW5kZWZpbmVkIHx8IHRleHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNjb3JlcyA9IFtdXG5cbiAgICB2YXIgbnVtVGV4dE1hdGNoZXMgPSAwXG5cbiAgICBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB3b3JkcyA9IHRleHQuc3BsaXQob3B0aW9ucy50b2tlblNlcGFyYXRvcilcblxuICAgICAgaWYgKG9wdGlvbnMudmVyYm9zZSkgbG9nKCctLS0tLS0tLS1cXG5LZXk6Jywga2V5KVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRva2VuaXplKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRva2VuU2VhcmNoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdG9rZW5TZWFyY2hlciA9IHRoaXMudG9rZW5TZWFyY2hlcnNbaV1cblxuICAgICAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnUGF0dGVybjonLCB0b2tlblNlYXJjaGVyLnBhdHRlcm4pXG5cbiAgICAgICAgICB0ZXJtU2NvcmVzID0gW11cbiAgICAgICAgICBoYXNNYXRjaEluVGV4dCA9IGZhbHNlXG5cbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgd29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHdvcmQgPSB3b3Jkc1tqXVxuICAgICAgICAgICAgdG9rZW5TZWFyY2hSZXN1bHQgPSB0b2tlblNlYXJjaGVyLnNlYXJjaCh3b3JkKVxuICAgICAgICAgICAgdmFyIG9iaiA9IHt9XG4gICAgICAgICAgICBpZiAodG9rZW5TZWFyY2hSZXN1bHQuaXNNYXRjaCkge1xuICAgICAgICAgICAgICBvYmpbd29yZF0gPSB0b2tlblNlYXJjaFJlc3VsdC5zY29yZVxuICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlXG4gICAgICAgICAgICAgIGhhc01hdGNoSW5UZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgICBzY29yZXMucHVzaCh0b2tlblNlYXJjaFJlc3VsdC5zY29yZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ialt3b3JkXSA9IDFcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMubWF0Y2hBbGxUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICBzY29yZXMucHVzaCgxKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXJtU2NvcmVzLnB1c2gob2JqKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChoYXNNYXRjaEluVGV4dCkge1xuICAgICAgICAgICAgbnVtVGV4dE1hdGNoZXMrK1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnVG9rZW4gc2NvcmVzOicsIHRlcm1TY29yZXMpXG4gICAgICAgIH1cblxuICAgICAgICBhdmVyYWdlU2NvcmUgPSBzY29yZXNbMF1cbiAgICAgICAgc2NvcmVzTGVuID0gc2NvcmVzLmxlbmd0aFxuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgc2NvcmVzTGVuOyBpKyspIHtcbiAgICAgICAgICBhdmVyYWdlU2NvcmUgKz0gc2NvcmVzW2ldXG4gICAgICAgIH1cbiAgICAgICAgYXZlcmFnZVNjb3JlID0gYXZlcmFnZVNjb3JlIC8gc2NvcmVzTGVuXG5cbiAgICAgICAgaWYgKG9wdGlvbnMudmVyYm9zZSkgbG9nKCdUb2tlbiBzY29yZSBhdmVyYWdlOicsIGF2ZXJhZ2VTY29yZSlcbiAgICAgIH1cblxuICAgICAgbWFpblNlYXJjaFJlc3VsdCA9IHRoaXMuZnVsbFNlYWNoZXIuc2VhcmNoKHRleHQpXG4gICAgICBpZiAob3B0aW9ucy52ZXJib3NlKSBsb2coJ0Z1bGwgdGV4dCBzY29yZTonLCBtYWluU2VhcmNoUmVzdWx0LnNjb3JlKVxuXG4gICAgICBmaW5hbFNjb3JlID0gbWFpblNlYXJjaFJlc3VsdC5zY29yZVxuICAgICAgaWYgKGF2ZXJhZ2VTY29yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbmFsU2NvcmUgPSAoZmluYWxTY29yZSArIGF2ZXJhZ2VTY29yZSkgLyAyXG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnU2NvcmUgYXZlcmFnZTonLCBmaW5hbFNjb3JlKVxuXG4gICAgICBjaGVja1RleHRNYXRjaGVzID0gKHRoaXMub3B0aW9ucy50b2tlbml6ZSAmJiB0aGlzLm9wdGlvbnMubWF0Y2hBbGxUb2tlbnMpID8gbnVtVGV4dE1hdGNoZXMgPj0gdGhpcy50b2tlblNlYXJjaGVycy5sZW5ndGggOiB0cnVlXG5cbiAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnQ2hlY2sgTWF0Y2hlcycsIGNoZWNrVGV4dE1hdGNoZXMpXG5cbiAgICAgIC8vIElmIGEgbWF0Y2ggaXMgZm91bmQsIGFkZCB0aGUgaXRlbSB0byA8cmF3UmVzdWx0cz4sIGluY2x1ZGluZyBpdHMgc2NvcmVcbiAgICAgIGlmICgoZXhpc3RzIHx8IG1haW5TZWFyY2hSZXN1bHQuaXNNYXRjaCkgJiYgY2hlY2tUZXh0TWF0Y2hlcykge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cyBpbiBvdXIgcmVzdWx0c1xuICAgICAgICBleGlzdGluZ1Jlc3VsdCA9IHRoaXMucmVzdWx0TWFwW2luZGV4XVxuXG4gICAgICAgIGlmIChleGlzdGluZ1Jlc3VsdCkge1xuICAgICAgICAgIC8vIFVzZSB0aGUgbG93ZXN0IHNjb3JlXG4gICAgICAgICAgLy8gZXhpc3RpbmdSZXN1bHQuc2NvcmUsIGJpdGFwUmVzdWx0LnNjb3JlXG4gICAgICAgICAgZXhpc3RpbmdSZXN1bHQub3V0cHV0LnB1c2goe1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBzY29yZTogZmluYWxTY29yZSxcbiAgICAgICAgICAgIG1hdGNoZWRJbmRpY2VzOiBtYWluU2VhcmNoUmVzdWx0Lm1hdGNoZWRJbmRpY2VzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIHJhdyByZXN1bHQgbGlzdFxuICAgICAgICAgIHRoaXMucmVzdWx0TWFwW2luZGV4XSA9IHtcbiAgICAgICAgICAgIGl0ZW06IGVudGl0eSxcbiAgICAgICAgICAgIG91dHB1dDogW3tcbiAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgIHNjb3JlOiBmaW5hbFNjb3JlLFxuICAgICAgICAgICAgICBtYXRjaGVkSW5kaWNlczogbWFpblNlYXJjaFJlc3VsdC5tYXRjaGVkSW5kaWNlc1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnJlc3VsdHMucHVzaCh0aGlzLnJlc3VsdE1hcFtpbmRleF0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodGV4dCkpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2FuYWx5emUoa2V5LCB0ZXh0W2ldLCBlbnRpdHksIGluZGV4KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEZ1c2UucHJvdG90eXBlLl9jb21wdXRlU2NvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlcbiAgICB2YXIgalxuICAgIHZhciBrZXlNYXAgPSB0aGlzLl9rZXlNYXBcbiAgICB2YXIgdG90YWxTY29yZVxuICAgIHZhciBvdXRwdXRcbiAgICB2YXIgc2NvcmVMZW5cbiAgICB2YXIgc2NvcmVcbiAgICB2YXIgd2VpZ2h0XG4gICAgdmFyIHJlc3VsdHMgPSB0aGlzLnJlc3VsdHNcbiAgICB2YXIgYmVzdFNjb3JlXG4gICAgdmFyIG5TY29yZVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy52ZXJib3NlKSBsb2coJ1xcblxcbkNvbXB1dGluZyBzY29yZTpcXG4nKVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRvdGFsU2NvcmUgPSAwXG4gICAgICBvdXRwdXQgPSByZXN1bHRzW2ldLm91dHB1dFxuICAgICAgc2NvcmVMZW4gPSBvdXRwdXQubGVuZ3RoXG5cbiAgICAgIGJlc3RTY29yZSA9IDFcblxuICAgICAgZm9yIChqID0gMDsgaiA8IHNjb3JlTGVuOyBqKyspIHtcbiAgICAgICAgc2NvcmUgPSBvdXRwdXRbal0uc2NvcmVcbiAgICAgICAgd2VpZ2h0ID0ga2V5TWFwID8ga2V5TWFwW291dHB1dFtqXS5rZXldLndlaWdodCA6IDFcblxuICAgICAgICBuU2NvcmUgPSBzY29yZSAqIHdlaWdodFxuXG4gICAgICAgIGlmICh3ZWlnaHQgIT09IDEpIHtcbiAgICAgICAgICBiZXN0U2NvcmUgPSBNYXRoLm1pbihiZXN0U2NvcmUsIG5TY29yZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3RhbFNjb3JlICs9IG5TY29yZVxuICAgICAgICAgIG91dHB1dFtqXS5uU2NvcmUgPSBuU2NvcmVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYmVzdFNjb3JlID09PSAxKSB7XG4gICAgICAgIHJlc3VsdHNbaV0uc2NvcmUgPSB0b3RhbFNjb3JlIC8gc2NvcmVMZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdHNbaV0uc2NvcmUgPSBiZXN0U2NvcmVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy52ZXJib3NlKSBsb2cocmVzdWx0c1tpXSlcbiAgICB9XG4gIH1cblxuICBGdXNlLnByb3RvdHlwZS5fc29ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgIGlmIChvcHRpb25zLnNob3VsZFNvcnQpIHtcbiAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnXFxuXFxuU29ydGluZy4uLi4nKVxuICAgICAgdGhpcy5yZXN1bHRzLnNvcnQob3B0aW9ucy5zb3J0Rm4pXG4gICAgfVxuICB9XG5cbiAgRnVzZS5wcm90b3R5cGUuX2Zvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgIHZhciBnZXRGbiA9IG9wdGlvbnMuZ2V0Rm5cbiAgICB2YXIgZmluYWxPdXRwdXQgPSBbXVxuICAgIHZhciBpXG4gICAgdmFyIGxlblxuICAgIHZhciByZXN1bHRzID0gdGhpcy5yZXN1bHRzXG4gICAgdmFyIHJlcGxhY2VWYWx1ZVxuICAgIHZhciBnZXRJdGVtQXRJbmRleFxuICAgIHZhciBpbmNsdWRlID0gb3B0aW9ucy5pbmNsdWRlXG5cbiAgICBpZiAob3B0aW9ucy52ZXJib3NlKSBsb2coJ1xcblxcbk91dHB1dDpcXG5cXG4nLCByZXN1bHRzKVxuXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uLCBoZXJlIGZvciBzcGVlZC11cCwgd2hpY2ggcmVwbGFjZXMgdGhlIGl0ZW0gd2l0aCBpdHMgdmFsdWUsXG4gICAgLy8gaWYgdGhlIG9wdGlvbnMgc3BlY2lmaWVzIGl0LFxuICAgIHJlcGxhY2VWYWx1ZSA9IG9wdGlvbnMuaWQgPyBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIHJlc3VsdHNbaW5kZXhdLml0ZW0gPSBnZXRGbihyZXN1bHRzW2luZGV4XS5pdGVtLCBvcHRpb25zLmlkLCBbXSlbMF1cbiAgICB9IDogZnVuY3Rpb24gKCkge31cblxuICAgIGdldEl0ZW1BdEluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICB2YXIgcmVjb3JkID0gcmVzdWx0c1tpbmRleF1cbiAgICAgIHZhciBkYXRhXG4gICAgICB2YXIgalxuICAgICAgdmFyIG91dHB1dFxuICAgICAgdmFyIF9pdGVtXG4gICAgICB2YXIgX3Jlc3VsdFxuXG4gICAgICAvLyBJZiBgaW5jbHVkZWAgaGFzIHZhbHVlcywgcHV0IHRoZSBpdGVtIGluIHRoZSByZXN1bHRcbiAgICAgIGlmIChpbmNsdWRlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICBpdGVtOiByZWNvcmQuaXRlbVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNsdWRlLmluZGV4T2YoJ21hdGNoZXMnKSAhPT0gLTEpIHtcbiAgICAgICAgICBvdXRwdXQgPSByZWNvcmQub3V0cHV0XG4gICAgICAgICAgZGF0YS5tYXRjaGVzID0gW11cbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgb3V0cHV0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBfaXRlbSA9IG91dHB1dFtqXVxuICAgICAgICAgICAgX3Jlc3VsdCA9IHtcbiAgICAgICAgICAgICAgaW5kaWNlczogX2l0ZW0ubWF0Y2hlZEluZGljZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfaXRlbS5rZXkpIHtcbiAgICAgICAgICAgICAgX3Jlc3VsdC5rZXkgPSBfaXRlbS5rZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEubWF0Y2hlcy5wdXNoKF9yZXN1bHQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluY2x1ZGUuaW5kZXhPZignc2NvcmUnKSAhPT0gLTEpIHtcbiAgICAgICAgICBkYXRhLnNjb3JlID0gcmVzdWx0c1tpbmRleF0uc2NvcmVcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gcmVjb3JkLml0ZW1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG5cbiAgICAvLyBGcm9tIHRoZSByZXN1bHRzLCBwdXNoIGludG8gYSBuZXcgYXJyYXkgb25seSB0aGUgaXRlbSBpZGVudGlmaWVyIChpZiBzcGVjaWZpZWQpXG4gICAgLy8gb2YgdGhlIGVudGlyZSBpdGVtLiAgVGhpcyBpcyBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIHRoZSA8cmVzdWx0cz4sXG4gICAgLy8gc2luY2UgaXQgY29udGFpbnMgb3RoZXIgbWV0YWRhdGFcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSByZXN1bHRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICByZXBsYWNlVmFsdWUoaSlcbiAgICAgIGZpbmFsT3V0cHV0LnB1c2goZ2V0SXRlbUF0SW5kZXgoaSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmFsT3V0cHV0XG4gIH1cblxuICAvLyBIZWxwZXJzXG5cbiAgZnVuY3Rpb24gZGVlcFZhbHVlIChvYmosIHBhdGgsIGxpc3QpIHtcbiAgICB2YXIgZmlyc3RTZWdtZW50XG4gICAgdmFyIHJlbWFpbmluZ1xuICAgIHZhciBkb3RJbmRleFxuICAgIHZhciB2YWx1ZVxuICAgIHZhciBpXG4gICAgdmFyIGxlblxuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIHBhdGggbGVmdCwgd2UndmUgZ290dGVuIHRvIHRoZSBvYmplY3Qgd2UgY2FyZSBhYm91dC5cbiAgICAgIGxpc3QucHVzaChvYmopXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvdEluZGV4ID0gcGF0aC5pbmRleE9mKCcuJylcblxuICAgICAgaWYgKGRvdEluZGV4ICE9PSAtMSkge1xuICAgICAgICBmaXJzdFNlZ21lbnQgPSBwYXRoLnNsaWNlKDAsIGRvdEluZGV4KVxuICAgICAgICByZW1haW5pbmcgPSBwYXRoLnNsaWNlKGRvdEluZGV4ICsgMSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpcnN0U2VnbWVudCA9IHBhdGhcbiAgICAgIH1cblxuICAgICAgdmFsdWUgPSBvYmpbZmlyc3RTZWdtZW50XVxuICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCFyZW1haW5pbmcgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykpIHtcbiAgICAgICAgICBsaXN0LnB1c2godmFsdWUpXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAvLyBTZWFyY2ggZWFjaCBpdGVtIGluIHRoZSBhcnJheS5cbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZGVlcFZhbHVlKHZhbHVlW2ldLCByZW1haW5pbmcsIGxpc3QpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZykge1xuICAgICAgICAgIC8vIEFuIG9iamVjdC4gUmVjdXJzZSBmdXJ0aGVyLlxuICAgICAgICAgIGRlZXBWYWx1ZSh2YWx1ZSwgcmVtYWluaW5nLCBsaXN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXJyYXkgKG9iaikge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICB9XG5cbiAgLyoqXG4gICAqIEFkYXB0ZWQgZnJvbSBcIkRpZmYsIE1hdGNoIGFuZCBQYXRjaFwiLCBieSBHb29nbGVcbiAgICpcbiAgICogICBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWRpZmYtbWF0Y2gtcGF0Y2gvXG4gICAqXG4gICAqIE1vZGlmaWVkIGJ5OiBLaXJvbGxvcyBSaXNrIDxraXJvbGxvc0BnbWFpbC5jb20+XG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIERldGFpbHM6IHRoZSBhbGdvcml0aG0gYW5kIHN0cnVjdHVyZSB3YXMgbW9kaWZpZWQgdG8gYWxsb3cgdGhlIGNyZWF0aW9uIG9mXG4gICAqIDxTZWFyY2hlcj4gaW5zdGFuY2VzIHdpdGggYSA8c2VhcmNoPiBtZXRob2Qgd2hpY2ggZG9lcyB0aGUgYWN0dWFsXG4gICAqIGJpdGFwIHNlYXJjaC4gVGhlIDxwYXR0ZXJuPiAodGhlIHN0cmluZyB0aGF0IGlzIHNlYXJjaGVkIGZvcikgaXMgb25seSBkZWZpbmVkXG4gICAqIG9uY2UgcGVyIGluc3RhbmNlIGFuZCB0aHVzIGl0IGVsaW1pbmF0ZXMgcmVkdW5kYW50IHJlLWNyZWF0aW9uIHdoZW4gc2VhcmNoaW5nXG4gICAqIG92ZXIgYSBsaXN0IG9mIHN0cmluZ3MuXG4gICAqXG4gICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIilcbiAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIEJpdGFwU2VhcmNoZXIgKHBhdHRlcm4sIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLm9wdGlvbnMubG9jYXRpb24gPSBvcHRpb25zLmxvY2F0aW9uIHx8IEJpdGFwU2VhcmNoZXIuZGVmYXVsdE9wdGlvbnMubG9jYXRpb25cbiAgICB0aGlzLm9wdGlvbnMuZGlzdGFuY2UgPSAnZGlzdGFuY2UnIGluIG9wdGlvbnMgPyBvcHRpb25zLmRpc3RhbmNlIDogQml0YXBTZWFyY2hlci5kZWZhdWx0T3B0aW9ucy5kaXN0YW5jZVxuICAgIHRoaXMub3B0aW9ucy50aHJlc2hvbGQgPSAndGhyZXNob2xkJyBpbiBvcHRpb25zID8gb3B0aW9ucy50aHJlc2hvbGQgOiBCaXRhcFNlYXJjaGVyLmRlZmF1bHRPcHRpb25zLnRocmVzaG9sZFxuICAgIHRoaXMub3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoID0gb3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoIHx8IEJpdGFwU2VhcmNoZXIuZGVmYXVsdE9wdGlvbnMubWF4UGF0dGVybkxlbmd0aFxuXG4gICAgdGhpcy5wYXR0ZXJuID0gb3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gcGF0dGVybiA6IHBhdHRlcm4udG9Mb3dlckNhc2UoKVxuICAgIHRoaXMucGF0dGVybkxlbiA9IHBhdHRlcm4ubGVuZ3RoXG5cbiAgICBpZiAodGhpcy5wYXR0ZXJuTGVuIDw9IHRoaXMub3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoKSB7XG4gICAgICB0aGlzLm1hdGNobWFzayA9IDEgPDwgKHRoaXMucGF0dGVybkxlbiAtIDEpXG4gICAgICB0aGlzLnBhdHRlcm5BbHBoYWJldCA9IHRoaXMuX2NhbGN1bGF0ZVBhdHRlcm5BbHBoYWJldCgpXG4gICAgfVxuICB9XG5cbiAgQml0YXBTZWFyY2hlci5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAvLyBBcHByb3hpbWF0ZWx5IHdoZXJlIGluIHRoZSB0ZXh0IGlzIHRoZSBwYXR0ZXJuIGV4cGVjdGVkIHRvIGJlIGZvdW5kP1xuICAgIGxvY2F0aW9uOiAwLFxuXG4gICAgLy8gRGV0ZXJtaW5lcyBob3cgY2xvc2UgdGhlIG1hdGNoIG11c3QgYmUgdG8gdGhlIGZ1enp5IGxvY2F0aW9uIChzcGVjaWZpZWQgYWJvdmUpLlxuICAgIC8vIEFuIGV4YWN0IGxldHRlciBtYXRjaCB3aGljaCBpcyAnZGlzdGFuY2UnIGNoYXJhY3RlcnMgYXdheSBmcm9tIHRoZSBmdXp6eSBsb2NhdGlvblxuICAgIC8vIHdvdWxkIHNjb3JlIGFzIGEgY29tcGxldGUgbWlzbWF0Y2guIEEgZGlzdGFuY2Ugb2YgJzAnIHJlcXVpcmVzIHRoZSBtYXRjaCBiZSBhdFxuICAgIC8vIHRoZSBleGFjdCBsb2NhdGlvbiBzcGVjaWZpZWQsIGEgdGhyZXNob2xkIG9mICcxMDAwJyB3b3VsZCByZXF1aXJlIGEgcGVyZmVjdCBtYXRjaFxuICAgIC8vIHRvIGJlIHdpdGhpbiA4MDAgY2hhcmFjdGVycyBvZiB0aGUgZnV6enkgbG9jYXRpb24gdG8gYmUgZm91bmQgdXNpbmcgYSAwLjggdGhyZXNob2xkLlxuICAgIGRpc3RhbmNlOiAxMDAsXG5cbiAgICAvLyBBdCB3aGF0IHBvaW50IGRvZXMgdGhlIG1hdGNoIGFsZ29yaXRobSBnaXZlIHVwLiBBIHRocmVzaG9sZCBvZiAnMC4wJyByZXF1aXJlcyBhIHBlcmZlY3QgbWF0Y2hcbiAgICAvLyAob2YgYm90aCBsZXR0ZXJzIGFuZCBsb2NhdGlvbiksIGEgdGhyZXNob2xkIG9mICcxLjAnIHdvdWxkIG1hdGNoIGFueXRoaW5nLlxuICAgIHRocmVzaG9sZDogMC42LFxuXG4gICAgLy8gTWFjaGluZSB3b3JkIHNpemVcbiAgICBtYXhQYXR0ZXJuTGVuZ3RoOiAzMlxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGFscGhhYmV0IGZvciB0aGUgQml0YXAgYWxnb3JpdGhtLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEhhc2ggb2YgY2hhcmFjdGVyIGxvY2F0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIEJpdGFwU2VhcmNoZXIucHJvdG90eXBlLl9jYWxjdWxhdGVQYXR0ZXJuQWxwaGFiZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1hc2sgPSB7fSxcbiAgICAgIGkgPSAwXG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5wYXR0ZXJuTGVuOyBpKyspIHtcbiAgICAgIG1hc2tbdGhpcy5wYXR0ZXJuLmNoYXJBdChpKV0gPSAwXG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucGF0dGVybkxlbjsgaSsrKSB7XG4gICAgICBtYXNrW3RoaXMucGF0dGVybi5jaGFyQXQoaSldIHw9IDEgPDwgKHRoaXMucGF0dGVybi5sZW5ndGggLSBpIC0gMSlcbiAgICB9XG5cbiAgICByZXR1cm4gbWFza1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGUgYW5kIHJldHVybiB0aGUgc2NvcmUgZm9yIGEgbWF0Y2ggd2l0aCBgZWAgZXJyb3JzIGFuZCBgeGAgbG9jYXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvcnMgTnVtYmVyIG9mIGVycm9ycyBpbiBtYXRjaC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGxvY2F0aW9uIExvY2F0aW9uIG9mIG1hdGNoLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE92ZXJhbGwgc2NvcmUgZm9yIG1hdGNoICgwLjAgPSBnb29kLCAxLjAgPSBiYWQpLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQml0YXBTZWFyY2hlci5wcm90b3R5cGUuX2JpdGFwU2NvcmUgPSBmdW5jdGlvbiAoZXJyb3JzLCBsb2NhdGlvbikge1xuICAgIHZhciBhY2N1cmFjeSA9IGVycm9ycyAvIHRoaXMucGF0dGVybkxlbixcbiAgICAgIHByb3hpbWl0eSA9IE1hdGguYWJzKHRoaXMub3B0aW9ucy5sb2NhdGlvbiAtIGxvY2F0aW9uKVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzdGFuY2UpIHtcbiAgICAgIC8vIERvZGdlIGRpdmlkZSBieSB6ZXJvIGVycm9yLlxuICAgICAgcmV0dXJuIHByb3hpbWl0eSA/IDEuMCA6IGFjY3VyYWN5XG4gICAgfVxuICAgIHJldHVybiBhY2N1cmFjeSArIChwcm94aW1pdHkgLyB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZSBhbmQgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIHNlYXJjaFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZWFyY2ggaW5cbiAgICogQHJldHVybiB7e2lzTWF0Y2g6IGJvb2xlYW4sIHNjb3JlOiBudW1iZXJ9fSBMaXRlcmFsIGNvbnRhaW5pbmc6XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBpc01hdGNoIC0gV2hldGhlciB0aGUgdGV4dCBpcyBhIG1hdGNoIG9yIG5vdFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmUgLSBPdmVyYWxsIHNjb3JlIGZvciB0aGUgbWF0Y2hcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgQml0YXBTZWFyY2hlci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgIHZhciBpXG4gICAgdmFyIGpcbiAgICB2YXIgdGV4dExlblxuICAgIHZhciBmaW5kQWxsTWF0Y2hlc1xuICAgIHZhciBsb2NhdGlvblxuICAgIHZhciB0aHJlc2hvbGRcbiAgICB2YXIgYmVzdExvY1xuICAgIHZhciBiaW5NaW5cbiAgICB2YXIgYmluTWlkXG4gICAgdmFyIGJpbk1heFxuICAgIHZhciBzdGFydCwgZmluaXNoXG4gICAgdmFyIGJpdEFyclxuICAgIHZhciBsYXN0Qml0QXJyXG4gICAgdmFyIGNoYXJNYXRjaFxuICAgIHZhciBzY29yZVxuICAgIHZhciBsb2NhdGlvbnNcbiAgICB2YXIgbWF0Y2hlc1xuICAgIHZhciBpc01hdGNoZWRcbiAgICB2YXIgbWF0Y2hNYXNrXG4gICAgdmFyIG1hdGNoZWRJbmRpY2VzXG4gICAgdmFyIG1hdGNoZXNMZW5cbiAgICB2YXIgbWF0Y2hcblxuICAgIHRleHQgPSBvcHRpb25zLmNhc2VTZW5zaXRpdmUgPyB0ZXh0IDogdGV4dC50b0xvd2VyQ2FzZSgpXG5cbiAgICBpZiAodGhpcy5wYXR0ZXJuID09PSB0ZXh0KSB7XG4gICAgICAvLyBFeGFjdCBtYXRjaFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNNYXRjaDogdHJ1ZSxcbiAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgIG1hdGNoZWRJbmRpY2VzOiBbWzAsIHRleHQubGVuZ3RoIC0gMV1dXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBwYXR0ZXJuIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gdGhlIG1hY2hpbmUgd29yZCBsZW5ndGgsIGp1c3QgZG8gYSBhIHJlZ2V4IGNvbXBhcmlzb25cbiAgICBpZiAodGhpcy5wYXR0ZXJuTGVuID4gb3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoKSB7XG4gICAgICBtYXRjaGVzID0gdGV4dC5tYXRjaChuZXcgUmVnRXhwKHRoaXMucGF0dGVybi5yZXBsYWNlKG9wdGlvbnMudG9rZW5TZXBhcmF0b3IsICd8JykpKVxuICAgICAgaXNNYXRjaGVkID0gISFtYXRjaGVzXG5cbiAgICAgIGlmIChpc01hdGNoZWQpIHtcbiAgICAgICAgbWF0Y2hlZEluZGljZXMgPSBbXVxuICAgICAgICBmb3IgKGkgPSAwLCBtYXRjaGVzTGVuID0gbWF0Y2hlcy5sZW5ndGg7IGkgPCBtYXRjaGVzTGVuOyBpKyspIHtcbiAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbaV1cbiAgICAgICAgICBtYXRjaGVkSW5kaWNlcy5wdXNoKFt0ZXh0LmluZGV4T2YobWF0Y2gpLCBtYXRjaC5sZW5ndGggLSAxXSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc01hdGNoOiBpc01hdGNoZWQsXG4gICAgICAgIC8vIFRPRE86IHJldmlzaXQgdGhpcyBzY29yZVxuICAgICAgICBzY29yZTogaXNNYXRjaGVkID8gMC41IDogMSxcbiAgICAgICAgbWF0Y2hlZEluZGljZXM6IG1hdGNoZWRJbmRpY2VzXG4gICAgICB9XG4gICAgfVxuXG4gICAgZmluZEFsbE1hdGNoZXMgPSBvcHRpb25zLmZpbmRBbGxNYXRjaGVzXG5cbiAgICBsb2NhdGlvbiA9IG9wdGlvbnMubG9jYXRpb25cbiAgICAvLyBTZXQgc3RhcnRpbmcgbG9jYXRpb24gYXQgYmVnaW5uaW5nIHRleHQgYW5kIGluaXRpYWxpemUgdGhlIGFscGhhYmV0LlxuICAgIHRleHRMZW4gPSB0ZXh0Lmxlbmd0aFxuICAgIC8vIEhpZ2hlc3Qgc2NvcmUgYmV5b25kIHdoaWNoIHdlIGdpdmUgdXAuXG4gICAgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcbiAgICAvLyBJcyB0aGVyZSBhIG5lYXJieSBleGFjdCBtYXRjaD8gKHNwZWVkdXApXG4gICAgYmVzdExvYyA9IHRleHQuaW5kZXhPZih0aGlzLnBhdHRlcm4sIGxvY2F0aW9uKVxuXG4gICAgLy8gYSBtYXNrIG9mIHRoZSBtYXRjaGVzXG4gICAgbWF0Y2hNYXNrID0gW11cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGV4dExlbjsgaSsrKSB7XG4gICAgICBtYXRjaE1hc2tbaV0gPSAwXG4gICAgfVxuXG4gICAgaWYgKGJlc3RMb2MgIT0gLTEpIHtcbiAgICAgIHRocmVzaG9sZCA9IE1hdGgubWluKHRoaXMuX2JpdGFwU2NvcmUoMCwgYmVzdExvYyksIHRocmVzaG9sZClcbiAgICAgIC8vIFdoYXQgYWJvdXQgaW4gdGhlIG90aGVyIGRpcmVjdGlvbj8gKHNwZWVkIHVwKVxuICAgICAgYmVzdExvYyA9IHRleHQubGFzdEluZGV4T2YodGhpcy5wYXR0ZXJuLCBsb2NhdGlvbiArIHRoaXMucGF0dGVybkxlbilcblxuICAgICAgaWYgKGJlc3RMb2MgIT0gLTEpIHtcbiAgICAgICAgdGhyZXNob2xkID0gTWF0aC5taW4odGhpcy5fYml0YXBTY29yZSgwLCBiZXN0TG9jKSwgdGhyZXNob2xkKVxuICAgICAgfVxuICAgIH1cblxuICAgIGJlc3RMb2MgPSAtMVxuICAgIHNjb3JlID0gMVxuICAgIGxvY2F0aW9ucyA9IFtdXG4gICAgYmluTWF4ID0gdGhpcy5wYXR0ZXJuTGVuICsgdGV4dExlblxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucGF0dGVybkxlbjsgaSsrKSB7XG4gICAgICAvLyBTY2FuIGZvciB0aGUgYmVzdCBtYXRjaDsgZWFjaCBpdGVyYXRpb24gYWxsb3dzIGZvciBvbmUgbW9yZSBlcnJvci5cbiAgICAgIC8vIFJ1biBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIGhvdyBmYXIgZnJvbSB0aGUgbWF0Y2ggbG9jYXRpb24gd2UgY2FuIHN0cmF5XG4gICAgICAvLyBhdCB0aGlzIGVycm9yIGxldmVsLlxuICAgICAgYmluTWluID0gMFxuICAgICAgYmluTWlkID0gYmluTWF4XG4gICAgICB3aGlsZSAoYmluTWluIDwgYmluTWlkKSB7XG4gICAgICAgIGlmICh0aGlzLl9iaXRhcFNjb3JlKGksIGxvY2F0aW9uICsgYmluTWlkKSA8PSB0aHJlc2hvbGQpIHtcbiAgICAgICAgICBiaW5NaW4gPSBiaW5NaWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiaW5NYXggPSBiaW5NaWRcbiAgICAgICAgfVxuICAgICAgICBiaW5NaWQgPSBNYXRoLmZsb29yKChiaW5NYXggLSBiaW5NaW4pIC8gMiArIGJpbk1pbilcbiAgICAgIH1cblxuICAgICAgLy8gVXNlIHRoZSByZXN1bHQgZnJvbSB0aGlzIGl0ZXJhdGlvbiBhcyB0aGUgbWF4aW11bSBmb3IgdGhlIG5leHQuXG4gICAgICBiaW5NYXggPSBiaW5NaWRcbiAgICAgIHN0YXJ0ID0gTWF0aC5tYXgoMSwgbG9jYXRpb24gLSBiaW5NaWQgKyAxKVxuICAgICAgaWYgKGZpbmRBbGxNYXRjaGVzKSB7XG4gICAgICAgIGZpbmlzaCA9IHRleHRMZW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5pc2ggPSBNYXRoLm1pbihsb2NhdGlvbiArIGJpbk1pZCwgdGV4dExlbikgKyB0aGlzLnBhdHRlcm5MZW5cbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgYml0IGFycmF5XG4gICAgICBiaXRBcnIgPSBBcnJheShmaW5pc2ggKyAyKVxuXG4gICAgICBiaXRBcnJbZmluaXNoICsgMV0gPSAoMSA8PCBpKSAtIDFcblxuICAgICAgZm9yIChqID0gZmluaXNoOyBqID49IHN0YXJ0OyBqLS0pIHtcbiAgICAgICAgY2hhck1hdGNoID0gdGhpcy5wYXR0ZXJuQWxwaGFiZXRbdGV4dC5jaGFyQXQoaiAtIDEpXVxuXG4gICAgICAgIGlmIChjaGFyTWF0Y2gpIHtcbiAgICAgICAgICBtYXRjaE1hc2tbaiAtIDFdID0gMVxuICAgICAgICB9XG5cbiAgICAgICAgYml0QXJyW2pdID0gKChiaXRBcnJbaiArIDFdIDw8IDEpIHwgMSkgJiBjaGFyTWF0Y2hcblxuICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgIC8vIFN1YnNlcXVlbnQgcGFzc2VzOiBmdXp6eSBtYXRjaC5cbiAgICAgICAgICBiaXRBcnJbal0gfD0gKCgobGFzdEJpdEFycltqICsgMV0gfCBsYXN0Qml0QXJyW2pdKSA8PCAxKSB8IDEpIHwgbGFzdEJpdEFycltqICsgMV1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYml0QXJyW2pdICYgdGhpcy5tYXRjaG1hc2spIHtcbiAgICAgICAgICBzY29yZSA9IHRoaXMuX2JpdGFwU2NvcmUoaSwgaiAtIDEpXG5cbiAgICAgICAgICAvLyBUaGlzIG1hdGNoIHdpbGwgYWxtb3N0IGNlcnRhaW5seSBiZSBiZXR0ZXIgdGhhbiBhbnkgZXhpc3RpbmcgbWF0Y2guXG4gICAgICAgICAgLy8gQnV0IGNoZWNrIGFueXdheS5cbiAgICAgICAgICBpZiAoc2NvcmUgPD0gdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAvLyBJbmRlZWQgaXQgaXNcbiAgICAgICAgICAgIHRocmVzaG9sZCA9IHNjb3JlXG4gICAgICAgICAgICBiZXN0TG9jID0gaiAtIDFcbiAgICAgICAgICAgIGxvY2F0aW9ucy5wdXNoKGJlc3RMb2MpXG5cbiAgICAgICAgICAgIC8vIEFscmVhZHkgcGFzc2VkIGxvYywgZG93bmhpbGwgZnJvbSBoZXJlIG9uIGluLlxuICAgICAgICAgICAgaWYgKGJlc3RMb2MgPD0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2hlbiBwYXNzaW5nIGxvYywgZG9uJ3QgZXhjZWVkIG91ciBjdXJyZW50IGRpc3RhbmNlIGZyb20gbG9jLlxuICAgICAgICAgICAgc3RhcnQgPSBNYXRoLm1heCgxLCAyICogbG9jYXRpb24gLSBiZXN0TG9jKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBObyBob3BlIGZvciBhIChiZXR0ZXIpIG1hdGNoIGF0IGdyZWF0ZXIgZXJyb3IgbGV2ZWxzLlxuICAgICAgaWYgKHRoaXMuX2JpdGFwU2NvcmUoaSArIDEsIGxvY2F0aW9uKSA+IHRocmVzaG9sZCkge1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgbGFzdEJpdEFyciA9IGJpdEFyclxuICAgIH1cblxuICAgIG1hdGNoZWRJbmRpY2VzID0gdGhpcy5fZ2V0TWF0Y2hlZEluZGljZXMobWF0Y2hNYXNrKVxuXG4gICAgLy8gQ291bnQgZXhhY3QgbWF0Y2hlcyAodGhvc2Ugd2l0aCBhIHNjb3JlIG9mIDApIHRvIGJlIFwiYWxtb3N0XCIgZXhhY3RcbiAgICByZXR1cm4ge1xuICAgICAgaXNNYXRjaDogYmVzdExvYyA+PSAwLFxuICAgICAgc2NvcmU6IHNjb3JlID09PSAwID8gMC4wMDEgOiBzY29yZSxcbiAgICAgIG1hdGNoZWRJbmRpY2VzOiBtYXRjaGVkSW5kaWNlc1xuICAgIH1cbiAgfVxuXG4gIEJpdGFwU2VhcmNoZXIucHJvdG90eXBlLl9nZXRNYXRjaGVkSW5kaWNlcyA9IGZ1bmN0aW9uIChtYXRjaE1hc2spIHtcbiAgICB2YXIgbWF0Y2hlZEluZGljZXMgPSBbXVxuICAgIHZhciBzdGFydCA9IC0xXG4gICAgdmFyIGVuZCA9IC0xXG4gICAgdmFyIGkgPSAwXG4gICAgdmFyIG1hdGNoXG4gICAgdmFyIGxlbiA9IG1hdGNoTWFzay5sZW5ndGhcbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBtYXRjaCA9IG1hdGNoTWFza1tpXVxuICAgICAgaWYgKG1hdGNoICYmIHN0YXJ0ID09PSAtMSkge1xuICAgICAgICBzdGFydCA9IGlcbiAgICAgIH0gZWxzZSBpZiAoIW1hdGNoICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgICBlbmQgPSBpIC0gMVxuICAgICAgICBpZiAoKGVuZCAtIHN0YXJ0KSArIDEgPj0gdGhpcy5vcHRpb25zLm1pbk1hdGNoQ2hhckxlbmd0aCkge1xuICAgICAgICAgICAgbWF0Y2hlZEluZGljZXMucHVzaChbc3RhcnQsIGVuZF0pXG4gICAgICAgIH1cbiAgICAgICAgc3RhcnQgPSAtMVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF0Y2hNYXNrW2kgLSAxXSkge1xuICAgICAgaWYgKChpLTEgLSBzdGFydCkgKyAxID49IHRoaXMub3B0aW9ucy5taW5NYXRjaENoYXJMZW5ndGgpIHtcbiAgICAgICAgbWF0Y2hlZEluZGljZXMucHVzaChbc3RhcnQsIGkgLSAxXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZWRJbmRpY2VzXG4gIH1cblxuICAvLyBFeHBvcnQgdG8gQ29tbW9uIEpTIExvYWRlclxuICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gRnVzZVxuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEZ1c2VcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgZ2xvYmFsLkZ1c2UgPSBGdXNlXG4gIH1cblxufSkodGhpcyk7XG5cbn0se31dLDM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qIVxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxuLy8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuLy8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxufVxuXG59LHt9XSwzNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG59LHt9XX0se30sWzZdKVxuXG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IEZ1c2VqcyBmcm9tICdmdXNlLmpzJztcblxuaW1wb3J0IFB1YlN1YiBmcm9tICcuL3B1YnN1Yic7XG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnLi9oZWxwZXJzL3VuZGVyc2NvcmUnO1xuXG5sZXQgZnVzZTtcblxuLy8gSW5pdGlhbGl6ZSBmdXNlLmpzIG9wdGlvbnNcbmNvbnN0IGZ1c2VPcHRpb25zID0ge1xuICBzaG91bGRTb3J0OiB0cnVlLFxuICB0aHJlc2hvbGQ6IDAuMSxcbiAgbG9jYXRpb246IDAsXG4gIGRpc3RhbmNlOiAxMDAsXG4gIG1heFBhdHRlcm5MZW5ndGg6IDMyLFxuICBtaW5NYXRjaENoYXJMZW5ndGg6IDEsXG4gIGtleXM6IFtcbiAgICAnYXJ0aXN0JyxcbiAgICAndGl0bGUnLFxuICBdLFxufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjcxMjAzNC9zb3J0LWFycmF5LWJ5LWZpcnN0bmFtZS1hbHBoYWJldGljYWxseS1pbi1qYXZhc2NyaXB0XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NDIxMjUzL3NvcnQtamF2YXNjcmlwdC1hcnJheS1vZi1vYmplY3RzLWJhc2VkLW9uLW9uZS1vZi10aGUtb2JqZWN0cy1wcm9wZXJ0aWVzXG5jb25zdCBzb3J0U29uZ3MgPSAoc29uZ0xpc3QpID0+IHtcbiAgY29uc3Qgc29ydGVkID0gc29uZ0xpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFsYyA9IGEuYXJ0aXN0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgYmxjID0gYi5hcnRpc3QudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoYWxjID4gYmxjKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGFsYyA8IGJsYykge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfSk7XG4gIHJldHVybiBzb3J0ZWQ7XG59O1xuXG5mdW5jdGlvbiBncm91cFNvbmdzKHNvbmdMaXN0KSB7XG4gIGNvbnN0IGdyb3VwZWQgPSBncm91cEJ5KHNvbmdMaXN0LCAnYXJ0aXN0Jyk7XG4gIHJldHVybiBncm91cGVkO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJCeUxldHRlcihzb25nTGlzdCwgbGV0dGVyKSB7XG4gIGNvbnN0IGZpbHQgPSBzb25nTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmFydGlzdC50b1N0cmluZygpLmNoYXJBdCgwKSA9PT0gbGV0dGVyKTtcbiAgcmV0dXJuIGZpbHQ7XG59XG5cblxuZnVuY3Rpb24gZmlsdGVyQnlUZXJtKHNvbmdMaXN0LCBzZWFyY2hUZXJtKSB7XG4gIGZ1c2UgPSBuZXcgRnVzZWpzKHNvbmdMaXN0LCBmdXNlT3B0aW9ucyk7XG4gIGNvbnN0IGZ1c2VSZXN1bHRzID0gZnVzZS5zZWFyY2goc2VhcmNoVGVybSk7XG4gIHJldHVybiBmdXNlUmVzdWx0cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaEJ5TmFtZShzZWFyY2hUZXJtKSB7XG4gIFB1YlN1Yi5wdWJsaXNoKCdzZWFyY2hTdGFydCcsIHsgc2VhcmNoVGVybSB9KTtcbiAgcmV0dXJuIGF4aW9zLmdldCgnc2VhcmNoX2RhdGEuanNvbicpXG4gICAgLnRoZW4ocmVzdWx0cyA9PiBmaWx0ZXJCeVRlcm0ocmVzdWx0cy5kYXRhLCBzZWFyY2hUZXJtKSlcbiAgICAudGhlbihzb3J0U29uZ3MpXG4gICAgLnRoZW4oZ3JvdXBTb25ncylcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRBcnRpc3RzQnlMZXR0ZXIobGV0dGVyKSB7XG4gIFB1YlN1Yi5wdWJsaXNoKCdzZWFyY2hTdGFydCcsIHsgbGV0dGVyIH0pO1xuICByZXR1cm4gYXhpb3MuZ2V0KCdzZWFyY2hfZGF0YS5qc29uJylcbiAgICAudGhlbihyZXN1bHRzID0+IGZpbHRlckJ5TGV0dGVyKHJlc3VsdHMuZGF0YSwgbGV0dGVyKSlcbiAgICAudGhlbihzb3J0U29uZ3MpXG4gICAgLnRoZW4oZ3JvdXBTb25ncylcbiAgICAvLyAudGhlbihyZXN1bHRzID0+IHNvcnRTb25ncyhyZXN1bHRzLCBsZXR0ZXIpKVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0pO1xufVxuLypcbmZ1bmN0aW9uIHNlYXJjaCgpIHtcbiAgYXhpb3MuZ2V0KCdzZWFyY2hfZGF0YS5qc29uJylcbiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgbG9hZHIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICBjb25zdCBmaWx0ID0gZGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLmFydGlzdC50b1N0cmluZygpLmNoYXJBdCgwKSA9PT0gdGhpcy5kYXRhc2V0LmxldHRlcik7XG5cbiAgICBQdWJTdWIucHVibGlzaCgndXBkYXRlTGlzdCcsIHsgbGlzdDogZmlsdCB9KTtcblxuICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKGZpbHQpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gc29ydFNvbmdzKHJlc3VsdHMsIGxldHRlcikge1xuICBjb25zb2xlLmxvZygnc29ydFNvbmdzJyk7XG4gIGNvbnN0IGFsbFNvbmdzID0gcmVzdWx0cy5kYXRhO1xuICBjb25zdCBmaWx0ZXJlZFNvbmdzID0gYWxsU29uZ3MuZmlsdGVyKGl0ZW0gPT4gaXRlbS5hcnRpc3QudG9TdHJpbmcoKS5jaGFyQXQoMCkgPT09IGxldHRlcik7XG5cbiAgY29uc3Qgc29uZ2xpc3RTb3J0ZWQgPSBmaWx0ZXJlZFNvbmdzLnNvcnQoKGEsIGIpID0+IGIuYXJ0aXN0IC0gYS5hcnRpc3QpO1xuICBjb25zdCBzb25nbGlzdEdyb3VwZWQgPSBncm91cEJ5KHNvbmdsaXN0U29ydGVkLCAnYXJ0aXN0Jyk7XG5cbiAgcmV0dXJuIHNvbmdsaXN0R3JvdXBlZDtcbn1cblxuKi9cbiIsImltcG9ydCB7IGRlbGVnYXRlRXZlbnRMaXN0ZW5lciB9IGZyb20gJy4vaGVscGVycy9ldmVudHMnO1xuaW1wb3J0IFB1YlN1YiBmcm9tICcuL3B1YnN1Yic7XG5pbXBvcnQgKiBhcyBhcGkgZnJvbSAnLi9hcGknO1xuXG5jb25zdCBsZXR0ZXJNZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF6LXNlYXJjaCcpO1xuY29uc3Qgc29uZ1RpdGxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqcy1zZWFyY2hfcmVzdWx0cycpO1xuY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduLXVwJyk7XG52YXIgc2VsZWN0ZWRBcnRpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanMtYXJ0aXN0X19pbnB1dCcpO1xudmFyIHNlbGVjdGVkU29uZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqcy1zb25nX19pbnB1dCcpO1xudmFyIG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanMtbmFtZV9faW5wdXQnKTtcbnZhciBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqcy1waG9uZV9faW5wdXQnKTtcbnZhciBzZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYy1zZWFyY2hmb3JtX19pbnB1dHMnKTtcbnZhciBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jLXNlYXJjaGZvcm1fX2lucHV0Jyk7XG4vLyBDb2RlIGZvciBTb25nIFJlcXVlc3QgU3VibWl0XG5jb25zdCByZXF1ZXN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1zb25ncGljaycpO1xuXG5mdW5jdGlvbiBnZXRTb25nKGUpIHtcbiAgcmV0dXJuIGUudGFyZ2V0O1xufVxuXG52YXIgc2VsZWN0aW9uID0gZnVuY3Rpb24odGl0bGUsIGFydGlzdCwgbmFtZSwgcGhvbmUpe1xuICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gIHRoaXMuYXJ0aXN0ID0gYXJ0aXN0O1xuICB0aGlzLm5hbWUgPSBuYW1lO1xuICB0aGlzLnBob25lID0gcGhvbmU7XG59XG5mdW5jdGlvbiBmaWxsRm9ybShvYmope1xuICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3UtaGlkZGVuJyk7XG4gIHNlbGVjdGVkQXJ0aXN0LnZhbHVlID0gb2JqLmFydGlzdDtcbiAgc2VsZWN0ZWRTb25nLnZhbHVlID0gb2JqLnRpdGxlO1xufVxuZnVuY3Rpb24gcmVzZXRGb3JtKGUpIHtcbiAgbmFtZS52YWx1ZSA9IFwiXCI7XG4gIHBob25lLnZhbHVlID0gXCJcIjtcbiAgZm9ybS5jbGFzc0xpc3QuYWRkKCd1LWhpZGRlbicpO1xuICBjb25zb2xlLmxvZygncmVzZXQgZm9ybScpO1xuXG59XG5cbmZ1bmN0aW9uIGdldERhdGEoZSl7XG4gIHZhciB0aXRsZSwgYXJ0aXN0LCBhcnRpc3RTb25ncztcbiAgdGl0bGUgPSBlLnRhcmdldDtcbiAgYXJ0aXN0U29uZ3MgPSB0aXRsZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gIGFydGlzdCA9IGFydGlzdFNvbmdzLnByZXZpb3VzU2libGluZztcbiAgY29uc29sZS5sb2codGl0bGUudGV4dENvbnRlbnQpO1xuICBjb25zb2xlLmxvZyhhcnRpc3QudGV4dENvbnRlbnQpO1xuICB2YXIgZGF0YSA9IG5ldyBzZWxlY3Rpb24odGl0bGUudGV4dENvbnRlbnQsIGFydGlzdC50ZXh0Q29udGVudCwgbmFtZS52YWx1ZSA/IG5hbWUudmFsdWU6IFwiXCIsIHBob25lLnZhbHVlID8gcGhvbmUudmFsdWUgOiBcIlwiKTtcbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIGZpbGxGb3JtKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBzdWJtaXRSZXF1ZXN0KGV2dCkge1xuICBjb25zdCBlID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGlmIChzZWxlY3RlZEFydGlzdC52YWx1ZSA9PT0gXCJcIiB8fCBzZWxlY3RlZFNvbmcudmFsdWUgPT09IFwiXCIpIHtcbiAgICBmb3JtLnByZXZpb3VzU2libGluZy5pbm5lckhUTUwgPSBcIlBsZWFzZSBmaWxsIG91dCBhbGwgb2YgdGhlIGZpZWxkc1wiO1xuICB9IGVsc2Uge1xuICAgIHZhciByZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBuYW1lOiBuYW1lLnZhbHVlLnRvTG93ZXJDYXNlKCksXG4gICAgICBwaG9uZTogcGhvbmUudmFsdWUucmVwbGFjZSgvLS9nLCBcIlwiKSxcbiAgICAgIGFydGlzdDogc2VsZWN0ZWRBcnRpc3QudmFsdWUsXG4gICAgICBzb25nOiBzZWxlY3RlZFNvbmcudmFsdWVcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhyZXF1ZXN0KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGxldHRlckNsaWNrSGFuZGxlcihldnQpIHtcbiAgY29uc3QgZSA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCB0aGVMZXR0ZXIgPSB0aGlzLmRhdGFzZXQubGV0dGVyO1xuXG5cbiAgYXBpLmZpbmRBcnRpc3RzQnlMZXR0ZXIodGhlTGV0dGVyKVxuICAgIC50aGVuKChzb25nTGlzdCkgPT4ge1xuICAgICAgUHViU3ViLnB1Ymxpc2goJ3NlYXJjaENvbXBsZXRlJywgeyBzb25nTGlzdCwgc2VhcmNoVGVybTogdGhlTGV0dGVyIH0pO1xuICAgIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGluaXRMZXR0ZXJNZW51KCkge1xuICBjb25zdCBsZXR0ZXJzID0gJ3F3ZXJ0eXVpb3Bhc2RmZ2hqa2x6eGN2Ym5tJztcbiAgY29uc3QgdXBwZXJjYXNlTGV0dGVycyA9IGxldHRlcnMudG9VcHBlckNhc2UoKTtcbiAgY29uc3QgbGV0dGVyTGlzdCA9IFsuLi51cHBlcmNhc2VMZXR0ZXJzXTtcbiAgY29uc3Qgc29ydGVkTGlzdCA9IGxldHRlckxpc3Quc29ydCgpO1xuICBjb25zdCBodG1sTGlzdCA9IHNvcnRlZExpc3QubWFwKGl0ZW0gPT4gYDxsaSBjbGFzcz1cIm8tbGlzdC1pbmxpbmVfX2l0ZW0gYy1hel9faXRlbVwiPjxhIGNsYXNzPVwiYy1hel9fbGV0dGVyXCIgZGF0YS1sZXR0ZXI9XCIke2l0ZW19XCI+JHtpdGVtfTwvYT48L2xpPmApLmpvaW4oJycpO1xuICAvLyBjb250YWluZXIuaW5uZXJIVE1MID0gYDx1bCBjbGFzcz1cIm8tbGlzdC1pbmxpbmUgYy1helwiPiR7aHRtbExpc3R9PC91bD5gO1xuICAvLyBjb25zdCBsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGV0dGVyJyk7XG5cbiAgLy8gbGV0dGVyLmZvckVhY2gobGV0dCA9PiBsZXR0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGV0dGVyQ2xpY2tIYW5kbGVyKSk7XG4gIHJldHVybiBgPHVsIGNsYXNzPVwiby1saXN0LWlubGluZSBjLWF6XCI+JHtodG1sTGlzdH08L3VsPmA7XG59XG5cbmxldHRlck1lbnVDb250YWluZXIuaW5uZXJIVE1MID0gaW5pdExldHRlck1lbnUoKTtcbmRlbGVnYXRlRXZlbnRMaXN0ZW5lcihsZXR0ZXJNZW51Q29udGFpbmVyLCAnY2xpY2snLCAnYScsIGxldHRlckNsaWNrSGFuZGxlcik7XG5kZWxlZ2F0ZUV2ZW50TGlzdGVuZXIoc29uZ1RpdGxlcywgJ2NsaWNrJywgJ2EnLCBnZXREYXRhKTtcbi8vIGRlbGVnYXRlRXZlbnRMaXN0ZW5lcihzZWFyY2hJbnB1dCwgJ2ZvY3VzJywgJy5jLXNlYXJjaGZvcm1fX2lucHV0JywgcmVzZXRGb3JtKTtcbnJlcXVlc3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdFJlcXVlc3QpO1xuc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCByZXNldEZvcm0pOyIsIi8qXG4gKiBhZGFwdGVkIGZyb20gaHR0cHM6Ly9jb2RlcGVuLmlvL2RpdnN3aXRoY2xhc3MvcGVuL0pvUldkd1xuICogZnJvbSBhIHNpbmdsZSBlbGVtZW50IChpLmUuIHF1ZXJ5U2VsZWN0b3Igb3IgZ2V0RWxlbWVudEJ5TmFtZSlcbiAqIHlvdSBjYW4gYWRkLCByZW1vdmUsIG9yIHRvZ2dsZSBhIGNsYXNzXG4gKlxuICogQHBhcmFtIHtET00gRWxlbWVudH0gZWwgLSBUaGUgZWxlbWVudCB0byBhbHRlclxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZSAtIHRoZSBjbGFzcyBuYW1lIHRvIGFkZCwgcmVtb3ZlLCB0b2dnbGVcbiAqL1xuXG5leHBvcnQgY29uc3QgYWRkQ2xhc3MgPSAoZWxlbWVudCwgY2xhc3NOYW1lKSA9PiB7XG4gIGNvbnN0IGVsID0gZWxlbWVudDtcblxuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmNsYXNzTmFtZSArPSBgICR7Y2xhc3NOYW1lfWA7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVDbGFzcyA9IChlbGVtZW50LCBjbGFzc05hbWUpID0+IHtcbiAgY29uc3QgZWwgPSBlbGVtZW50O1xuXG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChgKF58XFxcXGIpJHtjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8Jyl9KFxcXFxifCQpYCwgJ2dpJyksICcgJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG4gIH1cbiAgcmV0dXJuIG5ldyBSZWdFeHAoYChefCApJHtjbGFzc05hbWV9KCB8JClgLCAnZ2knKS50ZXN0KGVsLmNsYXNzTmFtZSk7XG59XG5cbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzcyA9IChlbGVtZW50LCBjbGFzc05hbWUpID0+IHtcbiAgY29uc3QgZWwgPSBlbGVtZW50O1xuXG4gIGlmIChoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSkge1xuICAgIHJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGFkZENsYXNzKGVsLCBjbGFzc05hbWUpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0U3R5bGUgPSAoZWxlbWVudCwgcHJvcGVydHlPYmplY3QpID0+IHtcbiAgY29uc3Qgc3R5bGVzID0gcHJvcGVydHlPYmplY3Q7XG5cbiAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRQYXJlbnRCeVRhZ05hbWUgPSAoZWxlbWVudCwgdGFnTmFtZSkgPT4ge1xuICBsZXQgcGFyZW50ID0gZWxlbWVudDtcblxuICB3aGlsZSAocGFyZW50ICE9PSBudWxsICYmIHBhcmVudC50YWdOYW1lICE9PSB0YWdOYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgfVxuICByZXR1cm4gcGFyZW50O1xufTtcbiIsIi8qKlxuICogQ3VzdG9tIGphdmFzY3JpcHQgZXZlbnRzIG9mIGpRdWVyeSBmdW5jdGlvbnNcbiAqL1xuLyoqXG4gKiBDdXN0b20gZXZlbnQgZGlzcGF0Y2hlciAobWltaWNzIGpxdWVyeSB0cmlnZ2VyKVxuICogQHBhcmFtICB7ZWxlbWVudH0gZWxlbWVudCAgIEVsZW1lbnQgdG8gdHJpZ2dlciBvblxuICogQHBhcmFtICB7c3RyaW5nfSBldmVudG5hbWUgQ3VzdG9tIGV2ZW50IG5hbWVcbiAqIEBwYXJhbSAge09iamVjdH0gW29iaj17fV0gIEN1c3RvbSBwYXJhbWV0ZXJzIHRvIHBhc3MgYWxvbmcgKGZpbmQgaW4gZXZlbnQuZGV0YWlsKVxuICogQHJldHVybiB7bnVsbH0gICAgICAgICAgIE5vIHJldHVybiB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpZ2dlcihlbGVtZW50LCBldmVudG5hbWUsIG9iaiA9IHt9KSB7XG4gIGxldCBldmVudDtcblxuICBpZiAod2luZG93LkN1c3RvbUV2ZW50KSB7XG4gICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnRuYW1lLCB7IGRldGFpbDogb2JqIH0pO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50bmFtZSwgdHJ1ZSwgdHJ1ZSwgb2JqKTtcbiAgfVxuXG4gIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbi8qKlxuICogRGVsZWdhdGUgZXZlbnQgbGlzdGVuZXIgdG8gY2hpbGRyZW4gKG1pbWljcyBqcXVlcnkgYmVoYXZpb3IpXG4gKiAoc291cmNlOiBodHRwOi8vYmRhZGFtLmNvbS9ibG9nL3BsYWluLWphdmFzY3JpcHQtZXZlbnQtZGVsZWdhdGlvbi5odG1sKVxuICogQHBhcmFtICB7ZWxlbWVudH0gZWxlbWVudCAgRE9NIHBhcmVudCBlbGVtZW50XG4gKiBAcGFyYW0gIHtzdHJpbmd9IGV2dCAgICAgIEV2ZW50IHRvIGxpc3RlbiB0b1xuICogQHBhcmFtICB7c3RyaW5nfSBzZWxlY3RvciBTZWxlY3RvciB0byBtYXRjaCBjaGlsZHJlbiBieVxuICogQHBhcmFtICB7ZnVuY3Rpb259IGhhbmRsZXIgIEZ1bmN0aW9uIHRvIHJ1biBhcyBldmVudCBoYW5kbGVyXG4gKiBAcmV0dXJuIHtudWxsfSAgICAgICAgICBObyBSZXR1cm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGVnYXRlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBldnQsIHNlbGVjdG9yLCBoYW5kbGVyKSB7XG4gIGNvbnN0IGVsID0gZWxlbWVudDtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldnQsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHBvc3NpYmxlVGFyZ2V0cyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcG9zc2libGVUYXJnZXRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbGV0IHQgPSB0YXJnZXQ7XG4gICAgICBjb25zdCBwID0gcG9zc2libGVUYXJnZXRzW2ldO1xuXG4gICAgICB3aGlsZSAodCAmJiB0ICE9PSBlbGVtZW50KSB7XG4gICAgICAgIGlmICh0ID09PSBwKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbChwLCBldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICB0ID0gdC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuICAvKiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmdW5jdGlvbiBjYWxsYmFjayhldmVudCkge1xuICAgIGNvbnN0IGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICBsZXQgdCA9IGUudGFyZ2V0O1xuXG4gICAgd2hpbGUgKHQgJiYgdCAhPT0gdGhpcykge1xuICAgICAgY29uc29sZS5sb2coYHdoaWxlIHQ6ICR7dH1gKTtcbiAgICAgIGlmICh0Lm1hdGNoZXMoc2VsZWN0b3IpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBtYXRjaCB0OiAke3R9YCk7XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0LCBldmVudCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgb3V0c2lkZSB0OiAke3R9YCk7XG4gICAgICB0ID0gdC5wYXJlbnROb2RlO1xuICAgIH1cbiAgfSk7XG4gICovXG59XG4iLCIvKlxuICogR3JvdXBCeSBmcm9tIGh0dHA6Ly93d3cuZGF0Y2hsZXkubmFtZS9nZXR0aW5nLWZ1bmN0aW9uYWwtd2l0aC1qYXZhc2NyaXB0LXBhcnQtMi9cbiAqL1xuXG5jb25zdCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gaXNGdW5jdGlvbihvKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG8pID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufTtcblxuLyogZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOiBbXCJlcnJvclwiLCB7IFwicHJvcHNcIjogZmFsc2UgfV0qL1xuZXhwb3J0IGNvbnN0IGdyb3VwQnkgPSAobGlzdCwgcHJvcCkgPT5cbiAgbGlzdC5yZWR1Y2UoKGdyb3VwZWQsIGl0ZW0pID0+IHtcbiAgICBjb25zdCBrZXkgPSBpc0Z1bmN0aW9uKHByb3ApID8gcHJvcC5hcHBseSh0aGlzLCBbaXRlbV0pIDogaXRlbVtwcm9wXTtcbiAgICBncm91cGVkW2tleV0gPSBncm91cGVkW2tleV0gfHwgW107XG4gICAgZ3JvdXBlZFtrZXldLnB1c2goaXRlbSk7XG4gICAgcmV0dXJuIGdyb3VwZWQ7XG4gIH0sIHt9KTtcbiIsImltcG9ydCAnLi9hei1zZWFyY2gnO1xuaW1wb3J0ICcuL3NlYXJjaCc7XG5pbXBvcnQgJy4vcmVzdWx0cyc7XG4iLCJjb25zdCBwdWJzdWIgPSAoKCkgPT4ge1xuICBjb25zdCB0b3BpY3MgPSB7fTtcblxuICBjb25zdCBzdWJzY3JpYmUgPSAoZXZlbnROYW1lLCBjYWxsYmFjaykgPT4ge1xuICAgIHRvcGljc1tldmVudE5hbWVdID0gdG9waWNzW2V2ZW50TmFtZV0gfHwgW107XG4gICAgdG9waWNzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XG4gIH07XG5cbiAgY29uc3QgdW5zdWJzY3JpYmUgPSAoZXZlbnROYW1lLCBjYWxsYmFjaykgPT4ge1xuICAgIGlmICh0b3BpY3NbZXZlbnROYW1lXSkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRvcGljc1tldmVudE5hbWVdLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICh0b3BpY3NbZXZlbnROYW1lXVtpXSA9PT0gY2FsbGJhY2spIHtcbiAgICAgICAgICB0b3BpY3NbZXZlbnROYW1lXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcHVibGlzaCA9IChldmVudE5hbWUsIGRhdGEpID0+IHtcbiAgICBpZiAodG9waWNzW2V2ZW50TmFtZV0pIHtcbiAgICAgIHRvcGljc1tldmVudE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc3Vic2NyaWJlLFxuICAgIHVuc3Vic2NyaWJlLFxuICAgIHB1Ymxpc2gsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBwdWJzdWI7XG4iLCJpbXBvcnQgeyBhZGRDbGFzcywgcmVtb3ZlQ2xhc3MgfSBmcm9tICcuL2hlbHBlcnMvZG9tLWVsZW1lbnRzJztcbmltcG9ydCBQdWJTdWIgZnJvbSAnLi9wdWJzdWInO1xuXG5jb25zdCBwbGFjZWhvbGRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1zZWFyY2hfcmVzdWx0cycpO1xuY29uc3QgbG9hZHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGVyJyk7XG5cbmZ1bmN0aW9uIGNsZWFyUmVzdWx0cygpIHtcbiAgcGxhY2Vob2xkZXIuaW5uZXJIVE1MID0gJyc7XG4gIHJlbW92ZUNsYXNzKGxvYWRyLCAndS1oaWRkZW4nKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKHB1Ym9iaikge1xuICBjb25zdCBzb25nTGlzdCA9IHB1Ym9iai5zb25nTGlzdDtcbiAgY29uc3Qgc2VhcmNoVGVybSA9IHB1Ym9iai5zZWFyY2hUZXJtO1xuXG4gIGxldCBodG1sU3R1ZmYgPSAnJztcbiAgaHRtbFN0dWZmID0gYDxoMiBjbGFzcz1cImMtc2VhcmNoX19oZWFkaW5nXCI+U2VhcmNoIFJlc3VsdHM6IDxzcGFuIGMtc2VhcmNoX190ZXJtPiR7c2VhcmNoVGVybX08L3NwYW4+PC9oMj48c2VjdGlvbiBjbGFzcz1cImMtc2VhcmNoX19saXN0XCI+YDtcbiAgT2JqZWN0LmtleXMoc29uZ0xpc3QpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGh0bWxTdHVmZiArPSBgPHAgY2xhc3M9XCJjLXNlYXJjaF9fYXJ0aXN0XCI+JHtrZXl9PC9wPjx1bD5gO1xuICAgIHNvbmdMaXN0W2tleV0uZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIGh0bWxTdHVmZiArPSBgPGxpIGNsYXNzPVwiYy1zZWFyY2hfX3RpdGxlXCI+PGEgaHJlZj1cIiNzaWduLXVwXCI+JHt2YWx1ZS50aXRsZX08L2E+PC9saT5gO1xuICAgIH0pO1xuICAgIGh0bWxTdHVmZiArPSAnPC91bD4nO1xuICB9KTtcbiAgaHRtbFN0dWZmICs9ICc8L3NlY3Rpb24+JztcbiAgYWRkQ2xhc3MobG9hZHIsICd1LWhpZGRlbicpO1xuICBwbGFjZWhvbGRlci5pbm5lckhUTUwgPSBodG1sU3R1ZmY7XG59XG5cblB1YlN1Yi5zdWJzY3JpYmUoJ3NlYXJjaFN0YXJ0JywgY2xlYXJSZXN1bHRzKTtcblB1YlN1Yi5zdWJzY3JpYmUoJ3NlYXJjaENvbXBsZXRlJywgcmVuZGVyKTtcbiIsImltcG9ydCBQdWJTdWIgZnJvbSAnLi9wdWJzdWInO1xuaW1wb3J0ICogYXMgYXBpIGZyb20gJy4vYXBpJztcblxuY29uc3Qgc2VhcmNoRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1zb25nc2VhcmNoJyk7XG5jb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaEZvcm0ucXVlcnlTZWxlY3RvcignI2pzLXNvbmdzZWFyY2hfX2lucHV0Jyk7XG5cbmZ1bmN0aW9uIGNsZWFyU2VhcmNoKCkge1xuICBzZWFyY2hJbnB1dC52YWx1ZSA9ICcnO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hIYW5kbGVyKGV2dCkge1xuICBjb25zdCBlID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHNlYXJjaFRlcm0gPSBzZWFyY2hJbnB1dC52YWx1ZTtcbiAgaWYgKHNlYXJjaFRlcm0gIT09ICcnKSB7XG4gICAgYXBpLnNlYXJjaEJ5TmFtZShzZWFyY2hUZXJtKVxuICAgICAgLnRoZW4oKHNvbmdMaXN0KSA9PiB7XG4gICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdzZWFyY2hDb21wbGV0ZScsIHsgc29uZ0xpc3QsIHNlYXJjaFRlcm0gfSk7XG4gICAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvblNlYXJjaFN0YXJ0KHBzKSB7XG4gIGNvbnN0IHB1YnN1Yk9iamVjdCA9IHBzO1xuXG4gIGlmIChwdWJzdWJPYmplY3QubGV0dGVyKSB7XG4gICAgY2xlYXJTZWFyY2goKTtcbiAgfVxufVxuXG5zZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHNlYXJjaEhhbmRsZXIpO1xuUHViU3ViLnN1YnNjcmliZSgnc2VhcmNoU3RhcnQnLCBvblNlYXJjaFN0YXJ0KTtcblxuLypcblxuXG5mdW5jdGlvbiBzdWNjZXNzSGFuZGxlcihkYXRhKSB7XG4gIGNvbnN0IGkgPSBfKGRhdGEpLnRvQXJyYXkoKTtcblxuICBmdXNlID0gbmV3IEZ1c2VqcyhpLCBvcHRpb25zKTsgLy8gXCJsaXN0XCIgaXMgdGhlIGl0ZW0gYXJyYXlcbn1cblxuLy8gR2V0IHRoZSBnZW5lcmF0ZWQgc2VhcmNoX2RhdGEuanNvbiBmaWxlIHNvIGx1bnIuanMgY2FuIHNlYXJjaCBpdCBsb2NhbGx5LlxuY29uc3Qgc2VhcmNoRGF0YSA9ICQuYWpheCh7XG4gIHVybDogJy4vc2VhcmNoX2RhdGEuanNvbicsXG4gIHR5cGU6ICdHRVQnLCAvLyBkZWZhdWx0IGlzIEdFVCBidXQgeW91IGNhbiB1c2Ugb3RoZXIgdmVyYnMgYmFzZWQgb24geW91ciBuZWVkcy5cbiAgZGF0YVR5cGU6ICdqc29uJywgLy8gc3BlY2lmeSB0aGUgZGF0YVR5cGUgZm9yIGZ1dHVyZSByZWZlcmVuY2Vcbn0pO1xuc2VhcmNoRGF0YS5kb25lKHN1Y2Nlc3NIYW5kbGVyKTtcblxuZnVuY3Rpb24gZGlzcGxheVNlYXJjaFJlc3VsdHMocmVzdWx0cykge1xuICBjb25zb2xlLmxvZygnc3VjY2VzcycpO1xuICBjb25zb2xlLmxvZyhyZXN1bHRzKTtcblxuICBjb25zdCAkcGxhY2Vob2xkZXIgPSAkKCcjanMtc2VhcmNoX3Jlc3VsdHMnKTtcbiAgY29uc3QgdGVzdHMgPSBfLnNvcnRCeShyZXN1bHRzLCAnYXJ0aXN0Jyk7XG4gIGNvbnN0IHRlc3RnID0gXy5ncm91cEJ5KHRlc3RzLCAnYXJ0aXN0Jyk7XG4gIGxldCBodG1sU3R1ZmYgPSAnJztcbiAgaHRtbFN0dWZmID0gJzxoMiBjbGFzcz1cImMtc2VhcmNoX19oZWFkaW5nXCI+U2VhcmNoIFJlc3VsdHM8L2gyPjxzZWN0aW9uIGNsYXNzPVwiYy1zZWFyY2hfX2xpc3RcIj4nO1xuICAkLmVhY2godGVzdGcsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgY29uc29sZS5sb2coYCR7a2V5fTogYCk7XG4gICAgY29uc29sZS5sb2coYHZhbHVlID0gJHt2YWx1ZX1gKTtcbiAgICBodG1sU3R1ZmYgKz0gYDxwIGNsYXNzPVwiYy1zZWFyY2hfX2FydGlzdFwiPiR7a2V5fTwvcD48dWw+YDtcbiAgICBjb25zdCB2YWwgPSBfLnNvcnRCeSh2YWx1ZSwgJ3RpdGxlJyk7XG4gICAgJC5lYWNoKHZhbCwgKGssIHYpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2t9Ojo6JHt2LnRpdGxlfWApO1xuXG4gICAgICBodG1sU3R1ZmYgKz0gYDxsaSBjbGFzcz1cImMtc2VhcmNoX190aXRsZVwiPiR7di50aXRsZX08L2xpPmA7XG4gICAgfSk7XG4gICAgaHRtbFN0dWZmICs9ICc8L3VsPic7XG4gIH0pO1xuICBodG1sU3R1ZmYgKz0gJzwvc2VjdGlvbj4nO1xuICAkcGxhY2Vob2xkZXIuZW1wdHkoKS5hcHBlbmQoaHRtbFN0dWZmKTtcbn1cblxuJCgoKSA9PiB7XG4gIC8vIEV2ZW50IHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICQoJyNqcy1zb25nc2VhcmNoJykuc3VibWl0KChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgJHF1ZXJ5ID0gJCgnI2pzLXNvbmdzZWFyY2hfaW5wdXQnKS52YWwoKTsgLy8gR2V0IHRoZSB2YWx1ZSBmb3IgdGhlIHRleHQgZmllbGRcbiAgICBjb25zdCBmdXNlUmVzdWx0cyA9IGZ1c2Uuc2VhcmNoKCRxdWVyeSk7IC8vIEdldCBmdXNlLmpzIHRvIHBlcmZvcm0gYSBzZWFyY2hcblxuICAgIGRpc3BsYXlTZWFyY2hSZXN1bHRzKGZ1c2VSZXN1bHRzKTsgLy8gSGFuZCB0aGUgcmVzdWx0cyBvZmYgdG8gYmUgZGlzcGxheWVkXG4gIH0pO1xufSk7XG4qL1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHNldHRsZSA9IHJlcXVpcmUoJy4vLi4vY29yZS9zZXR0bGUnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG52YXIgYnRvYSA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuYnRvYSAmJiB3aW5kb3cuYnRvYS5iaW5kKHdpbmRvdykpIHx8IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idG9hJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIGxvYWRFdmVudCA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xuICAgIHZhciB4RG9tYWluID0gZmFsc2U7XG5cbiAgICAvLyBGb3IgSUUgOC85IENPUlMgc3VwcG9ydFxuICAgIC8vIE9ubHkgc3VwcG9ydHMgUE9TVCBhbmQgR0VUIGNhbGxzIGFuZCBkb2Vzbid0IHJldHVybnMgdGhlIHJlc3BvbnNlIGhlYWRlcnMuXG4gICAgLy8gRE9OJ1QgZG8gdGhpcyBmb3IgdGVzdGluZyBiL2MgWE1MSHR0cFJlcXVlc3QgaXMgbW9ja2VkLCBub3QgWERvbWFpblJlcXVlc3QuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LlhEb21haW5SZXF1ZXN0ICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkgJiZcbiAgICAgICAgIWlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkge1xuICAgICAgcmVxdWVzdCA9IG5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QoKTtcbiAgICAgIGxvYWRFdmVudCA9ICdvbmxvYWQnO1xuICAgICAgeERvbWFpbiA9IHRydWU7XG4gICAgICByZXF1ZXN0Lm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiBoYW5kbGVQcm9ncmVzcygpIHt9O1xuICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge307XG4gICAgfVxuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcbiAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG4gICAgcmVxdWVzdFtsb2FkRXZlbnRdID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCB8fCAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0ICYmICF4RG9tYWluKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICAvLyBJRSBzZW5kcyAxMjIzIGluc3RlYWQgb2YgMjA0IChodHRwczovL2dpdGh1Yi5jb20vbXphYnJpc2tpZS9heGlvcy9pc3N1ZXMvMjAxKVxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gMjA0IDogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gJ05vIENvbnRlbnQnIDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcigndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICB2YXIgY29va2llcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb29raWVzJyk7XG5cbiAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG4gICAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcbiAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG4gICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi5cbiAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cbiAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG4gICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gIHJldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcbn07XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICB2YXIgdG9rZW4gPSB0aGlzO1xuICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29tYmluZVVSTHMnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IHV0aWxzLm1lcmdlKHtcbiAgICAgIHVybDogYXJndW1lbnRzWzBdXG4gICAgfSwgYXJndW1lbnRzWzFdKTtcbiAgfVxuXG4gIGNvbmZpZyA9IHV0aWxzLm1lcmdlKGRlZmF1bHRzLCB0aGlzLmRlZmF1bHRzLCB7IG1ldGhvZDogJ2dldCcgfSwgY29uZmlnKTtcbiAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcblxuICAvLyBTdXBwb3J0IGJhc2VVUkwgY29uZmlnXG4gIGlmIChjb25maWcuYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSkge1xuICAgIGNvbmZpZy51cmwgPSBjb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG4gIH1cblxuICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG4gIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG4gIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7XG4gIHRoaXMuaGFuZGxlcnMgPSBbXTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWBcbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcbiAgdGhpcy5oYW5kbGVycy5wdXNoKHtcbiAgICBmdWxmaWxsZWQ6IGZ1bGZpbGxlZCxcbiAgICByZWplY3RlZDogcmVqZWN0ZWRcbiAgfSk7XG4gIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5lamVjdCA9IGZ1bmN0aW9uIGVqZWN0KGlkKSB7XG4gIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkge1xuICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9yc1xuICpcbiAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkge1xuICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICBmbihoKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNlcHRvck1hbmFnZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2VuaGFuY2VFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgdHJhbnNmb3JtRGF0YSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtRGF0YScpO1xudmFyIGlzQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL2lzQ2FuY2VsJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnMgfHwge31cbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgcmV0dXJuIGVycm9yO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpO1xuXG4vKipcbiAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgLy8gTm90ZTogc3RhdHVzIGlzIG5vdCBleHBvc2VkIGJ5IFhEb21haW5SZXF1ZXN0XG4gIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLmNvbmZpZyxcbiAgICAgIG51bGwsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRhO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSByZXF1aXJlKCcuL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZScpO1xuXG52YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7XG4gIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHtcbiAgdmFyIGFkYXB0ZXI7XG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL3hocicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy9odHRwJyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH1cbn07XG5cbmRlZmF1bHRzLmhlYWRlcnMgPSB7XG4gIGNvbW1vbjoge1xuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblxudmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuZnVuY3Rpb24gRSgpIHtcbiAgdGhpcy5tZXNzYWdlID0gJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3Rlcic7XG59XG5FLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcbkUucHJvdG90eXBlLmNvZGUgPSA1O1xuRS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5mdW5jdGlvbiBidG9hKGlucHV0KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuICB2YXIgb3V0cHV0ID0gJyc7XG4gIGZvciAoXG4gICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcbiAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcbiAgICAvLyBpZiB0aGUgbmV4dCBzdHIgaW5kZXggZG9lcyBub3QgZXhpc3Q6XG4gICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcbiAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG4gICAgc3RyLmNoYXJBdChpZHggfCAwKSB8fCAobWFwID0gJz0nLCBpZHggJSAxKTtcbiAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuICApIHtcbiAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG4gICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEUoKTtcbiAgICB9XG4gICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH1cblxuICAgICAgaWYgKCF1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlxcLysvLCAnJylcbiAgICA6IGJhc2VVUkw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICB9LFxuXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfSkoKVxuKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgdmFyIG1zaWUgPSAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgLyoqXG4gICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkXG4gICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICBpZiAobXNpZSkge1xuICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgIH1cblxuICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgIC8qKlxuICAgICogRGV0ZXJtaW5lIGlmIGEgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGN1cnJlbnQgbG9jYXRpb25cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3RcbiAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luLCBvdGhlcndpc2UgZmFsc2VcbiAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VUkwucHJvdG9jb2wgJiZcbiAgICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdCk7XG4gICAgfTtcbiAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfSkoKVxuKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIGlzQnVmZmVyID0gcmVxdWlyZSgnaXMtYnVmZmVyJyk7XG5cbi8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnXG4gICk7XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyAmJiAhaXNBcnJheShvYmopKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlOiBpc0RhdGUsXG4gIGlzRmlsZTogaXNGaWxlLFxuICBpc0Jsb2I6IGlzQmxvYixcbiAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcbiAgaXNTdHJlYW06IGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgbWVyZ2U6IG1lcmdlLFxuICBleHRlbmQ6IGV4dGVuZCxcbiAgdHJpbTogdHJpbVxufTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIEZ1c2UgLSBMaWdodHdlaWdodCBmdXp6eS1zZWFyY2hcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxNiBLaXJvbGxvcyBSaXNrIDxraXJvbGxvc0BnbWFpbC5jb20+LlxuICogQWxsIFJpZ2h0cyBSZXNlcnZlZC4gQXBhY2hlIFNvZnR3YXJlIExpY2Vuc2UgMi4wXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKVxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuOyhmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIC8qKiBAdHlwZSB7ZnVuY3Rpb24oLi4uKil9ICovXG4gIGZ1bmN0aW9uIGxvZyAoKSB7XG4gICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKVxuICB9XG5cbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBpZGVudGlmaWVyIHByb3BlcnR5LiBJZiBzcGVjaWZpZWQsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBiZSBhIGxpc3RcbiAgICAvLyBvZiB0aGUgaXRlbXMnIGRlbnRpZmllcnMsIG90aGVyd2lzZSBpdCB3aWxsIGJlIGEgbGlzdCBvZiB0aGUgaXRlbXMuXG4gICAgaWQ6IG51bGwsXG5cbiAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBjb21wYXJpc29ucyBzaG91bGQgYmUgY2FzZSBzZW5zaXRpdmUuXG5cbiAgICBjYXNlU2Vuc2l0aXZlOiBmYWxzZSxcblxuICAgIC8vIEFuIGFycmF5IG9mIHZhbHVlcyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBmcm9tIHRoZSBzZWFyY2hlcidzIG91dHB1dC4gV2hlbiB0aGlzIGFycmF5XG4gICAgLy8gY29udGFpbnMgZWxlbWVudHMsIGVhY2ggcmVzdWx0IGluIHRoZSBsaXN0IHdpbGwgYmUgb2YgdGhlIGZvcm0gYHsgaXRlbTogLi4uLCBpbmNsdWRlMTogLi4uLCBpbmNsdWRlMjogLi4uIH1gLlxuICAgIC8vIFZhbHVlcyB5b3UgY2FuIGluY2x1ZGUgYXJlIGBzY29yZWAsIGBtYXRjaGVkTG9jYXRpb25zYFxuICAgIGluY2x1ZGU6IFtdLFxuXG4gICAgLy8gV2hldGhlciB0byBzb3J0IHRoZSByZXN1bHQgbGlzdCwgYnkgc2NvcmVcbiAgICBzaG91bGRTb3J0OiB0cnVlLFxuXG4gICAgLy8gVGhlIHNlYXJjaCBmdW5jdGlvbiB0byB1c2VcbiAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgc2VhcmNoIGZ1bmN0aW9uIChbW0Z1bmN0aW9uXV0pIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIEFQSTpcbiAgICAvL1xuICAgIC8vICBAcGFyYW0gcGF0dGVybiBUaGUgcGF0dGVybiBzdHJpbmcgdG8gc2VhcmNoXG4gICAgLy8gIEBwYXJhbSBvcHRpb25zIFRoZSBzZWFyY2ggb3B0aW9uXG4gICAgLy8gIFtbRnVuY3Rpb25dXS5jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKHBhdHRlcm4sIG9wdGlvbnMpXG4gICAgLy9cbiAgICAvLyAgQHBhcmFtIHRleHQ6IHRoZSBzdHJpbmcgdG8gc2VhcmNoIGluIGZvciB0aGUgcGF0dGVyblxuICAgIC8vICBAcmV0dXJuIE9iamVjdCBpbiB0aGUgZm9ybSBvZjpcbiAgICAvLyAgICAtIGlzTWF0Y2g6IGJvb2xlYW5cbiAgICAvLyAgICAtIHNjb3JlOiBJbnRcbiAgICAvLyAgW1tGdW5jdGlvbl1dLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbih0ZXh0KVxuICAgIHNlYXJjaEZuOiBCaXRhcFNlYXJjaGVyLFxuXG4gICAgLy8gRGVmYXVsdCBzb3J0IGZ1bmN0aW9uXG4gICAgc29ydEZuOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEuc2NvcmUgLSBiLnNjb3JlXG4gICAgfSxcblxuICAgIC8vIFRoZSBnZXQgZnVuY3Rpb24gdG8gdXNlIHdoZW4gZmV0Y2hpbmcgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgICAvLyBUaGUgZGVmYXVsdCB3aWxsIHNlYXJjaCBuZXN0ZWQgcGF0aHMgKmllIGZvby5iYXIuYmF6KlxuICAgIGdldEZuOiBkZWVwVmFsdWUsXG5cbiAgICAvLyBMaXN0IG9mIHByb3BlcnRpZXMgdGhhdCB3aWxsIGJlIHNlYXJjaGVkLiBUaGlzIGFsc28gc3VwcG9ydHMgbmVzdGVkIHByb3BlcnRpZXMuXG4gICAga2V5czogW10sXG5cbiAgICAvLyBXaWxsIHByaW50IHRvIHRoZSBjb25zb2xlLiBVc2VmdWwgZm9yIGRlYnVnZ2luZy5cbiAgICB2ZXJib3NlOiBmYWxzZSxcblxuICAgIC8vIFdoZW4gdHJ1ZSwgdGhlIHNlYXJjaCBhbGdvcml0aG0gd2lsbCBzZWFyY2ggaW5kaXZpZHVhbCB3b3JkcyAqKmFuZCoqIHRoZSBmdWxsIHN0cmluZyxcbiAgICAvLyBjb21wdXRpbmcgdGhlIGZpbmFsIHNjb3JlIGFzIGEgZnVuY3Rpb24gb2YgYm90aC4gTm90ZSB0aGF0IHdoZW4gYHRva2VuaXplYCBpcyBgdHJ1ZWAsXG4gICAgLy8gdGhlIGB0aHJlc2hvbGRgLCBgZGlzdGFuY2VgLCBhbmQgYGxvY2F0aW9uYCBhcmUgaW5jb25zZXF1ZW50aWFsIGZvciBpbmRpdmlkdWFsIHRva2Vucy5cbiAgICB0b2tlbml6ZTogZmFsc2UsXG5cbiAgICAvLyBXaGVuIHRydWUsIHRoZSByZXN1bHQgc2V0IHdpbGwgb25seSBpbmNsdWRlIHJlY29yZHMgdGhhdCBtYXRjaCBhbGwgdG9rZW5zLiBXaWxsIG9ubHkgd29ya1xuICAgIC8vIGlmIGB0b2tlbml6ZWAgaXMgYWxzbyB0cnVlLlxuICAgIG1hdGNoQWxsVG9rZW5zOiBmYWxzZSxcblxuICAgIC8vIFJlZ2V4IHVzZWQgdG8gc2VwYXJhdGUgd29yZHMgd2hlbiBzZWFyY2hpbmcuIE9ubHkgYXBwbGljYWJsZSB3aGVuIGB0b2tlbml6ZWAgaXMgYHRydWVgLlxuICAgIHRva2VuU2VwYXJhdG9yOiAvICsvZyxcblxuICAgIC8vIE1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCBtdXN0IGJlIG1hdGNoZWQgYmVmb3JlIGEgcmVzdWx0IGlzIGNvbnNpZGVyZWQgYSBtYXRjaFxuICAgIG1pbk1hdGNoQ2hhckxlbmd0aDogMSxcblxuICAgIC8vIFdoZW4gdHJ1ZSwgdGhlIGFsZ29yaXRobSBjb250aW51ZXMgc2VhcmNoaW5nIHRvIHRoZSBlbmQgb2YgdGhlIGlucHV0IGV2ZW4gaWYgYSBwZXJmZWN0XG4gICAgLy8gbWF0Y2ggaXMgZm91bmQgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIHNhbWUgaW5wdXQuXG4gICAgZmluZEFsbE1hdGNoZXM6IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7IUFycmF5fSBsaXN0XG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+fSBvcHRpb25zXG4gICAqL1xuICBmdW5jdGlvbiBGdXNlIChsaXN0LCBvcHRpb25zKSB7XG4gICAgdmFyIGtleVxuXG4gICAgdGhpcy5saXN0ID0gbGlzdFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cbiAgICBmb3IgKGtleSBpbiBkZWZhdWx0T3B0aW9ucykge1xuICAgICAgaWYgKCFkZWZhdWx0T3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gQWRkIGJvb2xlYW4gdHlwZSBvcHRpb25zXG4gICAgICBpZiAodHlwZW9mIGRlZmF1bHRPcHRpb25zW2tleV0gPT09ICdib29sZWFuJykge1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IGtleSBpbiBvcHRpb25zID8gb3B0aW9uc1trZXldIDogZGVmYXVsdE9wdGlvbnNba2V5XTtcbiAgICAgIC8vIEFkZCBhbGwgb3RoZXIgb3B0aW9uc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV0gfHwgZGVmYXVsdE9wdGlvbnNba2V5XVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEZ1c2UuVkVSU0lPTiA9ICcyLjcuMydcblxuICAvKipcbiAgICogU2V0cyBhIG5ldyBsaXN0IGZvciBGdXNlIHRvIG1hdGNoIGFnYWluc3QuXG4gICAqIEBwYXJhbSB7IUFycmF5fSBsaXN0XG4gICAqIEByZXR1cm4geyFBcnJheX0gVGhlIG5ld2x5IHNldCBsaXN0XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIEZ1c2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgdGhpcy5saXN0ID0gbGlzdFxuICAgIHJldHVybiBsaXN0XG4gIH1cblxuICBGdXNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAocGF0dGVybikge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudmVyYm9zZSkgbG9nKCdcXG5TZWFyY2ggdGVybTonLCBwYXR0ZXJuLCAnXFxuJylcblxuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm5cbiAgICB0aGlzLnJlc3VsdHMgPSBbXVxuICAgIHRoaXMucmVzdWx0TWFwID0ge31cbiAgICB0aGlzLl9rZXlNYXAgPSBudWxsXG5cbiAgICB0aGlzLl9wcmVwYXJlU2VhcmNoZXJzKClcbiAgICB0aGlzLl9zdGFydFNlYXJjaCgpXG4gICAgdGhpcy5fY29tcHV0ZVNjb3JlKClcbiAgICB0aGlzLl9zb3J0KClcblxuICAgIHZhciBvdXRwdXQgPSB0aGlzLl9mb3JtYXQoKVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIEZ1c2UucHJvdG90eXBlLl9wcmVwYXJlU2VhcmNoZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zXG4gICAgdmFyIHBhdHRlcm4gPSB0aGlzLnBhdHRlcm5cbiAgICB2YXIgc2VhcmNoRm4gPSBvcHRpb25zLnNlYXJjaEZuXG4gICAgdmFyIHRva2VucyA9IHBhdHRlcm4uc3BsaXQob3B0aW9ucy50b2tlblNlcGFyYXRvcilcbiAgICB2YXIgaSA9IDBcbiAgICB2YXIgbGVuID0gdG9rZW5zLmxlbmd0aFxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy50b2tlbml6ZSkge1xuICAgICAgdGhpcy50b2tlblNlYXJjaGVycyA9IFtdXG4gICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRoaXMudG9rZW5TZWFyY2hlcnMucHVzaChuZXcgc2VhcmNoRm4odG9rZW5zW2ldLCBvcHRpb25zKSlcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5mdWxsU2VhY2hlciA9IG5ldyBzZWFyY2hGbihwYXR0ZXJuLCBvcHRpb25zKVxuICB9XG5cbiAgRnVzZS5wcm90b3R5cGUuX3N0YXJ0U2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zXG4gICAgdmFyIGdldEZuID0gb3B0aW9ucy5nZXRGblxuICAgIHZhciBsaXN0ID0gdGhpcy5saXN0XG4gICAgdmFyIGxpc3RMZW4gPSBsaXN0Lmxlbmd0aFxuICAgIHZhciBrZXlzID0gdGhpcy5vcHRpb25zLmtleXNcbiAgICB2YXIga2V5c0xlbiA9IGtleXMubGVuZ3RoXG4gICAgdmFyIGtleVxuICAgIHZhciB3ZWlnaHRcbiAgICB2YXIgaXRlbSA9IG51bGxcbiAgICB2YXIgaVxuICAgIHZhciBqXG5cbiAgICAvLyBDaGVjayB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgbGlzdCwgaWYgaXQncyBhIHN0cmluZywgdGhlbiB3ZSBhc3N1bWVcbiAgICAvLyB0aGF0IGV2ZXJ5IGl0ZW0gaW4gdGhlIGxpc3QgaXMgYWxzbyBhIHN0cmluZywgYW5kIHRodXMgaXQncyBhIGZsYXR0ZW5lZCBhcnJheS5cbiAgICBpZiAodHlwZW9mIGxpc3RbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkgaXRlbVxuICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RMZW47IGkrKykge1xuICAgICAgICB0aGlzLl9hbmFseXplKCcnLCBsaXN0W2ldLCBpLCBpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9rZXlNYXAgPSB7fVxuICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgZmlyc3QgaXRlbSBpcyBhbiBPYmplY3QgKGhvcGVmdWxseSksIGFuZCB0aHVzIHRoZSBzZWFyY2hpbmdcbiAgICAgIC8vIGlzIGRvbmUgb24gdGhlIHZhbHVlcyBvZiB0aGUga2V5cyBvZiBlYWNoIGl0ZW0uXG4gICAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkgaXRlbVxuICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3RMZW47IGkrKykge1xuICAgICAgICBpdGVtID0gbGlzdFtpXVxuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgZXZlcnkga2V5XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBrZXlzTGVuOyBqKyspIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2pdXG4gICAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB3ZWlnaHQgPSAoMSAtIGtleS53ZWlnaHQpIHx8IDFcbiAgICAgICAgICAgIHRoaXMuX2tleU1hcFtrZXkubmFtZV0gPSB7XG4gICAgICAgICAgICAgIHdlaWdodDogd2VpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa2V5LndlaWdodCA8PSAwIHx8IGtleS53ZWlnaHQgPiAxKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignS2V5IHdlaWdodCBoYXMgdG8gYmUgPiAwIGFuZCA8PSAxJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleSA9IGtleS5uYW1lXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2tleU1hcFtrZXldID0ge1xuICAgICAgICAgICAgICB3ZWlnaHQ6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fYW5hbHl6ZShrZXksIGdldEZuKGl0ZW0sIGtleSwgW10pLCBpdGVtLCBpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgRnVzZS5wcm90b3R5cGUuX2FuYWx5emUgPSBmdW5jdGlvbiAoa2V5LCB0ZXh0LCBlbnRpdHksIGluZGV4KSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnNcbiAgICB2YXIgd29yZHNcbiAgICB2YXIgc2NvcmVzXG4gICAgdmFyIGV4aXN0cyA9IGZhbHNlXG4gICAgdmFyIGV4aXN0aW5nUmVzdWx0XG4gICAgdmFyIGF2ZXJhZ2VTY29yZVxuICAgIHZhciBmaW5hbFNjb3JlXG4gICAgdmFyIHNjb3Jlc0xlblxuICAgIHZhciBtYWluU2VhcmNoUmVzdWx0XG4gICAgdmFyIHRva2VuU2VhcmNoZXJcbiAgICB2YXIgdGVybVNjb3Jlc1xuICAgIHZhciB3b3JkXG4gICAgdmFyIHRva2VuU2VhcmNoUmVzdWx0XG4gICAgdmFyIGhhc01hdGNoSW5UZXh0XG4gICAgdmFyIGNoZWNrVGV4dE1hdGNoZXNcbiAgICB2YXIgaVxuICAgIHZhciBqXG5cbiAgICAvLyBDaGVjayBpZiB0aGUgdGV4dCBjYW4gYmUgc2VhcmNoZWRcbiAgICBpZiAodGV4dCA9PT0gdW5kZWZpbmVkIHx8IHRleHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNjb3JlcyA9IFtdXG5cbiAgICB2YXIgbnVtVGV4dE1hdGNoZXMgPSAwXG5cbiAgICBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB3b3JkcyA9IHRleHQuc3BsaXQob3B0aW9ucy50b2tlblNlcGFyYXRvcilcblxuICAgICAgaWYgKG9wdGlvbnMudmVyYm9zZSkgbG9nKCctLS0tLS0tLS1cXG5LZXk6Jywga2V5KVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRva2VuaXplKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRva2VuU2VhcmNoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdG9rZW5TZWFyY2hlciA9IHRoaXMudG9rZW5TZWFyY2hlcnNbaV1cblxuICAgICAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnUGF0dGVybjonLCB0b2tlblNlYXJjaGVyLnBhdHRlcm4pXG5cbiAgICAgICAgICB0ZXJtU2NvcmVzID0gW11cbiAgICAgICAgICBoYXNNYXRjaEluVGV4dCA9IGZhbHNlXG5cbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgd29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHdvcmQgPSB3b3Jkc1tqXVxuICAgICAgICAgICAgdG9rZW5TZWFyY2hSZXN1bHQgPSB0b2tlblNlYXJjaGVyLnNlYXJjaCh3b3JkKVxuICAgICAgICAgICAgdmFyIG9iaiA9IHt9XG4gICAgICAgICAgICBpZiAodG9rZW5TZWFyY2hSZXN1bHQuaXNNYXRjaCkge1xuICAgICAgICAgICAgICBvYmpbd29yZF0gPSB0b2tlblNlYXJjaFJlc3VsdC5zY29yZVxuICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlXG4gICAgICAgICAgICAgIGhhc01hdGNoSW5UZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgICBzY29yZXMucHVzaCh0b2tlblNlYXJjaFJlc3VsdC5zY29yZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ialt3b3JkXSA9IDFcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMubWF0Y2hBbGxUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICBzY29yZXMucHVzaCgxKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXJtU2NvcmVzLnB1c2gob2JqKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChoYXNNYXRjaEluVGV4dCkge1xuICAgICAgICAgICAgbnVtVGV4dE1hdGNoZXMrK1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnVG9rZW4gc2NvcmVzOicsIHRlcm1TY29yZXMpXG4gICAgICAgIH1cblxuICAgICAgICBhdmVyYWdlU2NvcmUgPSBzY29yZXNbMF1cbiAgICAgICAgc2NvcmVzTGVuID0gc2NvcmVzLmxlbmd0aFxuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgc2NvcmVzTGVuOyBpKyspIHtcbiAgICAgICAgICBhdmVyYWdlU2NvcmUgKz0gc2NvcmVzW2ldXG4gICAgICAgIH1cbiAgICAgICAgYXZlcmFnZVNjb3JlID0gYXZlcmFnZVNjb3JlIC8gc2NvcmVzTGVuXG5cbiAgICAgICAgaWYgKG9wdGlvbnMudmVyYm9zZSkgbG9nKCdUb2tlbiBzY29yZSBhdmVyYWdlOicsIGF2ZXJhZ2VTY29yZSlcbiAgICAgIH1cblxuICAgICAgbWFpblNlYXJjaFJlc3VsdCA9IHRoaXMuZnVsbFNlYWNoZXIuc2VhcmNoKHRleHQpXG4gICAgICBpZiAob3B0aW9ucy52ZXJib3NlKSBsb2coJ0Z1bGwgdGV4dCBzY29yZTonLCBtYWluU2VhcmNoUmVzdWx0LnNjb3JlKVxuXG4gICAgICBmaW5hbFNjb3JlID0gbWFpblNlYXJjaFJlc3VsdC5zY29yZVxuICAgICAgaWYgKGF2ZXJhZ2VTY29yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbmFsU2NvcmUgPSAoZmluYWxTY29yZSArIGF2ZXJhZ2VTY29yZSkgLyAyXG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnU2NvcmUgYXZlcmFnZTonLCBmaW5hbFNjb3JlKVxuXG4gICAgICBjaGVja1RleHRNYXRjaGVzID0gKHRoaXMub3B0aW9ucy50b2tlbml6ZSAmJiB0aGlzLm9wdGlvbnMubWF0Y2hBbGxUb2tlbnMpID8gbnVtVGV4dE1hdGNoZXMgPj0gdGhpcy50b2tlblNlYXJjaGVycy5sZW5ndGggOiB0cnVlXG5cbiAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnQ2hlY2sgTWF0Y2hlcycsIGNoZWNrVGV4dE1hdGNoZXMpXG5cbiAgICAgIC8vIElmIGEgbWF0Y2ggaXMgZm91bmQsIGFkZCB0aGUgaXRlbSB0byA8cmF3UmVzdWx0cz4sIGluY2x1ZGluZyBpdHMgc2NvcmVcbiAgICAgIGlmICgoZXhpc3RzIHx8IG1haW5TZWFyY2hSZXN1bHQuaXNNYXRjaCkgJiYgY2hlY2tUZXh0TWF0Y2hlcykge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cyBpbiBvdXIgcmVzdWx0c1xuICAgICAgICBleGlzdGluZ1Jlc3VsdCA9IHRoaXMucmVzdWx0TWFwW2luZGV4XVxuXG4gICAgICAgIGlmIChleGlzdGluZ1Jlc3VsdCkge1xuICAgICAgICAgIC8vIFVzZSB0aGUgbG93ZXN0IHNjb3JlXG4gICAgICAgICAgLy8gZXhpc3RpbmdSZXN1bHQuc2NvcmUsIGJpdGFwUmVzdWx0LnNjb3JlXG4gICAgICAgICAgZXhpc3RpbmdSZXN1bHQub3V0cHV0LnB1c2goe1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBzY29yZTogZmluYWxTY29yZSxcbiAgICAgICAgICAgIG1hdGNoZWRJbmRpY2VzOiBtYWluU2VhcmNoUmVzdWx0Lm1hdGNoZWRJbmRpY2VzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIHJhdyByZXN1bHQgbGlzdFxuICAgICAgICAgIHRoaXMucmVzdWx0TWFwW2luZGV4XSA9IHtcbiAgICAgICAgICAgIGl0ZW06IGVudGl0eSxcbiAgICAgICAgICAgIG91dHB1dDogW3tcbiAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgIHNjb3JlOiBmaW5hbFNjb3JlLFxuICAgICAgICAgICAgICBtYXRjaGVkSW5kaWNlczogbWFpblNlYXJjaFJlc3VsdC5tYXRjaGVkSW5kaWNlc1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnJlc3VsdHMucHVzaCh0aGlzLnJlc3VsdE1hcFtpbmRleF0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodGV4dCkpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2FuYWx5emUoa2V5LCB0ZXh0W2ldLCBlbnRpdHksIGluZGV4KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEZ1c2UucHJvdG90eXBlLl9jb21wdXRlU2NvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlcbiAgICB2YXIgalxuICAgIHZhciBrZXlNYXAgPSB0aGlzLl9rZXlNYXBcbiAgICB2YXIgdG90YWxTY29yZVxuICAgIHZhciBvdXRwdXRcbiAgICB2YXIgc2NvcmVMZW5cbiAgICB2YXIgc2NvcmVcbiAgICB2YXIgd2VpZ2h0XG4gICAgdmFyIHJlc3VsdHMgPSB0aGlzLnJlc3VsdHNcbiAgICB2YXIgYmVzdFNjb3JlXG4gICAgdmFyIG5TY29yZVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy52ZXJib3NlKSBsb2coJ1xcblxcbkNvbXB1dGluZyBzY29yZTpcXG4nKVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRvdGFsU2NvcmUgPSAwXG4gICAgICBvdXRwdXQgPSByZXN1bHRzW2ldLm91dHB1dFxuICAgICAgc2NvcmVMZW4gPSBvdXRwdXQubGVuZ3RoXG5cbiAgICAgIGJlc3RTY29yZSA9IDFcblxuICAgICAgZm9yIChqID0gMDsgaiA8IHNjb3JlTGVuOyBqKyspIHtcbiAgICAgICAgc2NvcmUgPSBvdXRwdXRbal0uc2NvcmVcbiAgICAgICAgd2VpZ2h0ID0ga2V5TWFwID8ga2V5TWFwW291dHB1dFtqXS5rZXldLndlaWdodCA6IDFcblxuICAgICAgICBuU2NvcmUgPSBzY29yZSAqIHdlaWdodFxuXG4gICAgICAgIGlmICh3ZWlnaHQgIT09IDEpIHtcbiAgICAgICAgICBiZXN0U2NvcmUgPSBNYXRoLm1pbihiZXN0U2NvcmUsIG5TY29yZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3RhbFNjb3JlICs9IG5TY29yZVxuICAgICAgICAgIG91dHB1dFtqXS5uU2NvcmUgPSBuU2NvcmVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYmVzdFNjb3JlID09PSAxKSB7XG4gICAgICAgIHJlc3VsdHNbaV0uc2NvcmUgPSB0b3RhbFNjb3JlIC8gc2NvcmVMZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdHNbaV0uc2NvcmUgPSBiZXN0U2NvcmVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy52ZXJib3NlKSBsb2cocmVzdWx0c1tpXSlcbiAgICB9XG4gIH1cblxuICBGdXNlLnByb3RvdHlwZS5fc29ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgIGlmIChvcHRpb25zLnNob3VsZFNvcnQpIHtcbiAgICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIGxvZygnXFxuXFxuU29ydGluZy4uLi4nKVxuICAgICAgdGhpcy5yZXN1bHRzLnNvcnQob3B0aW9ucy5zb3J0Rm4pXG4gICAgfVxuICB9XG5cbiAgRnVzZS5wcm90b3R5cGUuX2Zvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgIHZhciBnZXRGbiA9IG9wdGlvbnMuZ2V0Rm5cbiAgICB2YXIgZmluYWxPdXRwdXQgPSBbXVxuICAgIHZhciBpXG4gICAgdmFyIGxlblxuICAgIHZhciByZXN1bHRzID0gdGhpcy5yZXN1bHRzXG4gICAgdmFyIHJlcGxhY2VWYWx1ZVxuICAgIHZhciBnZXRJdGVtQXRJbmRleFxuICAgIHZhciBpbmNsdWRlID0gb3B0aW9ucy5pbmNsdWRlXG5cbiAgICBpZiAob3B0aW9ucy52ZXJib3NlKSBsb2coJ1xcblxcbk91dHB1dDpcXG5cXG4nLCByZXN1bHRzKVxuXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uLCBoZXJlIGZvciBzcGVlZC11cCwgd2hpY2ggcmVwbGFjZXMgdGhlIGl0ZW0gd2l0aCBpdHMgdmFsdWUsXG4gICAgLy8gaWYgdGhlIG9wdGlvbnMgc3BlY2lmaWVzIGl0LFxuICAgIHJlcGxhY2VWYWx1ZSA9IG9wdGlvbnMuaWQgPyBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIHJlc3VsdHNbaW5kZXhdLml0ZW0gPSBnZXRGbihyZXN1bHRzW2luZGV4XS5pdGVtLCBvcHRpb25zLmlkLCBbXSlbMF1cbiAgICB9IDogZnVuY3Rpb24gKCkge31cblxuICAgIGdldEl0ZW1BdEluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICB2YXIgcmVjb3JkID0gcmVzdWx0c1tpbmRleF1cbiAgICAgIHZhciBkYXRhXG4gICAgICB2YXIgalxuICAgICAgdmFyIG91dHB1dFxuICAgICAgdmFyIF9pdGVtXG4gICAgICB2YXIgX3Jlc3VsdFxuXG4gICAgICAvLyBJZiBgaW5jbHVkZWAgaGFzIHZhbHVlcywgcHV0IHRoZSBpdGVtIGluIHRoZSByZXN1bHRcbiAgICAgIGlmIChpbmNsdWRlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICBpdGVtOiByZWNvcmQuaXRlbVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNsdWRlLmluZGV4T2YoJ21hdGNoZXMnKSAhPT0gLTEpIHtcbiAgICAgICAgICBvdXRwdXQgPSByZWNvcmQub3V0cHV0XG4gICAgICAgICAgZGF0YS5tYXRjaGVzID0gW11cbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgb3V0cHV0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBfaXRlbSA9IG91dHB1dFtqXVxuICAgICAgICAgICAgX3Jlc3VsdCA9IHtcbiAgICAgICAgICAgICAgaW5kaWNlczogX2l0ZW0ubWF0Y2hlZEluZGljZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfaXRlbS5rZXkpIHtcbiAgICAgICAgICAgICAgX3Jlc3VsdC5rZXkgPSBfaXRlbS5rZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEubWF0Y2hlcy5wdXNoKF9yZXN1bHQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluY2x1ZGUuaW5kZXhPZignc2NvcmUnKSAhPT0gLTEpIHtcbiAgICAgICAgICBkYXRhLnNjb3JlID0gcmVzdWx0c1tpbmRleF0uc2NvcmVcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gcmVjb3JkLml0ZW1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG5cbiAgICAvLyBGcm9tIHRoZSByZXN1bHRzLCBwdXNoIGludG8gYSBuZXcgYXJyYXkgb25seSB0aGUgaXRlbSBpZGVudGlmaWVyIChpZiBzcGVjaWZpZWQpXG4gICAgLy8gb2YgdGhlIGVudGlyZSBpdGVtLiAgVGhpcyBpcyBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIHRoZSA8cmVzdWx0cz4sXG4gICAgLy8gc2luY2UgaXQgY29udGFpbnMgb3RoZXIgbWV0YWRhdGFcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSByZXN1bHRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICByZXBsYWNlVmFsdWUoaSlcbiAgICAgIGZpbmFsT3V0cHV0LnB1c2goZ2V0SXRlbUF0SW5kZXgoaSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmFsT3V0cHV0XG4gIH1cblxuICAvLyBIZWxwZXJzXG5cbiAgZnVuY3Rpb24gZGVlcFZhbHVlIChvYmosIHBhdGgsIGxpc3QpIHtcbiAgICB2YXIgZmlyc3RTZWdtZW50XG4gICAgdmFyIHJlbWFpbmluZ1xuICAgIHZhciBkb3RJbmRleFxuICAgIHZhciB2YWx1ZVxuICAgIHZhciBpXG4gICAgdmFyIGxlblxuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIHBhdGggbGVmdCwgd2UndmUgZ290dGVuIHRvIHRoZSBvYmplY3Qgd2UgY2FyZSBhYm91dC5cbiAgICAgIGxpc3QucHVzaChvYmopXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvdEluZGV4ID0gcGF0aC5pbmRleE9mKCcuJylcblxuICAgICAgaWYgKGRvdEluZGV4ICE9PSAtMSkge1xuICAgICAgICBmaXJzdFNlZ21lbnQgPSBwYXRoLnNsaWNlKDAsIGRvdEluZGV4KVxuICAgICAgICByZW1haW5pbmcgPSBwYXRoLnNsaWNlKGRvdEluZGV4ICsgMSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpcnN0U2VnbWVudCA9IHBhdGhcbiAgICAgIH1cblxuICAgICAgdmFsdWUgPSBvYmpbZmlyc3RTZWdtZW50XVxuICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCFyZW1haW5pbmcgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykpIHtcbiAgICAgICAgICBsaXN0LnB1c2godmFsdWUpXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAvLyBTZWFyY2ggZWFjaCBpdGVtIGluIHRoZSBhcnJheS5cbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZGVlcFZhbHVlKHZhbHVlW2ldLCByZW1haW5pbmcsIGxpc3QpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZykge1xuICAgICAgICAgIC8vIEFuIG9iamVjdC4gUmVjdXJzZSBmdXJ0aGVyLlxuICAgICAgICAgIGRlZXBWYWx1ZSh2YWx1ZSwgcmVtYWluaW5nLCBsaXN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXJyYXkgKG9iaikge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICB9XG5cbiAgLyoqXG4gICAqIEFkYXB0ZWQgZnJvbSBcIkRpZmYsIE1hdGNoIGFuZCBQYXRjaFwiLCBieSBHb29nbGVcbiAgICpcbiAgICogICBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWRpZmYtbWF0Y2gtcGF0Y2gvXG4gICAqXG4gICAqIE1vZGlmaWVkIGJ5OiBLaXJvbGxvcyBSaXNrIDxraXJvbGxvc0BnbWFpbC5jb20+XG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIERldGFpbHM6IHRoZSBhbGdvcml0aG0gYW5kIHN0cnVjdHVyZSB3YXMgbW9kaWZpZWQgdG8gYWxsb3cgdGhlIGNyZWF0aW9uIG9mXG4gICAqIDxTZWFyY2hlcj4gaW5zdGFuY2VzIHdpdGggYSA8c2VhcmNoPiBtZXRob2Qgd2hpY2ggZG9lcyB0aGUgYWN0dWFsXG4gICAqIGJpdGFwIHNlYXJjaC4gVGhlIDxwYXR0ZXJuPiAodGhlIHN0cmluZyB0aGF0IGlzIHNlYXJjaGVkIGZvcikgaXMgb25seSBkZWZpbmVkXG4gICAqIG9uY2UgcGVyIGluc3RhbmNlIGFuZCB0aHVzIGl0IGVsaW1pbmF0ZXMgcmVkdW5kYW50IHJlLWNyZWF0aW9uIHdoZW4gc2VhcmNoaW5nXG4gICAqIG92ZXIgYSBsaXN0IG9mIHN0cmluZ3MuXG4gICAqXG4gICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIilcbiAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIEJpdGFwU2VhcmNoZXIgKHBhdHRlcm4sIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLm9wdGlvbnMubG9jYXRpb24gPSBvcHRpb25zLmxvY2F0aW9uIHx8IEJpdGFwU2VhcmNoZXIuZGVmYXVsdE9wdGlvbnMubG9jYXRpb25cbiAgICB0aGlzLm9wdGlvbnMuZGlzdGFuY2UgPSAnZGlzdGFuY2UnIGluIG9wdGlvbnMgPyBvcHRpb25zLmRpc3RhbmNlIDogQml0YXBTZWFyY2hlci5kZWZhdWx0T3B0aW9ucy5kaXN0YW5jZVxuICAgIHRoaXMub3B0aW9ucy50aHJlc2hvbGQgPSAndGhyZXNob2xkJyBpbiBvcHRpb25zID8gb3B0aW9ucy50aHJlc2hvbGQgOiBCaXRhcFNlYXJjaGVyLmRlZmF1bHRPcHRpb25zLnRocmVzaG9sZFxuICAgIHRoaXMub3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoID0gb3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoIHx8IEJpdGFwU2VhcmNoZXIuZGVmYXVsdE9wdGlvbnMubWF4UGF0dGVybkxlbmd0aFxuXG4gICAgdGhpcy5wYXR0ZXJuID0gb3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gcGF0dGVybiA6IHBhdHRlcm4udG9Mb3dlckNhc2UoKVxuICAgIHRoaXMucGF0dGVybkxlbiA9IHBhdHRlcm4ubGVuZ3RoXG5cbiAgICBpZiAodGhpcy5wYXR0ZXJuTGVuIDw9IHRoaXMub3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoKSB7XG4gICAgICB0aGlzLm1hdGNobWFzayA9IDEgPDwgKHRoaXMucGF0dGVybkxlbiAtIDEpXG4gICAgICB0aGlzLnBhdHRlcm5BbHBoYWJldCA9IHRoaXMuX2NhbGN1bGF0ZVBhdHRlcm5BbHBoYWJldCgpXG4gICAgfVxuICB9XG5cbiAgQml0YXBTZWFyY2hlci5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAvLyBBcHByb3hpbWF0ZWx5IHdoZXJlIGluIHRoZSB0ZXh0IGlzIHRoZSBwYXR0ZXJuIGV4cGVjdGVkIHRvIGJlIGZvdW5kP1xuICAgIGxvY2F0aW9uOiAwLFxuXG4gICAgLy8gRGV0ZXJtaW5lcyBob3cgY2xvc2UgdGhlIG1hdGNoIG11c3QgYmUgdG8gdGhlIGZ1enp5IGxvY2F0aW9uIChzcGVjaWZpZWQgYWJvdmUpLlxuICAgIC8vIEFuIGV4YWN0IGxldHRlciBtYXRjaCB3aGljaCBpcyAnZGlzdGFuY2UnIGNoYXJhY3RlcnMgYXdheSBmcm9tIHRoZSBmdXp6eSBsb2NhdGlvblxuICAgIC8vIHdvdWxkIHNjb3JlIGFzIGEgY29tcGxldGUgbWlzbWF0Y2guIEEgZGlzdGFuY2Ugb2YgJzAnIHJlcXVpcmVzIHRoZSBtYXRjaCBiZSBhdFxuICAgIC8vIHRoZSBleGFjdCBsb2NhdGlvbiBzcGVjaWZpZWQsIGEgdGhyZXNob2xkIG9mICcxMDAwJyB3b3VsZCByZXF1aXJlIGEgcGVyZmVjdCBtYXRjaFxuICAgIC8vIHRvIGJlIHdpdGhpbiA4MDAgY2hhcmFjdGVycyBvZiB0aGUgZnV6enkgbG9jYXRpb24gdG8gYmUgZm91bmQgdXNpbmcgYSAwLjggdGhyZXNob2xkLlxuICAgIGRpc3RhbmNlOiAxMDAsXG5cbiAgICAvLyBBdCB3aGF0IHBvaW50IGRvZXMgdGhlIG1hdGNoIGFsZ29yaXRobSBnaXZlIHVwLiBBIHRocmVzaG9sZCBvZiAnMC4wJyByZXF1aXJlcyBhIHBlcmZlY3QgbWF0Y2hcbiAgICAvLyAob2YgYm90aCBsZXR0ZXJzIGFuZCBsb2NhdGlvbiksIGEgdGhyZXNob2xkIG9mICcxLjAnIHdvdWxkIG1hdGNoIGFueXRoaW5nLlxuICAgIHRocmVzaG9sZDogMC42LFxuXG4gICAgLy8gTWFjaGluZSB3b3JkIHNpemVcbiAgICBtYXhQYXR0ZXJuTGVuZ3RoOiAzMlxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGFscGhhYmV0IGZvciB0aGUgQml0YXAgYWxnb3JpdGhtLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEhhc2ggb2YgY2hhcmFjdGVyIGxvY2F0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIEJpdGFwU2VhcmNoZXIucHJvdG90eXBlLl9jYWxjdWxhdGVQYXR0ZXJuQWxwaGFiZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1hc2sgPSB7fSxcbiAgICAgIGkgPSAwXG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5wYXR0ZXJuTGVuOyBpKyspIHtcbiAgICAgIG1hc2tbdGhpcy5wYXR0ZXJuLmNoYXJBdChpKV0gPSAwXG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucGF0dGVybkxlbjsgaSsrKSB7XG4gICAgICBtYXNrW3RoaXMucGF0dGVybi5jaGFyQXQoaSldIHw9IDEgPDwgKHRoaXMucGF0dGVybi5sZW5ndGggLSBpIC0gMSlcbiAgICB9XG5cbiAgICByZXR1cm4gbWFza1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGUgYW5kIHJldHVybiB0aGUgc2NvcmUgZm9yIGEgbWF0Y2ggd2l0aCBgZWAgZXJyb3JzIGFuZCBgeGAgbG9jYXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvcnMgTnVtYmVyIG9mIGVycm9ycyBpbiBtYXRjaC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGxvY2F0aW9uIExvY2F0aW9uIG9mIG1hdGNoLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE92ZXJhbGwgc2NvcmUgZm9yIG1hdGNoICgwLjAgPSBnb29kLCAxLjAgPSBiYWQpLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQml0YXBTZWFyY2hlci5wcm90b3R5cGUuX2JpdGFwU2NvcmUgPSBmdW5jdGlvbiAoZXJyb3JzLCBsb2NhdGlvbikge1xuICAgIHZhciBhY2N1cmFjeSA9IGVycm9ycyAvIHRoaXMucGF0dGVybkxlbixcbiAgICAgIHByb3hpbWl0eSA9IE1hdGguYWJzKHRoaXMub3B0aW9ucy5sb2NhdGlvbiAtIGxvY2F0aW9uKVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzdGFuY2UpIHtcbiAgICAgIC8vIERvZGdlIGRpdmlkZSBieSB6ZXJvIGVycm9yLlxuICAgICAgcmV0dXJuIHByb3hpbWl0eSA/IDEuMCA6IGFjY3VyYWN5XG4gICAgfVxuICAgIHJldHVybiBhY2N1cmFjeSArIChwcm94aW1pdHkgLyB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZSBhbmQgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIHNlYXJjaFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZWFyY2ggaW5cbiAgICogQHJldHVybiB7e2lzTWF0Y2g6IGJvb2xlYW4sIHNjb3JlOiBudW1iZXJ9fSBMaXRlcmFsIGNvbnRhaW5pbmc6XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBpc01hdGNoIC0gV2hldGhlciB0aGUgdGV4dCBpcyBhIG1hdGNoIG9yIG5vdFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmUgLSBPdmVyYWxsIHNjb3JlIGZvciB0aGUgbWF0Y2hcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgQml0YXBTZWFyY2hlci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgIHZhciBpXG4gICAgdmFyIGpcbiAgICB2YXIgdGV4dExlblxuICAgIHZhciBmaW5kQWxsTWF0Y2hlc1xuICAgIHZhciBsb2NhdGlvblxuICAgIHZhciB0aHJlc2hvbGRcbiAgICB2YXIgYmVzdExvY1xuICAgIHZhciBiaW5NaW5cbiAgICB2YXIgYmluTWlkXG4gICAgdmFyIGJpbk1heFxuICAgIHZhciBzdGFydCwgZmluaXNoXG4gICAgdmFyIGJpdEFyclxuICAgIHZhciBsYXN0Qml0QXJyXG4gICAgdmFyIGNoYXJNYXRjaFxuICAgIHZhciBzY29yZVxuICAgIHZhciBsb2NhdGlvbnNcbiAgICB2YXIgbWF0Y2hlc1xuICAgIHZhciBpc01hdGNoZWRcbiAgICB2YXIgbWF0Y2hNYXNrXG4gICAgdmFyIG1hdGNoZWRJbmRpY2VzXG4gICAgdmFyIG1hdGNoZXNMZW5cbiAgICB2YXIgbWF0Y2hcblxuICAgIHRleHQgPSBvcHRpb25zLmNhc2VTZW5zaXRpdmUgPyB0ZXh0IDogdGV4dC50b0xvd2VyQ2FzZSgpXG5cbiAgICBpZiAodGhpcy5wYXR0ZXJuID09PSB0ZXh0KSB7XG4gICAgICAvLyBFeGFjdCBtYXRjaFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNNYXRjaDogdHJ1ZSxcbiAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgIG1hdGNoZWRJbmRpY2VzOiBbWzAsIHRleHQubGVuZ3RoIC0gMV1dXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBwYXR0ZXJuIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gdGhlIG1hY2hpbmUgd29yZCBsZW5ndGgsIGp1c3QgZG8gYSBhIHJlZ2V4IGNvbXBhcmlzb25cbiAgICBpZiAodGhpcy5wYXR0ZXJuTGVuID4gb3B0aW9ucy5tYXhQYXR0ZXJuTGVuZ3RoKSB7XG4gICAgICBtYXRjaGVzID0gdGV4dC5tYXRjaChuZXcgUmVnRXhwKHRoaXMucGF0dGVybi5yZXBsYWNlKG9wdGlvbnMudG9rZW5TZXBhcmF0b3IsICd8JykpKVxuICAgICAgaXNNYXRjaGVkID0gISFtYXRjaGVzXG5cbiAgICAgIGlmIChpc01hdGNoZWQpIHtcbiAgICAgICAgbWF0Y2hlZEluZGljZXMgPSBbXVxuICAgICAgICBmb3IgKGkgPSAwLCBtYXRjaGVzTGVuID0gbWF0Y2hlcy5sZW5ndGg7IGkgPCBtYXRjaGVzTGVuOyBpKyspIHtcbiAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbaV1cbiAgICAgICAgICBtYXRjaGVkSW5kaWNlcy5wdXNoKFt0ZXh0LmluZGV4T2YobWF0Y2gpLCBtYXRjaC5sZW5ndGggLSAxXSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc01hdGNoOiBpc01hdGNoZWQsXG4gICAgICAgIC8vIFRPRE86IHJldmlzaXQgdGhpcyBzY29yZVxuICAgICAgICBzY29yZTogaXNNYXRjaGVkID8gMC41IDogMSxcbiAgICAgICAgbWF0Y2hlZEluZGljZXM6IG1hdGNoZWRJbmRpY2VzXG4gICAgICB9XG4gICAgfVxuXG4gICAgZmluZEFsbE1hdGNoZXMgPSBvcHRpb25zLmZpbmRBbGxNYXRjaGVzXG5cbiAgICBsb2NhdGlvbiA9IG9wdGlvbnMubG9jYXRpb25cbiAgICAvLyBTZXQgc3RhcnRpbmcgbG9jYXRpb24gYXQgYmVnaW5uaW5nIHRleHQgYW5kIGluaXRpYWxpemUgdGhlIGFscGhhYmV0LlxuICAgIHRleHRMZW4gPSB0ZXh0Lmxlbmd0aFxuICAgIC8vIEhpZ2hlc3Qgc2NvcmUgYmV5b25kIHdoaWNoIHdlIGdpdmUgdXAuXG4gICAgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcbiAgICAvLyBJcyB0aGVyZSBhIG5lYXJieSBleGFjdCBtYXRjaD8gKHNwZWVkdXApXG4gICAgYmVzdExvYyA9IHRleHQuaW5kZXhPZih0aGlzLnBhdHRlcm4sIGxvY2F0aW9uKVxuXG4gICAgLy8gYSBtYXNrIG9mIHRoZSBtYXRjaGVzXG4gICAgbWF0Y2hNYXNrID0gW11cbiAgICBmb3IgKGkgPSAwOyBpIDwgdGV4dExlbjsgaSsrKSB7XG4gICAgICBtYXRjaE1hc2tbaV0gPSAwXG4gICAgfVxuXG4gICAgaWYgKGJlc3RMb2MgIT0gLTEpIHtcbiAgICAgIHRocmVzaG9sZCA9IE1hdGgubWluKHRoaXMuX2JpdGFwU2NvcmUoMCwgYmVzdExvYyksIHRocmVzaG9sZClcbiAgICAgIC8vIFdoYXQgYWJvdXQgaW4gdGhlIG90aGVyIGRpcmVjdGlvbj8gKHNwZWVkIHVwKVxuICAgICAgYmVzdExvYyA9IHRleHQubGFzdEluZGV4T2YodGhpcy5wYXR0ZXJuLCBsb2NhdGlvbiArIHRoaXMucGF0dGVybkxlbilcblxuICAgICAgaWYgKGJlc3RMb2MgIT0gLTEpIHtcbiAgICAgICAgdGhyZXNob2xkID0gTWF0aC5taW4odGhpcy5fYml0YXBTY29yZSgwLCBiZXN0TG9jKSwgdGhyZXNob2xkKVxuICAgICAgfVxuICAgIH1cblxuICAgIGJlc3RMb2MgPSAtMVxuICAgIHNjb3JlID0gMVxuICAgIGxvY2F0aW9ucyA9IFtdXG4gICAgYmluTWF4ID0gdGhpcy5wYXR0ZXJuTGVuICsgdGV4dExlblxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMucGF0dGVybkxlbjsgaSsrKSB7XG4gICAgICAvLyBTY2FuIGZvciB0aGUgYmVzdCBtYXRjaDsgZWFjaCBpdGVyYXRpb24gYWxsb3dzIGZvciBvbmUgbW9yZSBlcnJvci5cbiAgICAgIC8vIFJ1biBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIGhvdyBmYXIgZnJvbSB0aGUgbWF0Y2ggbG9jYXRpb24gd2UgY2FuIHN0cmF5XG4gICAgICAvLyBhdCB0aGlzIGVycm9yIGxldmVsLlxuICAgICAgYmluTWluID0gMFxuICAgICAgYmluTWlkID0gYmluTWF4XG4gICAgICB3aGlsZSAoYmluTWluIDwgYmluTWlkKSB7XG4gICAgICAgIGlmICh0aGlzLl9iaXRhcFNjb3JlKGksIGxvY2F0aW9uICsgYmluTWlkKSA8PSB0aHJlc2hvbGQpIHtcbiAgICAgICAgICBiaW5NaW4gPSBiaW5NaWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiaW5NYXggPSBiaW5NaWRcbiAgICAgICAgfVxuICAgICAgICBiaW5NaWQgPSBNYXRoLmZsb29yKChiaW5NYXggLSBiaW5NaW4pIC8gMiArIGJpbk1pbilcbiAgICAgIH1cblxuICAgICAgLy8gVXNlIHRoZSByZXN1bHQgZnJvbSB0aGlzIGl0ZXJhdGlvbiBhcyB0aGUgbWF4aW11bSBmb3IgdGhlIG5leHQuXG4gICAgICBiaW5NYXggPSBiaW5NaWRcbiAgICAgIHN0YXJ0ID0gTWF0aC5tYXgoMSwgbG9jYXRpb24gLSBiaW5NaWQgKyAxKVxuICAgICAgaWYgKGZpbmRBbGxNYXRjaGVzKSB7XG4gICAgICAgIGZpbmlzaCA9IHRleHRMZW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5pc2ggPSBNYXRoLm1pbihsb2NhdGlvbiArIGJpbk1pZCwgdGV4dExlbikgKyB0aGlzLnBhdHRlcm5MZW5cbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgYml0IGFycmF5XG4gICAgICBiaXRBcnIgPSBBcnJheShmaW5pc2ggKyAyKVxuXG4gICAgICBiaXRBcnJbZmluaXNoICsgMV0gPSAoMSA8PCBpKSAtIDFcblxuICAgICAgZm9yIChqID0gZmluaXNoOyBqID49IHN0YXJ0OyBqLS0pIHtcbiAgICAgICAgY2hhck1hdGNoID0gdGhpcy5wYXR0ZXJuQWxwaGFiZXRbdGV4dC5jaGFyQXQoaiAtIDEpXVxuXG4gICAgICAgIGlmIChjaGFyTWF0Y2gpIHtcbiAgICAgICAgICBtYXRjaE1hc2tbaiAtIDFdID0gMVxuICAgICAgICB9XG5cbiAgICAgICAgYml0QXJyW2pdID0gKChiaXRBcnJbaiArIDFdIDw8IDEpIHwgMSkgJiBjaGFyTWF0Y2hcblxuICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgIC8vIFN1YnNlcXVlbnQgcGFzc2VzOiBmdXp6eSBtYXRjaC5cbiAgICAgICAgICBiaXRBcnJbal0gfD0gKCgobGFzdEJpdEFycltqICsgMV0gfCBsYXN0Qml0QXJyW2pdKSA8PCAxKSB8IDEpIHwgbGFzdEJpdEFycltqICsgMV1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYml0QXJyW2pdICYgdGhpcy5tYXRjaG1hc2spIHtcbiAgICAgICAgICBzY29yZSA9IHRoaXMuX2JpdGFwU2NvcmUoaSwgaiAtIDEpXG5cbiAgICAgICAgICAvLyBUaGlzIG1hdGNoIHdpbGwgYWxtb3N0IGNlcnRhaW5seSBiZSBiZXR0ZXIgdGhhbiBhbnkgZXhpc3RpbmcgbWF0Y2guXG4gICAgICAgICAgLy8gQnV0IGNoZWNrIGFueXdheS5cbiAgICAgICAgICBpZiAoc2NvcmUgPD0gdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAvLyBJbmRlZWQgaXQgaXNcbiAgICAgICAgICAgIHRocmVzaG9sZCA9IHNjb3JlXG4gICAgICAgICAgICBiZXN0TG9jID0gaiAtIDFcbiAgICAgICAgICAgIGxvY2F0aW9ucy5wdXNoKGJlc3RMb2MpXG5cbiAgICAgICAgICAgIC8vIEFscmVhZHkgcGFzc2VkIGxvYywgZG93bmhpbGwgZnJvbSBoZXJlIG9uIGluLlxuICAgICAgICAgICAgaWYgKGJlc3RMb2MgPD0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2hlbiBwYXNzaW5nIGxvYywgZG9uJ3QgZXhjZWVkIG91ciBjdXJyZW50IGRpc3RhbmNlIGZyb20gbG9jLlxuICAgICAgICAgICAgc3RhcnQgPSBNYXRoLm1heCgxLCAyICogbG9jYXRpb24gLSBiZXN0TG9jKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBObyBob3BlIGZvciBhIChiZXR0ZXIpIG1hdGNoIGF0IGdyZWF0ZXIgZXJyb3IgbGV2ZWxzLlxuICAgICAgaWYgKHRoaXMuX2JpdGFwU2NvcmUoaSArIDEsIGxvY2F0aW9uKSA+IHRocmVzaG9sZCkge1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgbGFzdEJpdEFyciA9IGJpdEFyclxuICAgIH1cblxuICAgIG1hdGNoZWRJbmRpY2VzID0gdGhpcy5fZ2V0TWF0Y2hlZEluZGljZXMobWF0Y2hNYXNrKVxuXG4gICAgLy8gQ291bnQgZXhhY3QgbWF0Y2hlcyAodGhvc2Ugd2l0aCBhIHNjb3JlIG9mIDApIHRvIGJlIFwiYWxtb3N0XCIgZXhhY3RcbiAgICByZXR1cm4ge1xuICAgICAgaXNNYXRjaDogYmVzdExvYyA+PSAwLFxuICAgICAgc2NvcmU6IHNjb3JlID09PSAwID8gMC4wMDEgOiBzY29yZSxcbiAgICAgIG1hdGNoZWRJbmRpY2VzOiBtYXRjaGVkSW5kaWNlc1xuICAgIH1cbiAgfVxuXG4gIEJpdGFwU2VhcmNoZXIucHJvdG90eXBlLl9nZXRNYXRjaGVkSW5kaWNlcyA9IGZ1bmN0aW9uIChtYXRjaE1hc2spIHtcbiAgICB2YXIgbWF0Y2hlZEluZGljZXMgPSBbXVxuICAgIHZhciBzdGFydCA9IC0xXG4gICAgdmFyIGVuZCA9IC0xXG4gICAgdmFyIGkgPSAwXG4gICAgdmFyIG1hdGNoXG4gICAgdmFyIGxlbiA9IG1hdGNoTWFzay5sZW5ndGhcbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBtYXRjaCA9IG1hdGNoTWFza1tpXVxuICAgICAgaWYgKG1hdGNoICYmIHN0YXJ0ID09PSAtMSkge1xuICAgICAgICBzdGFydCA9IGlcbiAgICAgIH0gZWxzZSBpZiAoIW1hdGNoICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgICBlbmQgPSBpIC0gMVxuICAgICAgICBpZiAoKGVuZCAtIHN0YXJ0KSArIDEgPj0gdGhpcy5vcHRpb25zLm1pbk1hdGNoQ2hhckxlbmd0aCkge1xuICAgICAgICAgICAgbWF0Y2hlZEluZGljZXMucHVzaChbc3RhcnQsIGVuZF0pXG4gICAgICAgIH1cbiAgICAgICAgc3RhcnQgPSAtMVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF0Y2hNYXNrW2kgLSAxXSkge1xuICAgICAgaWYgKChpLTEgLSBzdGFydCkgKyAxID49IHRoaXMub3B0aW9ucy5taW5NYXRjaENoYXJMZW5ndGgpIHtcbiAgICAgICAgbWF0Y2hlZEluZGljZXMucHVzaChbc3RhcnQsIGkgLSAxXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZWRJbmRpY2VzXG4gIH1cblxuICAvLyBFeHBvcnQgdG8gQ29tbW9uIEpTIExvYWRlclxuICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gRnVzZVxuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEZ1c2VcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgZ2xvYmFsLkZ1c2UgPSBGdXNlXG4gIH1cblxufSkodGhpcyk7XG4iLCIvKiFcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgYSBCdWZmZXJcbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5cbi8vIFRoZSBfaXNCdWZmZXIgY2hlY2sgaXMgZm9yIFNhZmFyaSA1LTcgc3VwcG9ydCwgYmVjYXVzZSBpdCdzIG1pc3Npbmdcbi8vIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHlcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICE9IG51bGwgJiYgKGlzQnVmZmVyKG9iaikgfHwgaXNTbG93QnVmZmVyKG9iaikgfHwgISFvYmouX2lzQnVmZmVyKVxufVxuXG5mdW5jdGlvbiBpc0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiAhIW9iai5jb25zdHJ1Y3RvciAmJiB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopXG59XG5cbi8vIEZvciBOb2RlIHYwLjEwIHN1cHBvcnQuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHkuXG5mdW5jdGlvbiBpc1Nsb3dCdWZmZXIgKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iai5yZWFkRmxvYXRMRSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnNsaWNlID09PSAnZnVuY3Rpb24nICYmIGlzQnVmZmVyKG9iai5zbGljZSgwLCAwKSlcbn1cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXX0=
